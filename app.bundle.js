/******/ (function(modules) { // webpackBootstrap
/******/ 	// install a JSONP callback for chunk loading
/******/ 	function webpackJsonpCallback(data) {
/******/ 		var chunkIds = data[0];
/******/ 		var moreModules = data[1];
/******/ 		var executeModules = data[2];
/******/
/******/ 		// add "moreModules" to the modules object,
/******/ 		// then flag all "chunkIds" as loaded and fire callback
/******/ 		var moduleId, chunkId, i = 0, resolves = [];
/******/ 		for(;i < chunkIds.length; i++) {
/******/ 			chunkId = chunkIds[i];
/******/ 			if(installedChunks[chunkId]) {
/******/ 				resolves.push(installedChunks[chunkId][0]);
/******/ 			}
/******/ 			installedChunks[chunkId] = 0;
/******/ 		}
/******/ 		for(moduleId in moreModules) {
/******/ 			if(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {
/******/ 				modules[moduleId] = moreModules[moduleId];
/******/ 			}
/******/ 		}
/******/ 		if(parentJsonpFunction) parentJsonpFunction(data);
/******/
/******/ 		while(resolves.length) {
/******/ 			resolves.shift()();
/******/ 		}
/******/
/******/ 		// add entry modules from loaded chunk to deferred list
/******/ 		deferredModules.push.apply(deferredModules, executeModules || []);
/******/
/******/ 		// run deferred modules when all chunks ready
/******/ 		return checkDeferredModules();
/******/ 	};
/******/ 	function checkDeferredModules() {
/******/ 		var result;
/******/ 		for(var i = 0; i < deferredModules.length; i++) {
/******/ 			var deferredModule = deferredModules[i];
/******/ 			var fulfilled = true;
/******/ 			for(var j = 1; j < deferredModule.length; j++) {
/******/ 				var depId = deferredModule[j];
/******/ 				if(installedChunks[depId] !== 0) fulfilled = false;
/******/ 			}
/******/ 			if(fulfilled) {
/******/ 				deferredModules.splice(i--, 1);
/******/ 				result = __webpack_require__(__webpack_require__.s = deferredModule[0]);
/******/ 			}
/******/ 		}
/******/ 		return result;
/******/ 	}
/******/
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// object to store loaded and loading chunks
/******/ 	// undefined = chunk not loaded, null = chunk preloaded/prefetched
/******/ 	// Promise = chunk loading, 0 = chunk loaded
/******/ 	var installedChunks = {
/******/ 		"app": 0
/******/ 	};
/******/
/******/ 	var deferredModules = [];
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	var jsonpArray = window["webpackJsonp"] = window["webpackJsonp"] || [];
/******/ 	var oldJsonpFunction = jsonpArray.push.bind(jsonpArray);
/******/ 	jsonpArray.push = webpackJsonpCallback;
/******/ 	jsonpArray = jsonpArray.slice();
/******/ 	for(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);
/******/ 	var parentJsonpFunction = oldJsonpFunction;
/******/
/******/
/******/ 	// add entry module to deferred list
/******/ 	deferredModules.push(["./src/app.js","vendors"]);
/******/ 	// run deferred modules when ready
/******/ 	return checkDeferredModules();
/******/ })
/************************************************************************/
/******/ ({

/***/ "./src/AlertMessage.js":
/*!*****************************!*\
  !*** ./src/AlertMessage.js ***!
  \*****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _pixi = __webpack_require__(/*! pixi.js */ \"./node_modules/pixi.js/lib/index.js\");\n\nvar PIXI = _interopRequireWildcard(_pixi);\n\nvar _tween = __webpack_require__(/*! @tweenjs/tween.js */ \"./node_modules/@tweenjs/tween.js/src/Tween.js\");\n\nvar TWEEN = _interopRequireWildcard(_tween);\n\nvar _Configuration = __webpack_require__(/*! ./Configuration */ \"./src/Configuration.js\");\n\nvar _Configuration2 = _interopRequireDefault(_Configuration);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar AlertMessage = function (_PIXI$Container) {\n  _inherits(AlertMessage, _PIXI$Container);\n\n  function AlertMessage() {\n    _classCallCheck(this, AlertMessage);\n\n    // Pannel graphics\n    var _this = _possibleConstructorReturn(this, (AlertMessage.__proto__ || Object.getPrototypeOf(AlertMessage)).call(this));\n\n    _this._pannel = null;\n\n    // Alert message\n    _this._alertMessage = null;\n\n    // Show/hide tweens\n    _this._hideTween = null;\n\n    _this._initializePannel();\n    _this._initializeAlertMessage();\n\n    _this.visible = false;\n    _this.x = _Configuration2.default.baseResolution.width / 2;\n    _this.y = _Configuration2.default.baseResolution.height / 2;\n    return _this;\n  }\n\n  _createClass(AlertMessage, [{\n    key: \"show\",\n    value: function show(text, time) {\n      var _this2 = this;\n\n      if (this._hideTween != null) {\n        this._hideTween.stop();\n      }\n\n      this.visible = true;\n      this.alpha = 1;\n\n      this._hideTween = new TWEEN.Tween(this).to({\n        alpha: 0\n      }, time).easing(TWEEN.Easing.Exponential.In).onComplete(function () {\n        _this2.visible = false;\n      }).start();\n\n      this._alertMessage.text = text;\n    }\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      this._hideTween.stop();\n      this.visible = false;\n    }\n  }, {\n    key: \"_initializePannel\",\n    value: function _initializePannel() {\n      this._pannel = new PIXI.Graphics();\n\n      this._pannel.beginFill(0x000000, 0.4);\n      this._pannel.drawRect(0, 0, _Configuration2.default.baseResolution.width, 120);\n      this._pannel.endFill();\n      this._pannel.x = -_Configuration2.default.baseResolution.width / 2;\n      this._pannel.y = -120 / 2;\n\n      this.addChild(this._pannel);\n    }\n  }, {\n    key: \"_initializeAlertMessage\",\n    value: function _initializeAlertMessage() {\n      this._alertMessage = new PIXI.Text(\"Default text\", {\n        fontFamily: \"Arial\",\n        fontWeight: \"bold\",\n        fontSize: 48,\n        fill: 0xeeeeee,\n        align: \"center\"\n      });\n\n      this._alertMessage.anchor.set(0.5, 0.5);\n\n      this.addChild(this._alertMessage);\n    }\n  }]);\n\n  return AlertMessage;\n}(PIXI.Container);\n\nexports.default = AlertMessage;\n\n//# sourceURL=webpack:///./src/AlertMessage.js?");

/***/ }),

/***/ "./src/Asset.js":
/*!**********************!*\
  !*** ./src/Asset.js ***!
  \**********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar Asset = {\n  graphics: [],\n  sounds: []\n};\nexports.default = Asset;\n\n//# sourceURL=webpack:///./src/Asset.js?");

/***/ }),

/***/ "./src/Button.js":
/*!***********************!*\
  !*** ./src/Button.js ***!
  \***********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _pixi = __webpack_require__(/*! pixi.js */ \"./node_modules/pixi.js/lib/index.js\");\n\nvar PIXI = _interopRequireWildcard(_pixi);\n\nvar _tween = __webpack_require__(/*! @tweenjs/tween.js */ \"./node_modules/@tweenjs/tween.js/src/Tween.js\");\n\nvar TWEEN = _interopRequireWildcard(_tween);\n\nvar _Asset = __webpack_require__(/*! ./Asset.js */ \"./src/Asset.js\");\n\nvar _Asset2 = _interopRequireDefault(_Asset);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Button = function (_PIXI$Sprite) {\n  _inherits(Button, _PIXI$Sprite);\n\n  function Button(texture) {\n    _classCallCheck(this, Button);\n\n    var _this = _possibleConstructorReturn(this, (Button.__proto__ || Object.getPrototypeOf(Button)).call(this, texture));\n\n    _this._initialize();\n    _this._callback = null;\n    _this._sound = _Asset2.default.sounds[\"clickSound\"];\n    _this._disabled = false;\n    _this.anchor.set(0.5, 0.5);\n    return _this;\n  }\n\n  _createClass(Button, [{\n    key: \"_initialize\",\n    value: function _initialize() {\n      var _this2 = this;\n\n      this.interactive = true;\n\n      this.on(\"pointertap\", function (e) {\n        _this2._sound.play();\n        if (!_this2._disabled) _this2._onButtonClick(e);\n      });\n\n      this.on(\"pointerdown\", function (e) {\n        if (!_this2._disabled) _this2._onButtonDown(e);\n      });\n      this.on(\"pointerup\", function (e) {\n        if (!_this2._disabled) _this2._onButtonUp(e);\n      });\n      this.on(\"pointerupoutside\", function (e) {\n        if (!_this2._disabled) _this2._onButtonUp(e);\n      });\n      this.on(\"pointerover\", function (e) {\n        if (!_this2._disabled) _this2._onButtonOver(e);\n      });\n      this.on(\"pointerout\", function (e) {\n        if (!_this2._disabled) _this2._onButtonOut(e);\n      });\n    }\n  }, {\n    key: \"_onButtonClick\",\n    value: function _onButtonClick() {\n      if (this._callback != null) {\n        this._callback();\n      }\n    }\n  }, {\n    key: \"_onButtonDown\",\n    value: function _onButtonDown() {\n      var tween = new TWEEN.Tween(this.scale).to({\n        x: 0.8,\n        y: 0.8\n      }, 200).easing(TWEEN.Easing.Quadratic.Out).start();\n    }\n  }, {\n    key: \"_onButtonUp\",\n    value: function _onButtonUp() {\n      var tween = new TWEEN.Tween(this.scale).to({\n        x: 1,\n        y: 1\n      }, 200).easing(TWEEN.Easing.Quadratic.Out).start();\n    }\n  }, {\n    key: \"_onButtonOver\",\n    value: function _onButtonOver() {\n      var tween = new TWEEN.Tween(this.scale).to({\n        x: 1.1,\n        y: 1.1\n      }, 200).easing(TWEEN.Easing.Quadratic.Out).start();\n    }\n  }, {\n    key: \"_onButtonOut\",\n    value: function _onButtonOut() {\n      var tween = new TWEEN.Tween(this.scale).to({\n        x: 1,\n        y: 1\n      }, 200).easing(TWEEN.Easing.Quadratic.Out).start();\n    }\n  }, {\n    key: \"clicked\",\n    value: function clicked(callback) {\n      this._callback = callback;\n    }\n  }, {\n    key: \"disabled\",\n    set: function set(value) {\n      if (value) {\n        this.tint = 0xcccccc;\n        this._sound = _Asset2.default.sounds[\"clickDisabledSound\"];\n        this._sound.volume = 2;\n      } else {\n        this.tint = 0xffffff;\n      }\n      this._disabled = value;\n    },\n    get: function get() {\n      return this._disabled;\n    }\n  }, {\n    key: \"sound\",\n    set: function set(value) {\n      this._sound = value;\n    },\n    get: function get() {\n      return this._sound;\n    }\n  }]);\n\n  return Button;\n}(PIXI.Sprite);\n\nexports.default = Button;\n\n//# sourceURL=webpack:///./src/Button.js?");

/***/ }),

/***/ "./src/Character.js":
/*!**************************!*\
  !*** ./src/Character.js ***!
  \**************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _pixi = __webpack_require__(/*! pixi.js */ \"./node_modules/pixi.js/lib/index.js\");\n\nvar PIXI = _interopRequireWildcard(_pixi);\n\nvar _tween = __webpack_require__(/*! @tweenjs/tween.js */ \"./node_modules/@tweenjs/tween.js/src/Tween.js\");\n\nvar TWEEN = _interopRequireWildcard(_tween);\n\nvar _Asset = __webpack_require__(/*! ./Asset.js */ \"./src/Asset.js\");\n\nvar _Asset2 = _interopRequireDefault(_Asset);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * Character class\n */\nvar Character = function (_PIXI$Container) {\n  _inherits(Character, _PIXI$Container);\n\n  function Character(characterData) {\n    _classCallCheck(this, Character);\n\n    /**\n     * Character meta info\n     */\n    var _this = _possibleConstructorReturn(this, (Character.__proto__ || Object.getPrototypeOf(Character)).call(this));\n\n    _this.meta = characterData;\n    _this.isUser = false;\n\n    /**\n     * Character position\n     */\n    _this.coordinate = new PIXI.Point(_this.meta.coordinate.x, _this.meta.coordinate.y); // in tile grid\n    _this.targetPosition = new PIXI.Point(0, 0); // in real-world graphics\n\n    // Whether this character is frontier of party\n    _this._head = false;\n\n    // Current direction\n    _this._direction = -1;\n\n    // Character health\n    _this._health = _this.meta.health;\n    _this._dead = false;\n\n    // Character graphics\n    _this._shadow = null;\n    _this._shadowTexture = null;\n\n    _this._arrowGuide = null;\n    _this._displayArrowGuide = false;\n    _this._arrowGuideTexture = null;\n\n    _this._body = null;\n    _this._bodyFrontTexture = null;\n    _this._bodyBackTexture = null;\n\n    _this._healthBar = null;\n    _this._healthBarGauge = null;\n    _this._healthBarBackground = null;\n    _this._healthBarTween = null;\n    _this._bodyFlashTween = null;\n\n    // Jump tweens\n    _this._jumpStarted = false;\n    _this._jumpUpTween = null;\n    _this._jumpDownTween = null;\n    _this._jumpDuration = 3200 / (3 * _this.speed);\n    _this._jumpUpLimit = -84;\n\n    _this._createArrowGuide();\n    _this._createShadow();\n    _this._createBody();\n    _this._createHealthBar();\n\n    _this.disableArrowGuide = true;\n    return _this;\n  }\n\n  _createClass(Character, [{\n    key: \"hide\",\n    value: function hide() {\n      this._dead = true;\n      this.visible = false;\n    }\n  }, {\n    key: \"show\",\n    value: function show() {\n      this._dead = false;\n      this.visible = true;\n    }\n  }, {\n    key: \"_updateBodyAppearances\",\n    value: function _updateBodyAppearances(isFront, isFilpped) {\n      this._body.texture = isFront ? this._bodyFrontTexture : this._bodyBackTexture;\n      this._body.scale.x = isFilpped ? -1 : 1;\n    }\n  }, {\n    key: \"_updateArrowGuide\",\n    value: function _updateArrowGuide(isXFlipped, isYFlipped) {\n      this._arrowGuide.scale.set(isXFlipped ? -1 : 1, isYFlipped ? -1 : 1);\n    }\n  }, {\n    key: \"_createArrowGuide\",\n    value: function _createArrowGuide() {\n      // Arrow guide is part from tiles texture\n      this._arrowGuideTexture = new PIXI.Texture(_Asset2.default.graphics[\"tile-arrow0\"], new PIXI.Rectangle(_Asset2.default.graphics[\"tile-arrow0\"].frame.x, _Asset2.default.graphics[\"tile-arrow0\"].frame.y + 108.068, 256, 147.037));\n      this._arrowGuide = new PIXI.Sprite(this._arrowGuideTexture);\n      this._arrowGuide.anchor.set(0.5, 0.5);\n      this._arrowGuide.tint = 0xff00ff;\n      this._arrowGuide.alpha = 0.2;\n      this._arrowGuide.x = 128;\n      this._arrowGuide.y = 70.7;\n\n      // Add arrow guide to the backward side\n      //this.addChildAt(this._arrowGuide, 0);\n    }\n  }, {\n    key: \"_createBody\",\n    value: function _createBody() {\n      this._bodyFrontTexture = _Asset2.default.graphics[this.meta.bodyTexture.front];\n      this._bodyBackTexture = _Asset2.default.graphics[this.meta.bodyTexture.back];\n\n      this._body = new PIXI.Sprite(this._bodyFrontTexture);\n      this._body.x = 128;\n      this._body.y = -24;\n      this._body.anchor.set(0.5, 0);\n\n      this.addChild(this._body);\n    }\n  }, {\n    key: \"_createShadow\",\n    value: function _createShadow() {\n      this._shadowTexture = _Asset2.default.graphics[\"unit-shadow\"];\n\n      this._shadow = new PIXI.Sprite(this._shadowTexture);\n      this._shadow.anchor.set(0.5, 0.5);\n      this._shadow.alpha = 0.4;\n      this._shadow.x = 128;\n      this._shadow.y = 90;\n\n      this.addChild(this._shadow);\n    }\n  }, {\n    key: \"_createHealthBar\",\n    value: function _createHealthBar() {\n      this._healthBar = new PIXI.Container();\n\n      this._healthBarBackground = new PIXI.Graphics();\n      this._healthBarBackground.beginFill(0xc21807, 0.3);\n      this._healthBarBackground.drawRect(0, 0, 128, 24);\n      this._healthBarBackground.endFill();\n\n      this._healthBarGauge = new PIXI.Graphics();\n      this._healthBarGauge.beginFill(0xc21807);\n      this._healthBarGauge.drawRect(0, 0, 128, 24);\n      this._healthBarGauge.endFill();\n\n      this._healthBar.x = 64;\n      this._healthBar.y = -36;\n      this._healthBar.visible = false;\n\n      this._healthBar.addChild(this._healthBarBackground);\n      this._healthBar.addChild(this._healthBarGauge);\n      this.addChild(this._healthBar);\n    }\n  }, {\n    key: \"_initializeJumpTweens\",\n    value: function _initializeJumpTweens() {\n      var _this2 = this;\n\n      this._jumpUpTween = new TWEEN.Tween(this._body);\n      this._jumpDownTween = new TWEEN.Tween(this._body);\n\n      // These two tweens are chaning each other\n      this._jumpUpTween.to({\n        y: this._jumpUpLimit\n      }, this._jumpDuration).easing(TWEEN.Easing.Quadratic.Out).onStart(function () {\n        if (_this2.isUser && _this2._head) {\n          _Asset2.default.sounds[\"jumpSound\"].play();\n        }\n      }).chain(this._jumpDownTween);\n\n      this._jumpDownTween.to({\n        y: -24\n      }, this._jumpDuration).easing(TWEEN.Easing.Quadratic.In).chain(this._jumpUpTween);\n    }\n  }, {\n    key: \"speed\",\n    get: function get() {\n      return this.meta.speed;\n    }\n  }, {\n    key: \"health\",\n    get: function get() {\n      return this._health;\n    }\n\n    /**\n     * Set health value\n     */\n    ,\n    set: function set(value) {\n      var _this3 = this;\n\n      value = Math.max(Math.min(value, this.meta.maxHealth), 0);\n      if (value != this._health) {\n        this._health = value;\n\n        this._healthBar.visible = true;\n        this._healthBar.alpha = 1;\n\n        this._healthBarGauge.scale.x = this._health / this.meta.maxHealth;\n\n        // Smooth fade\n        if (this._healthBarTween != null) {\n          this._healthBarTween.stop();\n        }\n        if (this._bodyFlashTween != null) {\n          this._bodyFlashTween.stop();\n        }\n\n        this._healthBarTween = new TWEEN.Tween(this._healthBar).to({\n          alpha: 0\n        }, 3200).easing(TWEEN.Easing.Exponential.In).onComplete(function () {\n          _this3._healthBar.visible = false;\n        }).start();\n\n        this._body.alpha = 0.1;\n        this._bodyFlashTween = new TWEEN.Tween(this._body).to({\n          alpha: 1\n        }, 1600).easing(TWEEN.Easing.Bounce.Out).start();\n      }\n    }\n  }, {\n    key: \"dead\",\n    get: function get() {\n      return this._dead;\n    },\n    set: function set(value) {\n      this._dead = value;\n      this.visible = !value;\n    }\n  }, {\n    key: \"jump\",\n    get: function get() {\n      return this._jumpStarted;\n    }\n\n    /**\n     * Start or stop jumping\n     */\n    ,\n    set: function set(value) {\n      if (this._jumpStarted == value) {\n        return;\n      }\n      if (value) {\n        if (this._jumpUpTween == null) {\n          this._initializeJumpTweens();\n        }\n        this._jumpUpTween.start();\n      } else {\n        this._jumpUpTween.stop();\n        this._jumpDownTween.stop();\n      }\n      this._jumpStarted = value;\n    }\n  }, {\n    key: \"head\",\n    get: function get() {\n      return this._head;\n    }\n\n    /**\n     * Set whether is character is head or not\n     */\n    ,\n    set: function set(value) {\n      if (this._head == value) {\n        return;\n      }\n      this._head = value;\n    }\n  }, {\n    key: \"direction\",\n    get: function get() {\n      return this._direction;\n    }\n\n    /**\n     * Set new direction for this character\n     */\n    ,\n    set: function set(value) {\n      if (this._direction == value || value > 3) {\n        return;\n      }\n      this._direction = value;\n      switch (value) {\n        case 0:\n          this._updateBodyAppearances(true, false);\n          this._updateArrowGuide(true, false);\n          break;\n        case 1:\n          this._updateBodyAppearances(false, false);\n          this._updateArrowGuide(true, true);\n          break;\n        case 2:\n          this._updateBodyAppearances(false, true);\n          this._updateArrowGuide(false, true);\n          break;\n        case 3:\n          this._updateBodyAppearances(true, true);\n          this._updateArrowGuide(false, false);\n          break;\n      }\n    }\n  }, {\n    key: \"arrowGuideColor\",\n    set: function set(value) {\n      if (this._arrowGuide != null) {\n        this._arrowGuide.tint = value;\n      }\n    }\n  }, {\n    key: \"disableArrowGuide\",\n    set: function set(value) {\n      this._arrowGuide.visible = !value;\n    }\n  }]);\n\n  return Character;\n}(PIXI.Container);\n\nexports.default = Character;\n\n//# sourceURL=webpack:///./src/Character.js?");

/***/ }),

/***/ "./src/CharacterCard.js":
/*!******************************!*\
  !*** ./src/CharacterCard.js ***!
  \******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _pixi = __webpack_require__(/*! pixi.js */ \"./node_modules/pixi.js/lib/index.js\");\n\nvar PIXI = _interopRequireWildcard(_pixi);\n\nvar _Asset = __webpack_require__(/*! ./Asset.js */ \"./src/Asset.js\");\n\nvar _Asset2 = _interopRequireDefault(_Asset);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar CharacterCard = function (_PIXI$Container) {\n  _inherits(CharacterCard, _PIXI$Container);\n\n  function CharacterCard(characterData) {\n    _classCallCheck(this, CharacterCard);\n\n    var _this = _possibleConstructorReturn(this, (CharacterCard.__proto__ || Object.getPrototypeOf(CharacterCard)).call(this));\n\n    _this.meta = characterData;\n\n    _this._disabled = false;\n\n    // Sprites\n    _this._cardboard = null;\n    _this._cardboardLevel = null;\n    _this._characterShadow = null;\n    _this._character = null;\n\n    // Textures\n    _this._cardboardTexture = null;\n    _this._cardboardLevelTexture = null;\n    _this._characterShadowTexture = null;\n    _this._characterTexture = null;\n\n    // Texts\n    _this._nameText = null;\n    _this._descriptionText = null;\n    _this._healthText = null;\n    _this._speedText = null;\n\n    _this._drawCard();\n    return _this;\n  }\n\n  _createClass(CharacterCard, [{\n    key: \"_drawCard\",\n    value: function _drawCard() {\n      // Texture by rarity\n      switch (this.meta.rarity) {\n        case 0:\n          this._cardboardTexture = _Asset2.default.graphics[\"card-common\"];\n          this._cardboardLevelTexture = _Asset2.default.graphics[\"card-common-level\"];\n          break;\n        case 1:\n          this._cardboardTexture = _Asset2.default.graphics[\"card-uncommon\"];\n          this._cardboardLevelTexture = _Asset2.default.graphics[\"card-uncommon-level\"];\n          break;\n        case 2:\n          this._cardboardTexture = _Asset2.default.graphics[\"card-rare\"];\n          this._cardboardLevelTexture = _Asset2.default.graphics[\"card-rare-level\"];\n          break;\n        case 3:\n          this._cardboardTexture = _Asset2.default.graphics[\"card-unique\"];\n          this._cardboardLevelTexture = _Asset2.default.graphics[\"card-unique-level\"];\n          break;\n      }\n      this._characterShadowTexture = _Asset2.default.graphics[\"unit-shadow\"];\n      this._characterTexture = _Asset2.default.graphics[this.meta.bodyTexture.front];\n\n      // Initialize sprites\n\n      this._cardboard = new PIXI.Sprite(this._cardboardTexture);\n      this._cardboardLevel = new PIXI.Sprite(this._cardboardLevelTexture);\n      this._characterShadow = new PIXI.Sprite(this._characterShadowTexture);\n      this._character = new PIXI.Sprite(this._characterTexture);\n\n      this._nameText = new PIXI.Text(this.meta.name, {\n        fontFamily: \"Arial\",\n        fontWeight: \"bold\",\n        fontSize: 48,\n        fill: 0x555555,\n        align: \"center\"\n      });\n\n      this._descriptionText = new PIXI.Text(this.meta.description, {\n        fontFamily: \"Arial\",\n        fontSize: 26,\n        fill: 0x888888,\n        align: \"left\"\n      });\n\n      this._healthText = new PIXI.Text(this.meta.maxHealth, {\n        fontFamily: \"Arial\",\n        fontWeight: \"bold\",\n        fontSize: 45,\n        fill: 0xffffff,\n        align: \"left\"\n      });\n\n      this._speedText = new PIXI.Text(this.meta.speed, {\n        fontFamily: \"Arial\",\n        fontWeight: \"bold\",\n        fontSize: 45,\n        fill: 0xffffff,\n        align: \"left\"\n      });\n\n      // Anchor this._character image center bottom\n      this._cardboard.anchor.set(0.5, 0.5);\n      this._characterShadow.anchor.set(0.5, 1);\n      this._character.anchor.set(0.5, 1);\n      this._nameText.anchor.set(0.5, 0);\n\n      this._character.scale.set(2, 2);\n\n      this._characterShadow.scale.set(1.8, 1.8);\n      this._characterShadow.x = 0;\n      this._characterShadow.y = -45;\n\n      this._cardboardLevel.x = -240;\n      this._cardboardLevel.y = -240;\n\n      this._character.x = 0;\n      this._character.y = -39;\n\n      this._nameText.x = 0;\n      this._nameText.y = -39;\n\n      this._descriptionText.x = -170;\n      this._descriptionText.y = 51;\n\n      this._healthText.x = -110;\n      this._healthText.y = 129;\n\n      this._speedText.x = 82;\n      this._speedText.y = 129;\n\n      this.addChild(this._cardboard);\n      this.addChild(this._cardboardLevel);\n      this.addChild(this._characterShadow);\n      this.addChild(this._character);\n      this.addChild(this._nameText);\n      this.addChild(this._descriptionText);\n      this.addChild(this._healthText);\n      this.addChild(this._speedText);\n\n      this.interactive = true;\n    }\n  }, {\n    key: \"disabled\",\n    get: function get() {\n      return this._disabled;\n    },\n    set: function set(value) {\n      this._disabled = value;\n\n      if (this._disabled) {\n        this._cardboard.tint = 0xcccccc;\n        this._cardboardLevel.tint = 0xcccccc;\n        this._character.tint = 0xcccccc;\n        this._healthText.tint = 0xcccccc;\n        this._speedText.tint = 0xcccccc;\n      } else {\n        this._cardboard.tint = 0xffffff;\n        this._cardboardLevel.tint = 0xffffff;\n        this._character.tint = 0xffffff;\n        this._healthText.tint = 0xffffff;\n        this._speedText.tint = 0xffffff;\n      }\n    }\n  }]);\n\n  return CharacterCard;\n}(PIXI.Container);\n\nexports.default = CharacterCard;\n\n//# sourceURL=webpack:///./src/CharacterCard.js?");

/***/ }),

/***/ "./src/CharacterCardCollection.js":
/*!****************************************!*\
  !*** ./src/CharacterCardCollection.js ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _pixi = __webpack_require__(/*! pixi.js */ \"./node_modules/pixi.js/lib/index.js\");\n\nvar PIXI = _interopRequireWildcard(_pixi);\n\nvar _tween3 = __webpack_require__(/*! @tweenjs/tween.js */ \"./node_modules/@tweenjs/tween.js/src/Tween.js\");\n\nvar TWEEN = _interopRequireWildcard(_tween3);\n\nvar _Configuration = __webpack_require__(/*! ./Configuration */ \"./src/Configuration.js\");\n\nvar _Configuration2 = _interopRequireDefault(_Configuration);\n\nvar _CharacterCard = __webpack_require__(/*! ./CharacterCard */ \"./src/CharacterCard.js\");\n\nvar _CharacterCard2 = _interopRequireDefault(_CharacterCard);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar CharacterCardCollection = function (_PIXI$Container) {\n  _inherits(CharacterCardCollection, _PIXI$Container);\n\n  function CharacterCardCollection() {\n    _classCallCheck(this, CharacterCardCollection);\n\n    var _this = _possibleConstructorReturn(this, (CharacterCardCollection.__proto__ || Object.getPrototypeOf(CharacterCardCollection)).call(this));\n\n    _this.CARD_WIDTH = 400;\n    _this.CARD_HEIGHT = 600;\n    _this.CARD_GAP = 130;\n    _this.SHRINK = 0.6;\n\n    _this.initialize();\n    return _this;\n  }\n\n  _createClass(CharacterCardCollection, [{\n    key: \"initialize\",\n    value: function initialize() {\n      var _this2 = this;\n\n      // Card meter\n      this.visible = false;\n\n      this.cardMeterContainer = new PIXI.Container();\n      this.cardMeters = [];\n      for (var i = 0; i < 4; i++) {\n        var cardMeter = new PIXI.Graphics();\n        cardMeter.beginFill(0xfffffff);\n        cardMeter.drawCircle(0, 0, 15);\n        cardMeter.endFill();\n\n        cardMeter.alpha = 0.6;\n        cardMeter.x = i * 60;\n\n        this.cardMeters.push(cardMeter);\n        this.cardMeterContainer.addChild(cardMeter);\n      }\n\n      this.cardMeterContainer.y = 300;\n      this.cardMeterContainer.x = (_Configuration2.default.baseResolution.width - 60 * 3 + 15) / 2;\n      this.addChild(this.cardMeterContainer);\n\n      // Card container\n\n      this.cardContainer = new PIXI.Container();\n      this.cardContainer.interactive = true;\n\n      this.cardContainer.on(\"pointerdown\", function (e) {\n        _this2.onCardDragStart(e);\n      });\n      this.cardContainer.on(\"pointerup\", function (e) {\n        _this2.onCardDragFinish(e);\n      });\n      this.cardContainer.on(\"pointerupoutside\", function (e) {\n        _this2.onCardDragFinish(e);\n      });\n      this.cardContainer.on(\"pointermove\", function (e) {\n        _this2.onCardDrag(e);\n      });\n\n      this.addChild(this.cardContainer);\n\n      this.interactive = true;\n    }\n  }, {\n    key: \"show\",\n    value: function show() {\n      var _this3 = this;\n\n      var upward = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n      if (!this.visible) {\n        this.visible = true;\n        this.cardContainer.y = upward ? 1000 : -1000;\n        var tween = new TWEEN.Tween(this.cardContainer).to({\n          y: 0\n        }, 500).easing(TWEEN.Easing.Quadratic.Out).onComplete(function () {\n          _this3.hidden = false;\n        }).start();\n\n        this.cardMeterContainer.x = 2000;\n        var tween2 = new TWEEN.Tween(this.cardMeterContainer).to({\n          x: (_Configuration2.default.baseResolution.width - 60 * 3 + 15) / 2\n        }, 500).easing(TWEEN.Easing.Quadratic.Out).start();\n        return true;\n      }\n      return false;\n    }\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      var _this4 = this;\n\n      var upward = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n      if (!this.hidden) {\n        this.hidden = true;\n        var tween = new TWEEN.Tween(this.cardContainer).to({\n          y: upward ? -1000 : 1000\n        }, 500).easing(TWEEN.Easing.Quadratic.Out).onComplete(function () {\n          _this4.visible = false;\n        }).start();\n\n        var tween2 = new TWEEN.Tween(this.cardMeterContainer).to({\n          x: -2000\n        }, 500).easing(TWEEN.Easing.Quadratic.Out).start();\n        return true;\n      }\n      return false;\n    }\n  }, {\n    key: \"setCardsInUse\",\n    value: function setCardsInUse(characterDataList) {\n      var checked = [];\n      for (var i = 0; i < this.cards.length; i++) {\n        this.cards[i].disabled = false;\n        for (var j = 0; j < characterDataList.length; j++) {\n          if (checked.indexOf(j) >= 0) continue;\n          if (characterDataList[j].equals(this.cards[i].meta)) {\n            this.cards[i].disabled = true;\n            checked.push(j);\n            break;\n          }\n        }\n      }\n    }\n  }, {\n    key: \"onCardSelect\",\n    value: function onCardSelect(callback) {\n      this.onCardSelectCallback = callback;\n    }\n  }, {\n    key: \"setCharacterCards\",\n    value: function setCharacterCards(characterDataList) {\n      var _this5 = this;\n\n      this.cards = [];\n\n      for (var i = 0; i < characterDataList.length; i++) {\n        var card = new _CharacterCard2.default(characterDataList[i]);\n        card.scale.set(this.SHRINK, this.SHRINK);\n        card.x = this.CARD_WIDTH * this.SHRINK * i;\n        card.y = 0;\n\n        card.on(\"click\", function (e) {\n          _this5.onCardClick(e);\n        });\n\n        card.on(\"touchend\", function (e) {\n          _this5.onCardClick(e);\n        });\n        this.cards.push(card);\n        this.cardContainer.addChild(card);\n      }\n      this.cardContainer.hitArea = new PIXI.Rectangle(-this.CARD_WIDTH, -this.CARD_HEIGHT / 2, this.CARD_WIDTH * this.SHRINK * (this.cards.length + 1) + this.CARD_WIDTH * 2, this.CARD_HEIGHT);\n\n      this.zoomCard(0);\n    }\n  }, {\n    key: \"getCharacterCards\",\n    value: function getCharacterCards() {\n      return this.cards;\n    }\n  }, {\n    key: \"onCardClick\",\n    value: function onCardClick(event) {\n      if (!this.dragged) {\n        for (var i = 0; i < this.cards.length; i++) {\n          if (this.cards[i] == event.target) {\n            if (i == this.zoomedCardIndex) {\n              if (this.onCardSelectCallback != null && !this.cards[i].disabled) {\n                this.onCardSelectCallback(this.cards[i].meta);\n              }\n            } else {\n              this.zoomCard(i);\n            }\n            break;\n          }\n        }\n      }\n    }\n  }, {\n    key: \"onCardDragStart\",\n    value: function onCardDragStart(event) {\n      this.dragStarted = true;\n      this.dragged = false;\n      this.lastCardContainerPositionX = this.cardContainer.x;\n      this.lastPointerPosition = event.data.global;\n      if (this.centerTween != null) {\n        this.centerTween.stop();\n      }\n    }\n  }, {\n    key: \"onCardDragFinish\",\n    value: function onCardDragFinish(event) {\n      if (this.dragStarted) {\n        if (this.zoomedCardIndex != null) {\n          this.centerCard(this.zoomedCardIndex);\n        }\n      }\n      this.dragStarted = false;\n    }\n  }, {\n    key: \"onCardDrag\",\n    value: function onCardDrag(event) {\n      if (this.dragStarted) {\n        this.cardContainer.x += (event.data.global.x - this.lastPointerPosition.x) / _Configuration2.default.resolutionFactor;\n\n        if (Math.abs(this.lastCardContainerPositionX - this.cardContainer.x) > 5) {\n          this.dragged = true;\n        }\n\n        this.lastPointerPosition.x = event.data.global.x;\n\n        // Find card at the center\n        var d = _Configuration2.default.baseResolution.width / 2 - this.cardContainer.x;\n\n        for (var i = 0; i < this.cards.length; i++) {\n          var bonus = 0;\n          if (this.zoomedCardIndex != null) {\n            if (i >= this.zoomedCardIndex) {\n              bonus = 80;\n            }\n          }\n          if (d < 530 * 0.6 * i + 200 * 0.6 + 130 * 0.6 - bonus) {\n            if (i != this.zoomedCardIndex) {\n              this.zoomCard(i);\n            }\n            break;\n          }\n        }\n      }\n    }\n  }, {\n    key: \"zoomCard\",\n    value: function zoomCard(cardIndex) {\n      if (cardIndex != this.zoomedCardIndex) {\n        if (this.zoomedCardIndex != null) {\n          var _tween = new TWEEN.Tween(this.cards[this.zoomedCardIndex].scale).to({\n            x: 1 * 0.6,\n            y: 1 * 0.6\n          }, 200).easing(TWEEN.Easing.Quadratic.Out).start();\n        }\n\n        this.zoomedCardIndex = cardIndex;\n\n        var tween = new TWEEN.Tween(this.cards[cardIndex].scale).to({\n          x: 1,\n          y: 1\n        }, 200).easing(TWEEN.Easing.Quadratic.Out).start();\n\n        // Adjust position of cards\n        for (var i = 0; i < this.cards.length; i++) {\n          // Move to left\n          var targetX = 0;\n          if (i < cardIndex) {\n            targetX = 530 * i * 0.6 - 130 * 0.6;\n          }\n          // Move to right\n          else if (i > cardIndex) {\n              targetX = 530 * i * 0.6 + 130 * 0.6;\n            } else {\n              targetX = 530 * i * 0.6;\n            }\n\n          if (Math.abs(cardIndex - i) < 3) {\n            var _tween2 = new TWEEN.Tween(this.cards[i]).to({\n              x: targetX\n            }, 300).easing(TWEEN.Easing.Quadratic.Out).start();\n          } else {\n            this.cards[i].x = targetX;\n          }\n        }\n\n        // Update card meter\n        var cardMeterIndex = Math.floor((cardIndex + 1) / this.cards.length * 3);\n\n        if (this.lastCardMeterIndex != cardMeterIndex) {\n          if (this.lastCardMeterIndex != null) {\n            this.cardMeterTween = new TWEEN.Tween(this.cardMeters[this.lastCardMeterIndex].scale).to({\n              x: 1,\n              y: 1\n            }, 600).easing(TWEEN.Easing.Back.Out).start();\n          }\n\n          this.cardMeterTween = new TWEEN.Tween(this.cardMeters[cardMeterIndex].scale).to({\n            x: 1.5,\n            y: 1.5\n          }, 600).easing(TWEEN.Easing.Back.Out).start();\n\n          this.lastCardMeterIndex = cardMeterIndex;\n        }\n\n        // Move container to center\n        if (!this.dragStarted) {\n          this.centerCard(cardIndex);\n        }\n      }\n    }\n  }, {\n    key: \"centerCard\",\n    value: function centerCard(cardIndex) {\n      var targetContainerX = _Configuration2.default.baseResolution.width / 2 - 530 * 0.6 * cardIndex;\n      this.centerTween = new TWEEN.Tween(this.cardContainer).to({\n        x: targetContainerX\n      }, 600).easing(TWEEN.Easing.Back.Out).start();\n    }\n  }]);\n\n  return CharacterCardCollection;\n}(PIXI.Container);\n\nexports.default = CharacterCardCollection;\n\n//# sourceURL=webpack:///./src/CharacterCardCollection.js?");

/***/ }),

/***/ "./src/CharacterCardDeck.js":
/*!**********************************!*\
  !*** ./src/CharacterCardDeck.js ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _pixi = __webpack_require__(/*! pixi.js */ \"./node_modules/pixi.js/lib/index.js\");\n\nvar PIXI = _interopRequireWildcard(_pixi);\n\nvar _tween = __webpack_require__(/*! @tweenjs/tween.js */ \"./node_modules/@tweenjs/tween.js/src/Tween.js\");\n\nvar TWEEN = _interopRequireWildcard(_tween);\n\nvar _Asset = __webpack_require__(/*! ./Asset.js */ \"./src/Asset.js\");\n\nvar _Asset2 = _interopRequireDefault(_Asset);\n\nvar _Configuration = __webpack_require__(/*! ./Configuration.js */ \"./src/Configuration.js\");\n\nvar _Configuration2 = _interopRequireDefault(_Configuration);\n\nvar _CharacterCard = __webpack_require__(/*! ./CharacterCard.js */ \"./src/CharacterCard.js\");\n\nvar _CharacterCard2 = _interopRequireDefault(_CharacterCard);\n\nvar _CharacterDatabase = __webpack_require__(/*! ./CharacterDatabase.js */ \"./src/CharacterDatabase.js\");\n\nvar _CharacterDatabase2 = _interopRequireDefault(_CharacterDatabase);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar CharacterCardDeck = function (_PIXI$Container) {\n  _inherits(CharacterCardDeck, _PIXI$Container);\n\n  function CharacterCardDeck() {\n    _classCallCheck(this, CharacterCardDeck);\n\n    // Character metadata and _characterCards\n    var _this = _possibleConstructorReturn(this, (CharacterCardDeck.__proto__ || Object.getPrototypeOf(CharacterCardDeck)).call(this));\n\n    _this._characterCards = null;\n    _this._characterCardsCapture = null;\n\n    // Card container\n    _this._cardContainer = null;\n    _this._cardContainerTween = null;\n\n    // Card zoomer\n    _this._lastZoomedCard = null;\n    _this._lastDownPoint = null;\n    _this._cardZoomTween = null;\n\n    // Event listeners\n    _this._onCardOrderChangedHandler = [];\n\n    _this._initializeCharacterCards();\n    _this._createCardContainer();\n    return _this;\n  }\n\n  _createClass(CharacterCardDeck, [{\n    key: \"show\",\n    value: function show() {\n      var _this2 = this;\n\n      var upward = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n      if (!this.visible) {\n        this.visible = true;\n        this._cardContainer.y = upward ? 1000 : -1000;\n        if (this._cardContainerTween != null) {\n          this._cardContainerTween.stop();\n        }\n        this._cardContainerTween = new TWEEN.Tween(this._cardContainer).to({\n          y: 0\n        }, 500).easing(TWEEN.Easing.Quadratic.Out).onComplete(function () {\n          _this2.hidden = false;\n        }).start();\n        return true;\n      }\n      return false;\n    }\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      var _this3 = this;\n\n      var upward = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n      if (!this.hidden) {\n        this.hidden = true;\n        if (this._cardContainerTween != null) {\n          this._cardContainerTween.stop();\n        }\n        this._cardContainerTween = new TWEEN.Tween(this._cardContainer).to({\n          y: upward ? -1000 : 1000\n        }, 500).easing(TWEEN.Easing.Quadratic.Out).onComplete(function () {\n          _this3.visible = false;\n        }).start();\n        return true;\n      }\n      return false;\n    }\n  }, {\n    key: \"onCardOrderChanged\",\n    value: function onCardOrderChanged(handler) {\n      this._onCardOrderChangedHandler.push(handler);\n    }\n  }, {\n    key: \"setParty\",\n    value: function setParty(characterDataList) {\n\n      // Party must be three\n      if (characterDataList.length != 3) {\n        return;\n      }\n\n      // If already exists, clear them\n      if (this._cardContainer.children > 0) {\n        while (this._cardContainer.children[0]) {\n          // Clear and remove\n          this._cardContainer.children[0].removeAllListeners();\n          this._cardContainer.removeChild(this._cardContainer.children[0]);\n        }\n      }\n\n      for (var i = 0; i < characterDataList.length; i++) {\n        var card = new _CharacterCard2.default(characterDataList[i]);\n        card.x = 530 * i;\n        card.y = 0;\n        this._registerEventListeners(card);\n        this._characterCards[i] = card;\n        this._cardContainer.addChild(card);\n      }\n    }\n  }, {\n    key: \"setPartyMemberAt\",\n    value: function setPartyMemberAt(characterData, index) {\n\n      if (index > 2 || index < 0) {\n        return;\n      }\n\n      // Clear member\n      var removedMember = this._characterCards[index];\n      removedMember.removeAllListeners();\n      this._cardContainer.removeChild(removedMember);\n\n      var card = new _CharacterCard2.default(characterData);\n      this._characterCards[index] = card;\n\n      card.x = 530 * index;\n      card.y = 0;\n\n      this._registerEventListeners(card);\n      this._cardContainer.addChild(card);\n    }\n  }, {\n    key: \"_initializeCharacterCards\",\n    value: function _initializeCharacterCards() {\n      this._characterCards = [];\n    }\n  }, {\n    key: \"_createCardContainer\",\n    value: function _createCardContainer() {\n      this._cardContainer = new PIXI.Container();\n      this.addChild(this._cardContainer);\n      this.interactive = true;\n    }\n  }, {\n    key: \"_registerEventListeners\",\n    value: function _registerEventListeners(card) {\n      var _this4 = this;\n\n      card.on(\"pointerdown\", function (e) {\n        _this4._onCardDown(e);\n      });\n      card.on(\"pointerup\", function (e) {\n        _this4._onCardUp(e);\n      });\n      card.on(\"pointerupoutside\", function (e) {\n        _this4._onCardUp(e);\n      });\n      card.on(\"pointerover\", function (e) {\n        _this4._onCardOver(e);\n      });\n      card.on(\"pointerout\", function (e) {\n        _this4._onCardOut(e);\n      });\n      card.on(\"pointermove\", function (e) {\n        _this4._onCardMove(e);\n      });\n      card.on(\"pointertap\", function (e) {\n        _this4._onCardClick(e);\n      });\n    }\n  }, {\n    key: \"getCharacterCards\",\n    value: function getCharacterCards() {\n      return this._characterCards;\n    }\n  }, {\n    key: \"_onCardClick\",\n    value: function _onCardClick(event) {\n      _Asset2.default.sounds[\"cardClickSound\"].play();\n      var changed = false;\n      if (this._characterCardsCapture != null) {\n        for (var i = 0; i < this._characterCards.length; i++) {\n          if (!this._characterCards[i].meta.equals(this._characterCardsCapture[i].meta)) {\n            changed = true;\n            break;\n          }\n        }\n      }\n      if (changed) {\n        for (var _i = 0; _i < this._onCardOrderChangedHandler.length; _i++) {\n          this._onCardOrderChangedHandler[_i]();\n        }\n      }\n    }\n  }, {\n    key: \"_onCardDown\",\n    value: function _onCardDown(event) {\n      _Asset2.default.sounds[\"cardClickSound\"].play();\n      this._lastZoomedCard = event.target;\n      this._lastDownPoint = event.data.global;\n      this._characterCardsCapture = this._characterCards.slice(0);\n      if (this._cardZoomTween != null) {\n        this._cardZoomTween.stop();\n      }\n      this._cardZoomTween = new TWEEN.Tween(event.target.scale).to({\n        x: 1.24,\n        y: 1.24\n      }, 200).to({\n        x: 1.24,\n        y: 1.24\n      }, 200).easing(TWEEN.Easing.Quadratic.Out).start();\n\n      this._bringToFront(event.target);\n    }\n  }, {\n    key: \"_bringToFront\",\n    value: function _bringToFront(card) {\n      if (this._cardContainer.children) {\n        for (var keyIndex in this._cardContainer.children) {\n          if (this._cardContainer.children[keyIndex] === card) {\n            this._cardContainer.children.splice(keyIndex, 1);\n            break;\n          }\n        }\n        this._cardContainer.children.push(card);\n      }\n    }\n  }, {\n    key: \"_onCardUp\",\n    value: function _onCardUp(event) {\n      if (this._lastZoomedCard != null) {\n        if (this._cardZoomTween != null) {\n          this._cardZoomTween.stop();\n        }\n        this._cardZoomTween = new TWEEN.Tween(this._lastZoomedCard.scale).to({\n          x: 1,\n          y: 1\n        }, 600).easing(TWEEN.Easing.Elastic.Out).start();\n\n        var tween2 = new TWEEN.Tween(this._lastZoomedCard).to({\n          x: 530 * this._characterCards.indexOf(this._lastZoomedCard)\n        }, 300).easing(TWEEN.Easing.Quadratic.Out).start();\n      }\n      this._lastZoomedCard = null;\n    }\n  }, {\n    key: \"_onCardOver\",\n    value: function _onCardOver(event) {\n      this.lastOver = event.target;\n      if (this._cardZoomTween != null) {\n        this._cardZoomTween.stop();\n      }\n      this._cardZoomTween = new TWEEN.Tween(event.target.scale).to({\n        x: 1.1,\n        y: 1.1\n      }, 200).easing(TWEEN.Easing.Quadratic.Out).start();\n    }\n  }, {\n    key: \"_onCardOut\",\n    value: function _onCardOut(event) {\n      if (this.lastOver != null) {\n        if (this._cardZoomTween != null) {\n          this._cardZoomTween.stop();\n        }\n        this._cardZoomTween = new TWEEN.Tween(this.lastOver.scale).to({\n          x: 1,\n          y: 1\n        }, 200).easing(TWEEN.Easing.Quadratic.Out).start();\n        this.lastOver = null;\n      }\n    }\n  }, {\n    key: \"_onCardMove\",\n    value: function _onCardMove(event) {\n      if (this._lastZoomedCard != null) {\n        this._lastZoomedCard.x += (event.data.global.x - this._lastDownPoint.x) / _Configuration2.default.resolutionFactor;\n\n        this._lastDownPoint.x = event.data.global.x;\n\n        // Check card position range\n        for (var i = 0; i < this._characterCards.length; i++) {\n          var card = this._characterCards[i];\n          if (this._lastZoomedCard.x < (i + 1) * 530 - 65) {\n            if (this._lastZoomedCard == card) {\n              break;\n            }\n            // Swap with next card\n            if (i > 0 && this._characterCards[i - 1] == this._lastZoomedCard) {\n              this._characterCards[i - 1] = this._characterCards[i];\n              this._characterCards[i] = this._lastZoomedCard;\n            }\n            // Swap with previous card\n            else {\n                this._characterCards[i + 1] = this._characterCards[i];\n                this._characterCards[i] = this._lastZoomedCard;\n              }\n            this._switchCardOrder();\n            break;\n          }\n        }\n      }\n    }\n  }, {\n    key: \"_switchCardOrder\",\n    value: function _switchCardOrder() {\n      for (var i = 0; i < this._characterCards.length; i++) {\n        if (this._characterCards[i] == this._lastZoomedCard) {\n          continue;\n        }\n        var tween = new TWEEN.Tween(this._characterCards[i]).to({\n          x: 530 * i\n        }, 300).easing(TWEEN.Easing.Quadratic.Out).start();\n      }\n    }\n  }, {\n    key: \"partyData\",\n    get: function get() {\n\n      var characterDataList = [];\n      for (var i = 0; i < this._characterCards.length; i++) {\n        characterDataList.push(this._characterCards[i].meta);\n      }\n      return characterDataList;\n    }\n  }, {\n    key: \"partyDataInIndex\",\n    get: function get() {\n      var indexList = [];\n      for (var i = 0; i < this._characterCards.length; i++) {\n        indexList[i] = this._characterCards[i].meta.index;\n      }\n      return indexList;\n    }\n  }]);\n\n  return CharacterCardDeck;\n}(PIXI.Container);\n\nexports.default = CharacterCardDeck;\n\n//# sourceURL=webpack:///./src/CharacterCardDeck.js?");

/***/ }),

/***/ "./src/CharacterCardInspector.js":
/*!***************************************!*\
  !*** ./src/CharacterCardInspector.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _pixi = __webpack_require__(/*! pixi.js */ \"./node_modules/pixi.js/lib/index.js\");\n\nvar PIXI = _interopRequireWildcard(_pixi);\n\nvar _tween = __webpack_require__(/*! @tweenjs/tween.js */ \"./node_modules/@tweenjs/tween.js/src/Tween.js\");\n\nvar TWEEN = _interopRequireWildcard(_tween);\n\nvar _Asset = __webpack_require__(/*! ./Asset */ \"./src/Asset.js\");\n\nvar _Asset2 = _interopRequireDefault(_Asset);\n\nvar _Configuration = __webpack_require__(/*! ./Configuration */ \"./src/Configuration.js\");\n\nvar _Configuration2 = _interopRequireDefault(_Configuration);\n\nvar _CharacterCard = __webpack_require__(/*! ./CharacterCard */ \"./src/CharacterCard.js\");\n\nvar _CharacterCard2 = _interopRequireDefault(_CharacterCard);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar CharacterCardInspector = function (_PIXI$Container) {\n  _inherits(CharacterCardInspector, _PIXI$Container);\n\n  function CharacterCardInspector() {\n    _classCallCheck(this, CharacterCardInspector);\n\n    // Party data\n    var _this = _possibleConstructorReturn(this, (CharacterCardInspector.__proto__ || Object.getPrototypeOf(CharacterCardInspector)).call(this));\n\n    _this._partyCharacterData = null;\n\n    // Card info\n    _this._cardview = null;\n    _this._targetCharacterData = null;\n\n    // Three selectors\n    _this._selectorContainer = null;\n    _this._selectors = null;\n    _this._selectorBases = null;\n    _this._selectorCharacters = null;\n    _this._selectorBaseTexture = null;\n\n    _this._onCharacterSelectHandler = [];\n\n    _this._createCardView();\n    _this._createSelectors();\n    return _this;\n  }\n\n  _createClass(CharacterCardInspector, [{\n    key: \"_createCardView\",\n    value: function _createCardView() {\n      this._cardview = new PIXI.Container();\n      this._cardview.x = 420;\n      this.addChild(this._cardview);\n    }\n  }, {\n    key: \"_createSelectors\",\n    value: function _createSelectors() {\n      var _this2 = this;\n\n      this.visible = false;\n\n      // Initialize sprites\n      this._selectorContainer = new PIXI.Container();\n      this._selectors = [];\n      this._selectorBases = [];\n      this._selectorCharacters = [];\n\n      // Load basic textures\n      this._selectorBaseTexture = _Asset2.default.graphics[\"unit-selection\"];\n\n      for (var i = 0; i < 3; i++) {\n        var selector = new PIXI.Container();\n        var selectorBase = new PIXI.Sprite(this._selectorBaseTexture);\n        var selectorCharacter = new PIXI.Sprite(_Asset2.default.graphics[\"unit-front-no1\"]);\n\n        selectorBase.anchor.set(0.5, 1);\n        selectorCharacter.anchor.set(0.5, 1);\n        selectorCharacter.scale.set(0.6, 0.6);\n\n        selectorCharacter.y = -60;\n\n        selector.x = 960 + 300 * i;\n        selector.y = 90;\n\n        selector.on(\"pointerdown\", function (e) {\n          _this2._onSelectorDown(e);\n        });\n        selector.on(\"pointerup\", function (e) {\n          _this2._onSelectorUp(e);\n        });\n        selector.on(\"pointerupoutside\", function (e) {\n          _this2._onSelectorUp(e);\n        });\n        selector.on(\"pointerover\", function (e) {\n          _this2._onSelectorOver(e);\n        });\n        selector.on(\"pointerout\", function (e) {\n          _this2._onSelectorOut(e);\n        });\n        selector.on(\"pointertap\", function (e) {\n          _this2._onSelectorClick(e);\n        });\n\n        selector.addChild(selectorBase);\n        selector.addChild(selectorCharacter);\n        selector.interactive = true;\n\n        this._selectors.push(selector);\n        this._selectorBases.push(selectorBase);\n        this._selectorCharacters.push(selectorCharacter);\n        this._selectorContainer.addChild(selector);\n      }\n      this.addChild(this._selectorContainer);\n    }\n  }, {\n    key: \"show\",\n    value: function show() {\n      var _this3 = this;\n\n      var upward = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n      if (!this.visible) {\n        this.visible = true;\n        this._selectorContainer.y = upward ? 1000 : -1000;\n        this._cardview.y = upward ? 1000 : -1000;\n        var tween = new TWEEN.Tween(this._selectorContainer).to({\n          y: 0\n        }, 500).easing(TWEEN.Easing.Quadratic.Out).onComplete(function () {\n          _this3.hidden = false;\n        }).start();\n\n        var tween2 = new TWEEN.Tween(this._cardview).to({\n          y: 0\n        }, 500).easing(TWEEN.Easing.Quadratic.Out).start();\n        return true;\n      }\n      return false;\n    }\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      var _this4 = this;\n\n      var upward = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n      if (!this.hidden) {\n        this.hidden = true;\n        var tween = new TWEEN.Tween(this._selectorContainer).to({\n          y: upward ? -1000 : 1000\n        }, 500).easing(TWEEN.Easing.Quadratic.Out).onComplete(function () {\n          _this4.visible = false;\n        }).start();\n        var tween2 = new TWEEN.Tween(this._cardview).to({\n          y: upward ? -1000 : 1000\n        }, 500).easing(TWEEN.Easing.Quadratic.Out).start();\n        return true;\n      }\n      return false;\n    }\n  }, {\n    key: \"setParty\",\n    value: function setParty(characterDataList) {\n      this._partyCharacterData = characterDataList;\n      for (var i = 0; i < 3; i++) {\n        this._selectorCharacters[i].texture = _Asset2.default.graphics[characterDataList[i].bodyTexture.front];\n      }\n    }\n  }, {\n    key: \"setCharacterCard\",\n    value: function setCharacterCard(characterData) {\n      if (this._cardview.children.length > 0) {\n        this._cardview.removeChildAt(0);\n      }\n      this._targetCharacterData = characterData;\n      this._cardview.addChild(new _CharacterCard2.default(characterData));\n    }\n  }, {\n    key: \"onCharacterSelect\",\n    value: function onCharacterSelect(handler) {\n      this._onCharacterSelectHandler.push(handler);\n    }\n  }, {\n    key: \"_onSelectorClick\",\n    value: function _onSelectorClick(event) {\n      var selectedCharacterIndex = void 0;\n\n      for (var i = 0; i < 3; i++) {\n        if (this._selectors[i] === event.target) {\n          selectedCharacterIndex = i;\n          this._selectorCharacters[i].texture = _Asset2.default.graphics[this._targetCharacterData.bodyTexture.front];\n          break;\n        }\n      }\n      for (var _i = 0; _i < this._onCharacterSelectHandler.length; _i++) {\n        this._onCharacterSelectHandler[_i](this._targetCharacterData, selectedCharacterIndex);\n      }\n    }\n  }, {\n    key: \"_onSelectorDown\",\n    value: function _onSelectorDown(event) {\n      this.lastDown = event.target;\n      var tween = new TWEEN.Tween(event.target.scale).to({\n        x: 0.9,\n        y: 0.9\n      }, 200).easing(TWEEN.Easing.Quadratic.Out).start();\n    }\n  }, {\n    key: \"_onSelectorUp\",\n    value: function _onSelectorUp(event) {\n      if (this.lastDown != null) {\n        var tween = new TWEEN.Tween(this.lastDown.scale).to({\n          x: 1,\n          y: 1\n        }, 200).easing(TWEEN.Easing.Quadratic.Out).start();\n        this.lastDown = null;\n      }\n    }\n  }, {\n    key: \"_onSelectorOver\",\n    value: function _onSelectorOver(event) {\n      this.lastOver = event.target;\n      var tween = new TWEEN.Tween(event.target.scale).to({\n        x: 1.2,\n        y: 1.2\n      }, 200).easing(TWEEN.Easing.Quadratic.Out).start();\n    }\n  }, {\n    key: \"_onSelectorOut\",\n    value: function _onSelectorOut(event) {\n      if (this.lastOver != null) {\n        var tween = new TWEEN.Tween(this.lastOver.scale).to({\n          x: 1,\n          y: 1\n        }, 200).easing(TWEEN.Easing.Quadratic.Out).start();\n        this.lastOver = null;\n      }\n    }\n  }]);\n\n  return CharacterCardInspector;\n}(PIXI.Container);\n\nexports.default = CharacterCardInspector;\n\n//# sourceURL=webpack:///./src/CharacterCardInspector.js?");

/***/ }),

/***/ "./src/CharacterData.js":
/*!******************************!*\
  !*** ./src/CharacterData.js ***!
  \******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar CharacterData = function () {\n  function CharacterData(data) {\n    _classCallCheck(this, CharacterData);\n\n    data = data || {};\n    this.index = data.index || 0;\n    this.name = data.name || \"Unnamed\";\n    this.description = data.description || \"\";\n    this.rarity = data.rarity || 0;\n    this.maxHealth = data.maxHealth || 30;\n    this.health = data.health || this.maxHealth;\n    this.speed = data.speed || 3;\n    this.bodyTexture = data.bodyTexture || {\n      front: \"unit-front-no1\",\n      back: \"unit-back-no1\"\n    };\n    this.coordinate = data.coordinate || {\n      x: 0,\n      y: 0\n    };\n    this.buff = data.buff || {\n      type: \"\",\n      name: \"\"\n    };\n  }\n\n  _createClass(CharacterData, [{\n    key: \"equals\",\n    value: function equals(data) {\n      if (data.name == this.name && data.rarity == this.rarity) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n  }]);\n\n  return CharacterData;\n}();\n\nexports.default = CharacterData;\n\n//# sourceURL=webpack:///./src/CharacterData.js?");

/***/ }),

/***/ "./src/CharacterDatabase.js":
/*!**********************************!*\
  !*** ./src/CharacterDatabase.js ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _CharacterData = __webpack_require__(/*! ./CharacterData.js */ \"./src/CharacterData.js\");\n\nvar _CharacterData2 = _interopRequireDefault(_CharacterData);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar CharacterDatabase = [new _CharacterData2.default({\n  index: 0,\n  name: \"볼즈\",\n  description: \"식당에서 일하는 젊은 청년\",\n  rarity: 0,\n  maxHealth: 10,\n  speed: 5,\n  bodyTexture: {\n    front: \"unit-front-no1\",\n    back: \"unit-back-no1\"\n  }\n}), new _CharacterData2.default({\n  index: 1,\n  name: \"파닭\",\n  description: \"파닥파닥\",\n  rarity: 2,\n  maxHealth: 10,\n  speed: 5,\n  bodyTexture: {\n    front: \"unit-front-no2\",\n    back: \"unit-back-no2\"\n  }\n}), new _CharacterData2.default({\n  index: 2,\n  name: \"크앙이\",\n  description: \"입에 먼지가 잘 들어감\",\n  rarity: 0,\n  maxHealth: 30,\n  speed: 3,\n  bodyTexture: {\n    front: \"unit-front-no3\",\n    back: \"unit-back-no3\"\n  }\n}), new _CharacterData2.default({\n  index: 3,\n  name: \"초롱이\",\n  description: \"참 맑은 물방울\",\n  rarity: 0,\n  maxHealth: 30,\n  speed: 3,\n  bodyTexture: {\n    front: \"unit-front-no4\",\n    back: \"unit-back-no4\"\n  }\n}), new _CharacterData2.default({\n  index: 4,\n  name: \"우즈\",\n  description: \"숲\",\n  rarity: 3,\n  maxHealth: 40,\n  speed: 2,\n  bodyTexture: {\n    front: \"unit-front-no5\",\n    back: \"unit-back-no5\"\n  },\n  buff: {\n    type: \"testament\",\n    name: \"respawn-relic\"\n  }\n}), new _CharacterData2.default({\n  index: 5,\n  name: \"스무디\",\n  description: \"스무디라고 불리고싶어\",\n  rarity: 1,\n  maxHealth: 30,\n  speed: 3,\n  bodyTexture: {\n    front: \"unit-front-no6\",\n    back: \"unit-back-no6\"\n  },\n  buff: {\n    type: \"basic\",\n    name: \"friendly-boost\"\n  }\n}), new _CharacterData2.default({\n  index: 6,\n  name: \"써전퀀\",\n  description: \"개발자\",\n  rarity: 3,\n  maxHealth: 20,\n  speed: 4,\n  bodyTexture: {\n    front: \"unit-front-no7\",\n    back: \"unit-back-no7\"\n  },\n  buff: {\n    type: \"basic\",\n    name: \"enemy-boost\"\n  }\n}), new _CharacterData2.default({\n  index: 7,\n  name: \"후라이드\",\n  description: \"염지는 안돼있습니다\",\n  rarity: 2,\n  maxHealth: 10,\n  speed: 5,\n  bodyTexture: {\n    front: \"unit-front-no8\",\n    back: \"unit-back-no8\"\n  },\n  buff: {\n    type: \"basic\",\n    name: \"gambler\"\n  }\n}), new _CharacterData2.default({\n  index: 8,\n  name: \"바둑이\",\n  description: \"조커같기도\",\n  rarity: 0,\n  maxHealth: 30,\n  speed: 3,\n  bodyTexture: {\n    front: \"unit-front-no9\",\n    back: \"unit-back-no9\"\n  },\n  buff: {\n    type: \"basic\",\n    name: \"serial-killer\"\n  }\n}), new _CharacterData2.default({\n  index: 9,\n  name: \"차분이\",\n  description: \"차분한 성격의 소유자\",\n  rarity: 0,\n  maxHealth: 20,\n  speed: 4,\n  bodyTexture: {\n    front: \"unit-front-no10\",\n    back: \"unit-back-no10\"\n  },\n  buff: {\n    type: \"basic\",\n    name: \"serial-killer\"\n  }\n}), new _CharacterData2.default({\n  index: 10,\n  name: \"요한\",\n  description: \"기독교 신자\",\n  rarity: 2,\n  maxHealth: 30,\n  speed: 3,\n  bodyTexture: {\n    front: \"unit-front-no11\",\n    back: \"unit-back-no11\"\n  },\n  buff: {\n    type: \"basic\",\n    name: \"treasure-hunter\"\n  }\n}), new _CharacterData2.default({\n  index: 11,\n  name: \"미첼\",\n  description: \"스니키\",\n  rarity: 1,\n  maxHealth: 40,\n  speed: 2,\n  bodyTexture: {\n    front: \"unit-front-no12\",\n    back: \"unit-back-no12\"\n  },\n  buff: {\n    type: \"support\",\n    name: \"ghost\"\n  }\n}), new _CharacterData2.default({\n  index: 12,\n  name: \"비비\",\n  description: \"수염잔뜩난 그분 아닙니다\",\n  rarity: 1,\n  maxHealth: 30,\n  speed: 3,\n  bodyTexture: {\n    front: \"unit-front-no13\",\n    back: \"unit-back-no13\"\n  },\n  buff: {\n    type: \"support\",\n    name: \"poseidon\"\n  }\n}), new _CharacterData2.default({\n  index: 13,\n  name: \"유칼리\",\n  description: \"안여어어어어어어엉\",\n  rarity: 0,\n  maxHealth: 50,\n  speed: 1,\n  bodyTexture: {\n    front: \"unit-front-no14\",\n    back: \"unit-back-no14\"\n  },\n  buff: {\n    type: \"basic\",\n    name: \"dr-boom\"\n  }\n}), new _CharacterData2.default({\n  index: 14,\n  name: \"이보이\",\n  description: \"눈구멍보다 코구멍이 더크다\",\n  rarity: 0,\n  maxHealth: 40,\n  speed: 2,\n  bodyTexture: {\n    front: \"unit-front-no15\",\n    back: \"unit-back-no15\"\n  },\n  buff: {\n    type: \"testament\",\n    name: \"zombie\"\n  }\n}), new _CharacterData2.default({\n  index: 15,\n  name: \"윌리엄슨\",\n  description: \"레드버켓\",\n  rarity: 2,\n  maxHealth: 40,\n  speed: 2,\n  bodyTexture: {\n    front: \"unit-front-no16\",\n    back: \"unit-back-no16\"\n  },\n  buff: {\n    type: \"testament\",\n    name: \"grenade\"\n  }\n}), new _CharacterData2.default({\n  index: 16,\n  name: \"파카\",\n  description: \"대신 날 가져\",\n  rarity: 0,\n  maxHealth: 20,\n  speed: 4,\n  bodyTexture: {\n    front: \"unit-front-no17\",\n    back: \"unit-back-no17\"\n  },\n  buff: {\n    type: \"basic\",\n    name: \"spurt\"\n  }\n}), new _CharacterData2.default({\n  index: 17,\n  name: \"포키\",\n  description: \"토실토실\",\n  rarity: 1,\n  maxHealth: 40,\n  speed: 2,\n  bodyTexture: {\n    front: \"unit-front-no18\",\n    back: \"unit-back-no18\"\n  },\n  buff: {\n    type: \"basic\",\n    name: \"hustler\"\n  }\n}), new _CharacterData2.default({\n  index: 18,\n  name: \"뜨또\",\n  description: \"비버\",\n  rarity: 1,\n  maxHealth: 30,\n  speed: 3,\n  bodyTexture: {\n    front: \"unit-front-no19\",\n    back: \"unit-back-no19\"\n  },\n  buff: {\n    type: \"support\",\n    name: \"cloak\"\n  }\n}), new _CharacterData2.default({\n  index: 19,\n  name: \"암스트롱\",\n  description: \"...\",\n  rarity: 1,\n  maxHealth: 30,\n  speed: 3,\n  bodyTexture: {\n    front: \"unit-front-no20\",\n    back: \"unit-back-no20\"\n  },\n  buff: {\n    type: \"testament\",\n    name: \"resurrection\"\n  }\n}), new _CharacterData2.default({\n  index: 20,\n  name: \"펭돌이\",\n  description: \"이 게임의 마스코트이다\",\n  rarity: 0,\n  maxHealth: 30,\n  speed: 3,\n  bodyTexture: {\n    front: \"unit-front-no21\",\n    back: \"unit-back-no21\"\n  },\n  buff: {\n    type: \"basic\",\n    name: \"mission-impossible\"\n  }\n}), new _CharacterData2.default({\n  index: 21,\n  name: \"용용\",\n  description: \"하마 아니야?!\",\n  rarity: 1,\n  maxHealth: 20,\n  speed: 4,\n  bodyTexture: {\n    front: \"unit-front-no22\",\n    back: \"unit-back-no22\"\n  }\n})];\n\nexports.default = CharacterDatabase;\n\n//# sourceURL=webpack:///./src/CharacterDatabase.js?");

/***/ }),

/***/ "./src/CoinCard.js":
/*!*************************!*\
  !*** ./src/CoinCard.js ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _pixi = __webpack_require__(/*! pixi.js */ \"./node_modules/pixi.js/lib/index.js\");\n\nvar PIXI = _interopRequireWildcard(_pixi);\n\nvar _Asset = __webpack_require__(/*! ./Asset.js */ \"./src/Asset.js\");\n\nvar _Asset2 = _interopRequireDefault(_Asset);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar CoinCard = function (_PIXI$Container) {\n  _inherits(CoinCard, _PIXI$Container);\n\n  function CoinCard(amount) {\n    _classCallCheck(this, CoinCard);\n\n    var _this = _possibleConstructorReturn(this, (CoinCard.__proto__ || Object.getPrototypeOf(CoinCard)).call(this));\n\n    _this.amount = amount;\n\n    _this._cardboard = null;\n    _this._coinText = null;\n\n    _this._cardboardTexture = null;\n\n    _this._drawCard();\n    return _this;\n  }\n\n  _createClass(CoinCard, [{\n    key: \"_drawCard\",\n    value: function _drawCard() {\n      this._cardboardTexture = _Asset2.default.graphics[\"card-gold\"];\n\n      this._cardboard = new PIXI.Sprite(this._cardboardTexture);\n      this._coinText = new PIXI.Text(this.amount + \" 골드\", {\n        fontFamily: \"Arial\",\n        fontWeight: \"bold\",\n        fontSize: 58,\n        fill: 0x888888,\n        align: \"left\"\n      });\n      this._cardboard.anchor.set(0.5, 0.5);\n      this._coinText.anchor.set(0.5, 0.5);\n\n      this._coinText.y = -137;\n\n      this.addChild(this._cardboard);\n      this.addChild(this._coinText);\n    }\n  }]);\n\n  return CoinCard;\n}(PIXI.Container);\n\nexports.default = CoinCard;\n\n//# sourceURL=webpack:///./src/CoinCard.js?");

/***/ }),

/***/ "./src/Configuration.js":
/*!******************************!*\
  !*** ./src/Configuration.js ***!
  \******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar Configuration = {\n  server: {\n    host: \"13.209.96.210:3000\"\n  },\n  baseResolution: {\n    width: 1920,\n    height: 1080\n  },\n  resolution: {\n    width: 1920,\n    height: 1080\n  },\n  resolutionFactor: 1,\n\n  isometric: {\n    unitWidth: 256,\n    unitHeight: 148.616\n  }\n};\n\nexports.default = Configuration;\n\n//# sourceURL=webpack:///./src/Configuration.js?");

/***/ }),

/***/ "./src/Connection.js":
/*!***************************!*\
  !*** ./src/Connection.js ***!
  \***************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _socket = __webpack_require__(/*! socket.io-client */ \"./node_modules/socket.io-client/lib/index.js\");\n\nvar _socket2 = _interopRequireDefault(_socket);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Connection = function () {\n  function Connection() {\n    _classCallCheck(this, Connection);\n\n    // Socket\n    this._socket = null;\n    this._connected = false;\n\n    // User status\n    this._userId = null;\n    this._roomData = {};\n\n    // Event handlers\n    this._onConnectedHandler = [];\n    this._onDisconnectedHandler = [];\n    this._onPathHnadler = [];\n  }\n\n  _createClass(Connection, [{\n    key: \"setup\",\n    value: function setup(host) {\n      if (this._socket != null) {\n        return;\n      }\n\n      this._socket = _socket2.default.connect(host);\n      this._initializeConnection();\n    }\n\n    /**\n     * Sign in with given parameters\n     * \n     * @param {String} id \n     * @param {String} password \n     * @param {Function} callback \n     */\n\n  }, {\n    key: \"signin\",\n    value: function signin(id, password, callback) {\n      var _this = this;\n\n      if (this.connected && !this._signinInProgress) {\n        // To prevent interception\n        this._signinInProgress = true;\n\n        var isAuto = id == null && password == null;\n        this._socket.emit(\"establish session\", {\n          id: id,\n          password: password,\n          isAuto: true\n        });\n\n        var handler = function handler(response) {\n          _this._signinInProgress = false;\n          if (response.success) {\n            _this._userId = response.userId;\n          }\n          _this._socket.off(\"establish session\", handler);\n          callback(response);\n        };\n\n        this._socket.on(\"establish session\", handler);\n      }\n    }\n  }, {\n    key: \"fetchUserData\",\n    value: function fetchUserData(id, callback) {\n      var _this2 = this;\n\n      this._socket.emit(\"fetch user\", {\n        userId: id\n      });\n\n      var handler = function handler(response) {\n        _this2._socket.off(\"fetch user\", handler);\n        callback(response);\n      };\n\n      this._socket.on(\"fetch user\", handler);\n    }\n  }, {\n    key: \"updateUserData\",\n    value: function updateUserData(id, data) {\n      this._socket.emit(\"update user\", {\n        userId: id,\n        contents: data\n      });\n    }\n  }, {\n    key: \"findMatch\",\n    value: function findMatch(counts, team, callback) {\n      var _this3 = this;\n\n      this._socket.emit(\"find match\", {\n        userId: this._userId,\n        partyCode: this.partyCode,\n        playerCounts: counts,\n        isTeam: team\n      });\n\n      var handler = function handler(response) {\n        _this3._socket.off(\"find match\", handler);\n\n        /**\n          success: true,\n          roomData: {\n            id: room.id\n            seed: room.seed\n            players: {\n              partyCode: \n              partyId: \n              territoryColor: \n            }\n          }\n         */\n\n        _this3._roomData = response.roomData;\n        callback(response);\n      };\n\n      this._socket.on(\"find match\", handler);\n    }\n  }, {\n    key: \"cancelFindingMatch\",\n    value: function cancelFindingMatch() {\n\n      this._socket.emit(\"cancel finding\", {\n        userId: this.userId\n      });\n    }\n  }, {\n    key: \"endGame\",\n    value: function endGame(results, callback) {\n      var _this4 = this;\n\n      /*\n      results\n        stats: {time, kills, lives, relics, score}\n        players: [{partyId, userId, rank, score}]\n      */\n\n      var rank = [];\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = results.players[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var player = _step.value;\n\n          rank.push(player.userId);\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      this._socket.emit(\"end game\", {\n        userId: this._userId,\n        rank: rank,\n        stats: results.stats\n      });\n\n      var handler = function handler(response) {\n        _this4._socket.off(\"end game\", handler);\n        _this4._roomData = {};\n        callback(response);\n      };\n\n      this._socket.on(\"end game\", handler);\n    }\n  }, {\n    key: \"startListeningPath\",\n    value: function startListeningPath() {\n      var _this5 = this;\n\n      this._socket.on(\"make path\", function (data) {\n        for (var i = 0; i < _this5._onPathHnadler.length; i++) {\n          _this5._onPathHnadler[i](data);\n        }\n\n        // console.log(\"receive_\");\n        // console.log({userId: data.userId, path: data.path});\n      });\n    }\n  }, {\n    key: \"stopListeningPath\",\n    value: function stopListeningPath() {\n      var _this6 = this;\n\n      this._socket.off(\"make path\", function (data) {\n        for (var i = 0; i < _this6._onPathHnadler.length; i++) {\n          _this6._onPathHnadler[i](data);\n        }\n      });\n\n      this._onPathHnadler = [];\n    }\n  }, {\n    key: \"sendPath\",\n    value: function sendPath(userId, path) {\n\n      this._socket.emit(\"make path\", {\n        userId: userId,\n        path: path\n      });\n\n      // console.log(\"send_\");\n      // console.log({userId: userId, path: path});\n    }\n  }, {\n    key: \"onConnected\",\n    value: function onConnected(handler) {\n      this._onConnectedHandler.push(handler);\n    }\n  }, {\n    key: \"onPath\",\n    value: function onPath(handler) {\n      this._onPathHnadler.push(handler);\n    }\n  }, {\n    key: \"_initializeConnection\",\n    value: function _initializeConnection() {\n      var _this7 = this;\n\n      this._socket.on(\"connect\", function (response) {\n        _this7._connected = true;\n        for (var i = 0; i < _this7._onConnectedHandler.length; i++) {\n          _this7._onConnectedHandler[i](response);\n        }\n      });\n    }\n  }, {\n    key: \"partyCode\",\n    set: function set(value) {\n      this._partyCode = value;\n    },\n    get: function get() {\n      return this._partyCode;\n      /*for (let player of this._roomData.players) {\n        if (player.id == this._userId) {\n          return player.partyCode;\n        }\n      }*/\n    }\n  }, {\n    key: \"partyId\",\n    get: function get() {\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = this._roomData.players[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var player = _step2.value;\n\n          if (player.id == this._userId) {\n            return player.partyId;\n          }\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2.return) {\n            _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n    }\n  }, {\n    key: \"territoryColor\",\n    get: function get() {\n      var _iteratorNormalCompletion3 = true;\n      var _didIteratorError3 = false;\n      var _iteratorError3 = undefined;\n\n      try {\n        for (var _iterator3 = this._roomData.players[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n          var player = _step3.value;\n\n          if (player.id == this._userId) {\n            return player.territoryColor;\n          }\n        }\n      } catch (err) {\n        _didIteratorError3 = true;\n        _iteratorError3 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion3 && _iterator3.return) {\n            _iterator3.return();\n          }\n        } finally {\n          if (_didIteratorError3) {\n            throw _iteratorError3;\n          }\n        }\n      }\n    }\n  }, {\n    key: \"socket\",\n    get: function get() {\n      return this._socket;\n    }\n  }, {\n    key: \"connected\",\n    get: function get() {\n      return this._connected;\n    }\n  }, {\n    key: \"signined\",\n    get: function get() {\n      return this._userId != null;\n    }\n  }, {\n    key: \"userId\",\n    get: function get() {\n      return this._userId;\n    }\n  }, {\n    key: \"roomData\",\n    get: function get() {\n      return this._roomData;\n    }\n  }]);\n\n  return Connection;\n}();\n\nexports.default = new Connection();\n\n//# sourceURL=webpack:///./src/Connection.js?");

/***/ }),

/***/ "./src/Context.js":
/*!************************!*\
  !*** ./src/Context.js ***!
  \************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _pixi = __webpack_require__(/*! pixi.js */ \"./node_modules/pixi.js/lib/index.js\");\n\nvar PIXI = _interopRequireWildcard(_pixi);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Main screen\n *\n * @date 13 June 2018\n * @author HyunJun Kim\n */\nvar Context = function () {\n  function Context() {\n    _classCallCheck(this, Context);\n\n    this.renderer = null;\n    this.screens = {};\n\n    this.results = {};\n    this._rewards = [];\n  }\n\n  _createClass(Context, [{\n    key: \"switchScreen\",\n    value: function switchScreen(screenName) {\n      if (this.renderer != null && this.screens[screenName] != null) {\n        this.renderer.setScreen(this.screens[screenName]);\n      }\n    }\n  }, {\n    key: \"rewards\",\n    set: function set(value) {\n      this._rewards = value;\n    },\n    get: function get() {\n      return this._rewards;\n    }\n  }]);\n\n  return Context;\n}();\n\nexports.default = Context;\n\n//# sourceURL=webpack:///./src/Context.js?");

/***/ }),

/***/ "./src/GameplayScreen.js":
/*!*******************************!*\
  !*** ./src/GameplayScreen.js ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _pixi = __webpack_require__(/*! pixi.js */ \"./node_modules/pixi.js/lib/index.js\");\n\nvar PIXI = _interopRequireWildcard(_pixi);\n\nvar _tween2 = __webpack_require__(/*! @tweenjs/tween.js */ \"./node_modules/@tweenjs/tween.js/src/Tween.js\");\n\nvar _tween3 = _interopRequireDefault(_tween2);\n\nvar _Screen2 = __webpack_require__(/*! ./Screen.js */ \"./src/Screen.js\");\n\nvar _Screen3 = _interopRequireDefault(_Screen2);\n\nvar _Party = __webpack_require__(/*! ./Party.js */ \"./src/Party.js\");\n\nvar _Party2 = _interopRequireDefault(_Party);\n\nvar _Stage = __webpack_require__(/*! ./Stage.js */ \"./src/Stage.js\");\n\nvar _Stage2 = _interopRequireDefault(_Stage);\n\nvar _Asset = __webpack_require__(/*! ./Asset.js */ \"./src/Asset.js\");\n\nvar _Asset2 = _interopRequireDefault(_Asset);\n\nvar _StageData = __webpack_require__(/*! ./StageData.js */ \"./src/StageData.js\");\n\nvar _StageData2 = _interopRequireDefault(_StageData);\n\nvar _Character = __webpack_require__(/*! ./Character.js */ \"./src/Character.js\");\n\nvar _Character2 = _interopRequireDefault(_Character);\n\nvar _CharacterData = __webpack_require__(/*! ./CharacterData.js */ \"./src/CharacterData.js\");\n\nvar _CharacterData2 = _interopRequireDefault(_CharacterData);\n\nvar _Configuration = __webpack_require__(/*! ./Configuration.js */ \"./src/Configuration.js\");\n\nvar _Configuration2 = _interopRequireDefault(_Configuration);\n\nvar _Connection = __webpack_require__(/*! ./Connection.js */ \"./src/Connection.js\");\n\nvar _Connection2 = _interopRequireDefault(_Connection);\n\nvar _CharacterDatabase = __webpack_require__(/*! ./CharacterDatabase.js */ \"./src/CharacterDatabase.js\");\n\nvar _CharacterDatabase2 = _interopRequireDefault(_CharacterDatabase);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * Main screen\n *\n * @date 13 June 2018\n * @author HyunJun Kim\n */\nvar GameplayScreen = function (_Screen) {\n  _inherits(GameplayScreen, _Screen);\n\n  function GameplayScreen() {\n    _classCallCheck(this, GameplayScreen);\n\n    return _possibleConstructorReturn(this, (GameplayScreen.__proto__ || Object.getPrototypeOf(GameplayScreen)).apply(this, arguments));\n  }\n\n  _createClass(GameplayScreen, [{\n    key: \"onInit\",\n    value: function onInit() {\n      var _this2 = this;\n\n      this._backgroundDisplay = new PIXI.Sprite(_Asset2.default.graphics[\"background\"]);\n      this._backgroundDisplay.width = _Configuration2.default.baseResolution.width;\n      this._backgroundDisplay.height = _Configuration2.default.baseResolution.height;\n\n      this.root.addChild(this._backgroundDisplay);\n\n      // Initialize game stage\n      this.stage = new _Stage2.default(new _StageData2.default(_Connection2.default.roomData.seed));\n\n      // Create parties\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = _Connection2.default.roomData.players[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var player = _step.value;\n\n          var newParty = new _Party2.default(player.partyId, player.id, player.territoryColor);\n\n          for (var i = 0; i < 3; i++) {\n            var characterData = new _CharacterData2.default(_CharacterDatabase2.default[player.partyCode.split(\",\")[i]]);\n            var character = new _Character2.default(characterData);\n            if (player.id == _Connection2.default.userId) character.isUser = true;\n            newParty.addMember(character);\n          }\n\n          // Find client party\n          if (player.id == _Connection2.default.userId) {\n            this.party = newParty;\n            this.stage.me = newParty;\n            console.log(this.stage.me);\n          }\n\n          this.stage.addParty(newParty);\n        }\n\n        // Add parties to stage\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = this.stage.parties[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var party = _step2.value;\n\n          var startCoordinate = this._getStartCoordinate(party.id);\n          party.setStartCoordinate(startCoordinate.x, startCoordinate.y, (party.id + 1) % 4);\n          party.displaceToStartCoordinate();\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2.return) {\n            _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      this.root.addChild(this.stage);\n\n      // Minimap\n      this.stage.minimap.x = 1350;\n      this.stage.minimap.y = 50;\n      this.root.addChild(this.stage.minimap);\n\n      // Timer\n      this.stage.timer.x = _Configuration2.default.baseResolution.width / 2 - 264;\n      this.stage.timer.y = 13;\n      this.stage.timer.alpha = 0.9;\n      this.root.addChild(this.stage.timer);\n\n      // Event board\n      this.stage.eventBoard.y = 430;\n      this.stage.eventBoard.x = _Configuration2.default.baseResolution.width - 250;\n      this.root.addChild(this.stage.eventBoard);\n\n      // Player board;\n      this.stage.playerBoard.y = 100;\n      this.stage.playerBoard.x = 30;\n      //this.stage.playerBoard.alpha = 0.7;\n      this.root.addChild(this.stage.playerBoard);\n\n      // Plotter box\n      this.stage.plotterBox.y = 880;\n      this.stage.plotterBox.x = 30;\n      this.root.addChild(this.stage.plotterBox);\n\n      // Input flasher\n      this.flashBoard = {\n        left: new PIXI.Graphics(),\n        right: new PIXI.Graphics()\n      };\n\n      this.flashBoard.left.beginFill(0xffffff);\n      this.flashBoard.left.drawRect(0, 0, this.getWidth() / 2, this.getHeight());\n      this.flashBoard.left.endFill();\n      this.flashBoard.left.visible = false;\n\n      this.flashBoard.right.beginFill(0xffffff);\n      this.flashBoard.right.drawRect(0, 0, this.getWidth() / 2, this.getHeight());\n      this.flashBoard.right.endFill();\n      this.flashBoard.right.visible = false;\n\n      this.flashBoard.right.x = this.getWidth() / 2;\n\n      this.root.addChild(this.flashBoard.left);\n      this.root.addChild(this.flashBoard.right);\n\n      this.context.renderer.getInteractiveManager().on(\"pointerdown\", function (e) {\n        _this2.onScreenTouched(e);\n      });\n\n      this.stage.onGameEnd(function (results) {\n        /*\n        results\n          stats: {time, kills, lives, relics, score}\n          players: [{partyId, userId, rank, score}]\n        */\n        _this2.context.results = results;\n        _Connection2.default.endGame(results, function (data) {\n          /*\n          data\n            rewards: [{type, characterData || amount}]\n            players: [{partyId, userId, territoryColor, partyCode}]\n          */\n          _this2.context.rewards = data.rewards;\n\n          // make player list with rank and score\n          var oldPlayers = _this2.context.results.players;\n          for (var x in data.players) {\n            console.log(\"data! \", data.players);\n            for (var y in oldPlayers) {\n              console.log(\"old! \", oldPlayers);\n              if (data.players[x].userId == oldPlayers[y].userId) {\n                data.players[x].rank = oldPlayers[y].rank;\n                data.players[x].score = oldPlayers[y].score;\n                break;\n              }\n            }\n          }\n          _this2.context.results.players = data.players;\n          _this2.context.switchScreen(\"reward\");\n        });\n\n        _Connection2.default.stopListeningPath();\n        _this2.stage._parties = [];\n        // this.stage = null;\n      });\n\n      // On change direction\n      _Connection2.default.onPath(function (data) {\n        var _iteratorNormalCompletion3 = true;\n        var _didIteratorError3 = false;\n        var _iteratorError3 = undefined;\n\n        try {\n          for (var _iterator3 = _this2.stage.parties[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n            var _party = _step3.value;\n\n            if (_party.name == data.userId) {\n\n              _party.schedulePath(data.path);\n              // this.print(\"opponents! \",party._scheduledPath);\n              break;\n            }\n          }\n        } catch (err) {\n          _didIteratorError3 = true;\n          _iteratorError3 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion3 && _iterator3.return) {\n              _iterator3.return();\n            }\n          } finally {\n            if (_didIteratorError3) {\n              throw _iteratorError3;\n            }\n          }\n        }\n      });\n\n      _Connection2.default.startListeningPath();\n\n      _Asset2.default.sounds[\"loginSound\"].stop();\n      _Asset2.default.sounds[\"gameSound\"].play({\n        loop: true,\n        singleInstance: true\n      });\n    }\n  }, {\n    key: \"print\",\n    value: function print(id, path) {\n      var ss = path.length + \" | \";\n      for (var i = 0; i < path.length; i++) {\n        ss += \"(\" + path[i].x + \",\" + path[i].y + \"), \";\n      }\n      console.log(id, ss);\n    }\n  }, {\n    key: \"onActive\",\n    value: function onActive() {\n      this.fadeOut();\n    }\n  }, {\n    key: \"onUpdate\",\n    value: function onUpdate(deltaTime) {\n      this.stage.update(deltaTime);\n    }\n  }, {\n    key: \"onScreenTouched\",\n    value: function onScreenTouched(event) {\n      var _this3 = this;\n\n      // Right turn\n      if (event.data.global.x > _Configuration2.default.resolution.width / 2) {\n        var path = this.stage.plotter.plot();\n\n        this.stage.plotter.setPreviewPrototype(this.stage.plotter.popNextPrototype());\n\n        this.flashBoard.right.visible = true;\n        this.flashBoard.right.alpha = 0.2;\n        var tween = new _tween3.default.Tween(this.flashBoard.right).to({\n          alpha: 0\n        }, 200).easing(_tween3.default.Easing.Back.In).onComplete(function () {\n          _this3.flashBoard.right.visible = false;\n        }).start();\n      }\n\n      // Left turn\n      else {\n          this.stage.plotter.rotatePreview();\n\n          this.flashBoard.left.visible = true;\n          this.flashBoard.left.alpha = 0.2;\n          var _tween = new _tween3.default.Tween(this.flashBoard.left).to({\n            alpha: 0\n          }, 200).easing(_tween3.default.Easing.Back.In).onComplete(function () {\n            _this3.flashBoard.left.visible = false;\n          }).start();\n        }\n    }\n  }, {\n    key: \"_getStartCoordinate\",\n    value: function _getStartCoordinate(partyId) {\n      switch (partyId) {\n        case 1:\n          return { x: this.stage.meta.dimension.width - 1, y: 0 };\n        case 2:\n          return { x: 0, y: 0 };\n        case 3:\n          return { x: 0, y: this.stage.meta.dimension.height - 1 };\n        case 4:\n          return {\n            x: this.stage.meta.dimension.width - 1,\n            y: this.stage.meta.dimension.height - 1\n          };\n      }\n    }\n  }]);\n\n  return GameplayScreen;\n}(_Screen3.default);\n\nexports.default = GameplayScreen;\n\n//# sourceURL=webpack:///./src/GameplayScreen.js?");

/***/ }),

/***/ "./src/LiveBackground.js":
/*!*******************************!*\
  !*** ./src/LiveBackground.js ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _pixi = __webpack_require__(/*! pixi.js */ \"./node_modules/pixi.js/lib/index.js\");\n\nvar PIXI = _interopRequireWildcard(_pixi);\n\nvar _Asset = __webpack_require__(/*! ./Asset.js */ \"./src/Asset.js\");\n\nvar _Asset2 = _interopRequireDefault(_Asset);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar LiveBackground = function (_PIXI$Container) {\n  _inherits(LiveBackground, _PIXI$Container);\n\n  function LiveBackground(width, height) {\n    _classCallCheck(this, LiveBackground);\n\n    var _this = _possibleConstructorReturn(this, (LiveBackground.__proto__ || Object.getPrototypeOf(LiveBackground)).call(this));\n\n    _this.wallpaperWidth = width;\n    _this.wallpaperHeight = height;\n\n    _this.emphasize = false;\n\n    _this.initialize();\n    return _this;\n  }\n\n  /**\n   * Initlaize live background\n   */\n\n\n  _createClass(LiveBackground, [{\n    key: \"initialize\",\n    value: function initialize() {\n      var wallpaper = new PIXI.Sprite(_Asset2.default.graphics[\"background\"]);\n      wallpaper.width = this.wallpaperWidth;\n      wallpaper.height = this.wallpaperHeight;\n\n      this.addChild(wallpaper);\n\n      this.decos = [];\n\n      for (var i = 0; i < 15; i++) {\n        var deco = new PIXI.Graphics();\n\n        deco.beginFill(0xffffff);\n        deco.drawRect(0, 0, 60 + 60 * Math.random(), 20 + 8 * Math.random());\n        deco.alpha = 0.4 * Math.random();\n        deco.x = wallpaper.width * Math.random();\n        deco.y = wallpaper.height * Math.random();\n\n        this.addChild(deco);\n        this.decos.push(deco);\n      }\n    }\n\n    /**\n     * Update live background\n     *\n     * @param {} deltaTime\n     */\n\n  }, {\n    key: \"update\",\n    value: function update(deltaTime) {\n      var decos = this.decos;\n\n      for (var i = 0; i < decos.length; i++) {\n        if (this.emphasize) {\n          decos[i].scale.set(2, 2);\n          decos[i].x -= decos[i].alpha * 60 * deltaTime;\n        } else {\n          decos[i].scale.set(1, 1);\n          decos[i].x -= decos[i].alpha * 7 * deltaTime;\n        }\n\n        if (decos[i].x + decos[i].width < 0) {\n          decos[i].x = this.wallpaperWidth;\n        }\n      }\n    }\n  }]);\n\n  return LiveBackground;\n}(PIXI.Container);\n\nexports.default = LiveBackground;\n\n//# sourceURL=webpack:///./src/LiveBackground.js?");

/***/ }),

/***/ "./src/LoadingScreen.js":
/*!******************************!*\
  !*** ./src/LoadingScreen.js ***!
  \******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _pixi = __webpack_require__(/*! pixi.js */ \"./node_modules/pixi.js/lib/index.js\");\n\nvar PIXI = _interopRequireWildcard(_pixi);\n\n__webpack_require__(/*! pixi-sound */ \"./node_modules/pixi-sound/dist/pixi-sound.es.js\");\n\nvar _Screen2 = __webpack_require__(/*! ./Screen.js */ \"./src/Screen.js\");\n\nvar _Screen3 = _interopRequireDefault(_Screen2);\n\nvar _Asset = __webpack_require__(/*! ./Asset.js */ \"./src/Asset.js\");\n\nvar _Asset2 = _interopRequireDefault(_Asset);\n\nvar _Connection = __webpack_require__(/*! ./Connection.js */ \"./src/Connection.js\");\n\nvar _Connection2 = _interopRequireDefault(_Connection);\n\nvar _Configuration = __webpack_require__(/*! ./Configuration.js */ \"./src/Configuration.js\");\n\nvar _Configuration2 = _interopRequireDefault(_Configuration);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * Loading screen\n *\n * @date 13 June 2018\n * @author HyunJun Kim\n */\nvar LoadingScreen = function (_Screen) {\n  _inherits(LoadingScreen, _Screen);\n\n  function LoadingScreen() {\n    _classCallCheck(this, LoadingScreen);\n\n    return _possibleConstructorReturn(this, (LoadingScreen.__proto__ || Object.getPrototypeOf(LoadingScreen)).apply(this, arguments));\n  }\n\n  _createClass(LoadingScreen, [{\n    key: \"onInit\",\n    value: function onInit() {\n      this._loaded = false;\n      this._connected = false;\n\n      // Loaded resources list\n      this._resourcesList = [[\"background\", \"images/background.png\"], [\"spritesheet-game\", \"images/spritesheet-game.json\"], [\"spritesheet-ui\", \"images/spritesheet-ui.json\"], [\"spritesheet1\", \"images/spritesheet1.json\"], [\"clickSound\", \"sounds/click.ogg\"], [\"clickDisabledSound\", \"sounds/clickDisabled.ogg\"], [\"fillSound\", \"sounds/fill.ogg\"], [\"gameSound\", \"sounds/game.ogg\"], [\"jumpSound\", \"sounds/jump.ogg\"], [\"loginSound\", \"sounds/login.ogg\"], [\"matchCancelSound\", \"sounds/matchCancel.ogg\"], [\"matchFindSound\", \"sounds/matchFind.ogg\"], [\"hitSound\", \"sounds/hit.ogg\"], [\"endSound\", \"sounds/end.ogg\"], [\"cardClickSound\", \"sounds/cardClick.ogg\"]];\n      this._totalResources = 0;\n      this._loadedResources = 0;\n\n      // Loader graphics\n      this._loaderGraphicsPrepared = false;\n      this._loadingSpinner = null;\n      this._loadingText = null;\n\n      // Recall onActive (when loader not initialized)\n      this._activeCallbackScheduled = false;\n\n      this._initializePreloader();\n    }\n  }, {\n    key: \"onActive\",\n    value: function onActive() {\n      if (!this._loaded) {\n        if (!this._loaderGraphicsPrepared) {\n          this._activeCallbackScheduled = true;\n          return;\n        }\n\n        // Display image\n        this._connect();\n        this._load();\n      }\n    }\n  }, {\n    key: \"onUpdate\",\n    value: function onUpdate(deltaTime) {\n      if (this._loaderGraphicsPrepared) {\n        this._loadingSpinner.rotation += 0.1;\n      }\n    }\n  }, {\n    key: \"_initializePreloader\",\n\n\n    /**\n     * Pre-initialize loader for loading effects\n     */\n    value: function _initializePreloader() {\n      var _this2 = this;\n\n      var loader = PIXI.loader;\n      loader.add(\"loading-spinner\", \"images/loading-spinner.png\");\n      loader.load(function (loader, resources) {\n        _Asset2.default.graphics[\"loading-spinner\"] = resources[\"loading-spinner\"].texture;\n\n        // Display image\n        _this2._loadingSpinner = new PIXI.Sprite(_Asset2.default.graphics[\"loading-spinner\"]);\n\n        _this2._loadingSpinner.anchor.set(0.5, 0.5);\n        _this2._loadingSpinner.x = _this2.getWidth() / 2;\n        _this2._loadingSpinner.y = _this2.getHeight() / 2 - 52;\n\n        _this2._loadingText = new PIXI.Text(\"Loading assets... (1/1)\", {\n          fontFamily: \"Arial\",\n          fontSize: 32,\n          fill: 0xffffff,\n          fontWeight: \"bold\",\n          align: \"center\"\n        });\n\n        _this2._loadingText.anchor.set(0.5, 0.5);\n        _this2._loadingText.x = _this2.getWidth() / 2;\n        _this2._loadingText.y = _this2.getHeight() / 2 + 62;\n\n        _this2.root.addChild(_this2._loadingSpinner);\n        _this2.root.addChild(_this2._loadingText);\n\n        _this2._loaderGraphicsPrepared = true;\n        if (_this2._activeCallbackScheduled) {\n          _this2._activeCallbackScheduled = false;\n          _this2.onActive();\n        }\n      });\n    }\n  }, {\n    key: \"_load\",\n    value: function _load() {\n      var _this3 = this;\n\n      this._totalResources = 0;\n      this._loadedResources = 0;\n\n      for (var i = 0; i < this._resourcesList.length; i++) {\n        PIXI.loader.add(this._resourcesList[i][0], this._resourcesList[i][1]);\n        if (this._resourcesList[i][0].indexOf(\"spritesheet\") >= 0) {\n          this._totalResources++;\n        }\n        this._totalResources++;\n      }\n\n      var loader = PIXI.loader;\n      loader.load(function (loader, resources) {\n        // Merge spritesheets & sounds\n        var keys = Object.keys(resources);\n        for (var _i = 0; _i < keys.length; _i++) {\n          if (keys[_i].indexOf(\"Sound\") >= 0) {\n            _Asset2.default.sounds[keys[_i]] = resources[keys[_i]].sound;\n          } else if (keys[_i].indexOf(\"spritesheet\") >= 0 && keys[_i].indexOf(\"image\") < 0) {\n            var spriteSheetKeys = Object.keys(resources[keys[_i]].textures);\n            for (var j = 0; j < spriteSheetKeys.length; j++) {\n              _Asset2.default.graphics[spriteSheetKeys[j]] = resources[keys[_i]].textures[spriteSheetKeys[j]];\n            }\n          } else {\n            _Asset2.default.graphics[keys[_i]] = resources[keys[_i]].texture;\n          }\n        }\n        _this3._loaded = true;\n        //if (this._connected) {\n        _this3.context.switchScreen(\"login\");\n        //}\n        /*\n        if (this._connected) {\n          this.fadeIn(() => {\n            this.context.switchScreen(\"gameplay\");\n          });\n        }\n        */\n      });\n      loader.onProgress.add(function () {\n        _this3._loadedResources++;\n\n        if (_this3._loadedResources == _this3._totalResources && !_this3._connected) {\n          _this3._loadingText.text = \"Waiting for server...\";\n        } else {\n          _this3._loadingText.text = \"Loading assets... (\" + _this3._loadedResources + \"/\" + _this3._totalResources + \")\";\n        }\n      });\n    }\n  }, {\n    key: \"_connect\",\n    value: function _connect() {\n      var _this4 = this;\n\n      _Connection2.default.setup(_Configuration2.default.server.host);\n      _Connection2.default.onConnected(function (response) {\n        _this4._connected = true;\n        if (_this4._loaded) {\n          _this4.context.switchScreen(\"login\");\n        }\n      });\n    }\n  }, {\n    key: \"loaded\",\n    get: function get() {\n      return this._loaded;\n    }\n  }]);\n\n  return LoadingScreen;\n}(_Screen3.default);\n\nexports.default = LoadingScreen;\n\n//# sourceURL=webpack:///./src/LoadingScreen.js?");

/***/ }),

/***/ "./src/LoginScreen.js":
/*!****************************!*\
  !*** ./src/LoginScreen.js ***!
  \****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _pixi = __webpack_require__(/*! pixi.js */ \"./node_modules/pixi.js/lib/index.js\");\n\nvar PIXI = _interopRequireWildcard(_pixi);\n\nvar _Screen2 = __webpack_require__(/*! ./Screen.js */ \"./src/Screen.js\");\n\nvar _Screen3 = _interopRequireDefault(_Screen2);\n\nvar _Asset = __webpack_require__(/*! ./Asset.js */ \"./src/Asset.js\");\n\nvar _Asset2 = _interopRequireDefault(_Asset);\n\nvar _Button = __webpack_require__(/*! ./Button.js */ \"./src/Button.js\");\n\nvar _Button2 = _interopRequireDefault(_Button);\n\nvar _LiveBackground = __webpack_require__(/*! ./LiveBackground.js */ \"./src/LiveBackground.js\");\n\nvar _LiveBackground2 = _interopRequireDefault(_LiveBackground);\n\nvar _tween = __webpack_require__(/*! @tweenjs/tween.js */ \"./node_modules/@tweenjs/tween.js/src/Tween.js\");\n\nvar _tween2 = _interopRequireDefault(_tween);\n\nvar _Connection = __webpack_require__(/*! ./Connection.js */ \"./src/Connection.js\");\n\nvar _Connection2 = _interopRequireDefault(_Connection);\n\nvar _AlertMessage = __webpack_require__(/*! ./AlertMessage.js */ \"./src/AlertMessage.js\");\n\nvar _AlertMessage2 = _interopRequireDefault(_AlertMessage);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * Loading screen\n *\n * @date 13 June 2018\n * @author HyunJun Kim\n */\nvar LoginScreen = function (_Screen) {\n  _inherits(LoginScreen, _Screen);\n\n  function LoginScreen() {\n    _classCallCheck(this, LoginScreen);\n\n    return _possibleConstructorReturn(this, (LoginScreen.__proto__ || Object.getPrototypeOf(LoginScreen)).apply(this, arguments));\n  }\n\n  _createClass(LoginScreen, [{\n    key: \"onInit\",\n    value: function onInit() {\n      var _this2 = this;\n\n      this.graphics = {\n        background: new _LiveBackground2.default(this.getWidth(), this.getHeight()),\n        logo: new PIXI.Sprite(_Asset2.default.graphics[\"logo\"]),\n        mountains: new PIXI.Container(),\n        clouds: new PIXI.Container(),\n        bird: new PIXI.Sprite(_Asset2.default.graphics[\"deco-bird\"]),\n        loginButton: new _Button2.default(_Asset2.default.graphics[\"button-login\"]),\n        loginAsGuestButton: new _Button2.default(_Asset2.default.graphics[\"button-guest\"]),\n        alertMessage: new _AlertMessage2.default()\n      };\n\n      this.graphics.logo.x = 1300;\n      this.graphics.logo.y = 85;\n\n      // Draw mountain\n      this.cloudList = [];\n\n      this.drawMountains();\n      this.drawClouds();\n\n      this.graphics.bird.x = 1370;\n      this.graphics.bird.y = 500;\n      this.graphics.bird.anchor.set(0.5, 0.5);\n\n      this.graphics.loginButton.x = 330;\n      this.graphics.loginButton.y = 850;\n      this.graphics.loginButton.disabled = true;\n\n      this.graphics.loginAsGuestButton.x = 750;\n      this.graphics.loginAsGuestButton.y = 850;\n\n      this.root.addChild(this.graphics.background);\n      this.root.addChild(this.graphics.logo);\n      this.root.addChild(this.graphics.mountains);\n      this.root.addChild(this.graphics.clouds);\n      this.root.addChild(this.graphics.bird);\n      this.root.addChild(this.graphics.loginButton);\n      this.root.addChild(this.graphics.loginAsGuestButton);\n      this.root.addChild(this.graphics.alertMessage);\n\n      this.graphics.loginAsGuestButton.clicked(function () {\n\n        _Connection2.default.signin(\"auto\", \"auto\", function (response) {\n\n          // Success\n          if (response.success) {\n            _this2.context.switchScreen(\"main\");\n          }\n\n          // Signin failed\n          else {\n\n              switch (response.error) {\n                case \"wrong password\":\n                  _this2.graphics.alertMessage.show(\"패스워드가 잘못되었습니다\", 2000);\n                  break;\n                case \"id unmatched\":\n                  _this2.graphics.alertMessage.show(\"존재하지 않는 계정입니다\", 2000);\n                  break;\n                case \"already signed\":\n                  _this2.graphics.alertMessage.show(\"이미 로그인되어 있는 계정입니다\", 2000);\n                  break;\n                case \"not enough accounts\":\n                  _this2.graphics.alertMessage.show(\"게스트 계정이 부족합니다\", 2000);\n                  break;\n              }\n            }\n        });\n      });\n\n      _Asset2.default.sounds[\"loginSound\"].play({\n        loop: true,\n        singleInstance: true\n      });\n    }\n  }, {\n    key: \"onInactive\",\n    value: function onInactive() {\n      // Clean-up\n      _Asset2.default.graphics[\"deco-mountain\"].destroy(true);\n    }\n  }, {\n    key: \"onUpdate\",\n    value: function onUpdate(deltaTime) {\n      this.graphics.background.update(deltaTime);\n\n      this.updateClouds(deltaTime);\n      this.updateBirds(deltaTime);\n    }\n  }, {\n    key: \"drawMountains\",\n    value: function drawMountains() {\n      for (var i = 0; i < 15; i++) {\n        var mountain = new PIXI.Sprite(_Asset2.default.graphics[\"deco-mountain\"]);\n        mountain.anchor.set(0.5, 1);\n        mountain.x = this.getWidth() * Math.random();\n        mountain.y = this.getHeight() + 200 + Math.random() * 200;\n        mountain.scale.set(0.4 + Math.random() * 0.9, 0.4 + Math.random() * 1);\n        mountain.alpha = 0.4 + Math.random() * 0.3;\n        this.graphics.mountains.addChild(mountain);\n      }\n    }\n  }, {\n    key: \"drawClouds\",\n    value: function drawClouds() {\n      for (var i = 0; i < 15; i++) {\n        var cloud = new PIXI.Sprite(Math.random() > 0.5 ? _Asset2.default.graphics[\"deco-cloud1\"] : _Asset2.default.graphics[\"deco-cloud2\"]);\n        cloud.anchor.set(0.5, 0.5);\n        cloud.x = this.getWidth() * Math.random();\n        cloud.y = this.getHeight() + 300 - 500 * Math.random();\n        var randomScale = 0.5 + 0.7 * Math.random();\n        cloud.scale.set(randomScale, randomScale);\n        cloud.alpha = 0.4 + Math.random() * 0.3;\n        this.graphics.clouds.addChild(cloud);\n        this.cloudList.push(cloud);\n      }\n    }\n  }, {\n    key: \"updateClouds\",\n    value: function updateClouds(deltaTime) {\n      // Update clouds\n      for (var i = 0; i < this.cloudList.length; i++) {\n        var cloud = this.cloudList[i];\n        cloud.x += cloud.alpha * 3 * deltaTime;\n        if (cloud.x - cloud.width / 2 > this.getWidth()) {\n          cloud.x = -cloud.width / 2;\n        }\n      }\n    }\n  }, {\n    key: \"updateBirds\",\n    value: function updateBirds(deltaTime) {\n      if (Math.random() > 0.92) {\n        var tween = new _tween2.default.Tween(this.graphics.bird).to({\n          rotation: (Math.random() > 0.5 ? 1 : -1) * deltaTime * (Math.random() * 10) * (Math.PI / 180) + 20 * (Math.PI / 180),\n          x: 1320 + 100 * Math.random(),\n          y: 600 + 60 * Math.random()\n        }, 500).easing(_tween2.default.Easing.Quadratic.Out).start();\n\n        /*\n              this.graphics.bird.rotation += ((Math.random() > 0.5 ? 1 : -1) * deltaTime) * (Math.PI / 180);\n              if (Math.abs(this.graphics.bird.rotation) > (Math.PI / 180) * 5) {\n                this.graphics.bird.rotation = 0;\n              }\n              this.graphics.bird.y += Math.random() > 0.5 ? 1 : -1;\n              this.graphics.bird.y = Math.max(Math.min(this.graphics.bird.y, 510), 490);*/\n      }\n    }\n  }]);\n\n  return LoginScreen;\n}(_Screen3.default);\n\nexports.default = LoginScreen;\n\n//# sourceURL=webpack:///./src/LoginScreen.js?");

/***/ }),

/***/ "./src/MainScreen.js":
/*!***************************!*\
  !*** ./src/MainScreen.js ***!
  \***************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _pixi = __webpack_require__(/*! pixi.js */ \"./node_modules/pixi.js/lib/index.js\");\n\nvar PIXI = _interopRequireWildcard(_pixi);\n\nvar _Screen2 = __webpack_require__(/*! ./Screen.js */ \"./src/Screen.js\");\n\nvar _Screen3 = _interopRequireDefault(_Screen2);\n\nvar _Button = __webpack_require__(/*! ./Button.js */ \"./src/Button.js\");\n\nvar _Button2 = _interopRequireDefault(_Button);\n\nvar _Asset = __webpack_require__(/*! ./Asset.js */ \"./src/Asset.js\");\n\nvar _Asset2 = _interopRequireDefault(_Asset);\n\nvar _CharacterCard = __webpack_require__(/*! ./CharacterCard.js */ \"./src/CharacterCard.js\");\n\nvar _CharacterCard2 = _interopRequireDefault(_CharacterCard);\n\nvar _CharacterData = __webpack_require__(/*! ./CharacterData.js */ \"./src/CharacterData.js\");\n\nvar _CharacterData2 = _interopRequireDefault(_CharacterData);\n\nvar _CharacterCardDeck = __webpack_require__(/*! ./CharacterCardDeck.js */ \"./src/CharacterCardDeck.js\");\n\nvar _CharacterCardDeck2 = _interopRequireDefault(_CharacterCardDeck);\n\nvar _CharacterCardCollection = __webpack_require__(/*! ./CharacterCardCollection.js */ \"./src/CharacterCardCollection.js\");\n\nvar _CharacterCardCollection2 = _interopRequireDefault(_CharacterCardCollection);\n\nvar _CharacterCardInspector = __webpack_require__(/*! ./CharacterCardInspector.js */ \"./src/CharacterCardInspector.js\");\n\nvar _CharacterCardInspector2 = _interopRequireDefault(_CharacterCardInspector);\n\nvar _MatchFindingBox = __webpack_require__(/*! ./MatchFindingBox.js */ \"./src/MatchFindingBox.js\");\n\nvar _MatchFindingBox2 = _interopRequireDefault(_MatchFindingBox);\n\nvar _LiveBackground = __webpack_require__(/*! ./LiveBackground.js */ \"./src/LiveBackground.js\");\n\nvar _LiveBackground2 = _interopRequireDefault(_LiveBackground);\n\nvar _Connection = __webpack_require__(/*! ./Connection.js */ \"./src/Connection.js\");\n\nvar _Connection2 = _interopRequireDefault(_Connection);\n\nvar _AlertMessage = __webpack_require__(/*! ./AlertMessage.js */ \"./src/AlertMessage.js\");\n\nvar _AlertMessage2 = _interopRequireDefault(_AlertMessage);\n\nvar _CharacterDatabase = __webpack_require__(/*! ./CharacterDatabase.js */ \"./src/CharacterDatabase.js\");\n\nvar _CharacterDatabase2 = _interopRequireDefault(_CharacterDatabase);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * Main screen\n *\n * @date 13 June 2018\n * @author HyunJun Kim\n */\nvar MainScreen = function (_Screen) {\n  _inherits(MainScreen, _Screen);\n\n  function MainScreen() {\n    _classCallCheck(this, MainScreen);\n\n    return _possibleConstructorReturn(this, (MainScreen.__proto__ || Object.getPrototypeOf(MainScreen)).apply(this, arguments));\n  }\n\n  _createClass(MainScreen, [{\n    key: \"onInit\",\n    value: function onInit() {\n      var _this2 = this;\n\n      // Container for the sprites\n      this.graphics = {\n        background: new _LiveBackground2.default(this.getWidth(), this.getHeight()),\n        findMatchButton: new _Button2.default(_Asset2.default.graphics[\"button-find-match\"]),\n        changePartyButton: new _Button2.default(_Asset2.default.graphics[\"button-change-party\"]),\n        backButton: new _Button2.default(_Asset2.default.graphics[\"button-back\"]),\n        coinIcon: new PIXI.Sprite(_Asset2.default.graphics[\"icon-coin\"]),\n        rankIcon: new PIXI.Sprite(_Asset2.default.graphics[\"icon-rank0\"]),\n        playerNameText: new PIXI.Text(\"Unnamed\", {\n          fontFamily: \"Arial\",\n          fontSize: 52,\n          fill: 0xffffff,\n          align: \"left\"\n        }),\n        coinText: new PIXI.Text(\"300,000\", {\n          fontFamily: \"Arial\",\n          fontSize: 52,\n          fill: 0xffffff,\n          align: \"left\"\n        }),\n        cardDeck: new _CharacterCardDeck2.default(),\n        cardCollection: new _CharacterCardCollection2.default(),\n        cardInspector: new _CharacterCardInspector2.default(),\n        matchFindingBox: new _MatchFindingBox2.default(),\n        alertMessage: new _AlertMessage2.default()\n      };\n\n      // Set ui positions\n      this.graphics.coinIcon.x = 1490;\n      this.graphics.coinIcon.y = 80;\n\n      this.graphics.rankIcon.x = 130;\n      this.graphics.rankIcon.y = 80;\n\n      this.graphics.findMatchButton.x = 1630;\n      this.graphics.findMatchButton.y = 920;\n\n      this.graphics.changePartyButton.x = 290;\n      this.graphics.changePartyButton.y = 920;\n\n      this.graphics.backButton.x = this.graphics.changePartyButton.x;\n      this.graphics.backButton.y = this.graphics.changePartyButton.y;\n\n      this.graphics.playerNameText.x = 215;\n      this.graphics.playerNameText.y = 80;\n\n      this.graphics.coinText.x = 1580;\n      this.graphics.coinText.y = 80;\n\n      this.graphics.cardDeck.x = 430;\n      this.graphics.cardDeck.y = 550;\n\n      this.graphics.cardCollection.x = 0;\n      this.graphics.cardCollection.y = 550;\n\n      this.graphics.cardInspector.x = 0;\n      this.graphics.cardInspector.y = 550;\n\n      this.root.addChild(this.graphics.background);\n      this.root.addChild(this.graphics.coinIcon);\n      this.root.addChild(this.graphics.rankIcon);\n      this.root.addChild(this.graphics.playerNameText);\n      this.root.addChild(this.graphics.coinText);\n\n      this.root.addChild(this.graphics.cardDeck);\n      this.root.addChild(this.graphics.cardCollection);\n      this.root.addChild(this.graphics.cardInspector);\n      this.root.addChild(this.graphics.matchFindingBox);\n\n      this.root.addChild(this.graphics.findMatchButton);\n      this.root.addChild(this.graphics.changePartyButton);\n      this.root.addChild(this.graphics.backButton);\n      this.root.addChild(this.graphics.alertMessage);\n\n      this.graphics.backButton.visible = false;\n\n      this.graphics.cardDeck.show(true);\n\n      this.cardInspectMode = false;\n      this.matchFindingMode = false;\n\n      this.graphics.changePartyButton.clicked(function () {\n        if (_this2.graphics.cardDeck.hide(true)) {\n          if (_this2.graphics.cardCollection.show(true)) {\n            _this2.graphics.changePartyButton.visible = false;\n            _this2.graphics.findMatchButton.visible = false;\n            _this2.graphics.backButton.visible = true;\n          }\n        }\n      });\n\n      this.graphics.backButton.clicked(function () {\n        if (_this2.matchFindingMode) {\n          if (_this2.graphics.matchFindingBox.hide()) {\n            if (_this2.graphics.cardDeck.show(false)) {\n              _this2.graphics.changePartyButton.visible = true;\n              _this2.graphics.backButton.visible = false;\n              _this2.graphics.findMatchButton.visible = true;\n              _this2.matchFindingMode = false;\n              _this2.graphics.background.emphasize = false;\n              _Asset2.default.sounds[\"loginSound\"].filters = null;\n            }\n          }\n        } else if (_this2.cardInspectMode) {\n          if (_this2.graphics.cardInspector.hide(false)) {\n            if (_this2.graphics.cardCollection.show(false)) {\n              _this2.cardInspectMode = false;\n            }\n          }\n        } else {\n          if (_this2.graphics.cardCollection.hide(false)) {\n            if (_this2.graphics.cardDeck.show(false)) {\n              _this2.graphics.changePartyButton.visible = true;\n              _this2.graphics.backButton.visible = false;\n              _this2.graphics.findMatchButton.visible = true;\n            }\n          }\n        }\n      });\n\n      this.graphics.cardDeck.onCardOrderChanged(function () {\n        _Connection2.default.partyCode = _this2.graphics.cardDeck.partyDataInIndex.join(\",\");\n        _Connection2.default.updateUserData(_Connection2.default.userId, {\n          party: _Connection2.default.partyCode\n        });\n      });\n\n      this.graphics.cardCollection.onCardSelect(function (cardData) {\n        if (_this2.graphics.cardCollection.hide(true)) {\n          _this2.graphics.cardInspector.setCharacterCard(cardData);\n          _this2.graphics.cardInspector.setParty(_this2.graphics.cardDeck.partyData);\n          if (_this2.graphics.cardInspector.show(true)) {\n            _this2.cardInspectMode = true;\n          }\n        }\n      });\n\n      this.graphics.cardInspector.onCharacterSelect(function (cardData, index) {\n        _this2.graphics.cardDeck.setPartyMemberAt(cardData, index);\n        _this2.graphics.cardCollection.setCardsInUse(_this2.graphics.cardDeck.partyData);\n        _Connection2.default.partyCode = _this2.graphics.cardDeck.partyDataInIndex.join(\",\");\n        _Connection2.default.updateUserData(_Connection2.default.userId, {\n          party: _Connection2.default.partyCode\n        });\n        if (_this2.graphics.cardInspector.hide(false)) {\n          if (_this2.graphics.cardCollection.show(false)) {\n            _this2.cardInspectMode = false;\n          }\n        }\n      });\n\n      this.graphics.findMatchButton.clicked(function () {\n        if (_this2.graphics.cardDeck.hide(true)) {\n          if (_this2.graphics.matchFindingBox.show()) {\n\n            _Connection2.default.findMatch(2, false, function (data) {\n              if (data.success) {\n                _this2.context.switchScreen(\"gameplay\");\n              }\n            });\n            _this2.matchFindingMode = true;\n            _this2.graphics.background.emphasize = true;\n            _this2.graphics.changePartyButton.visible = false;\n            _this2.graphics.findMatchButton.visible = false;\n            _this2.graphics.backButton.visible = true;\n            _Asset2.default.sounds[\"loginSound\"].filters = [new PIXI.sound.filters.TelephoneFilter()];\n            _Connection2.default.findMatch(4, false, function (data) {\n              if (data.success) {\n                _this2.context.switchScreen(\"gameplay\");\n              }\n            });\n          }\n        }\n      });\n\n      this.graphics.matchFindingBox.excludeTeamButton.clicked(function () {\n        _this2.fadeIn(function () {\n          _this2.context.switchScreen(\"gameplay\");\n        });\n      });\n    }\n  }, {\n    key: \"onActive\",\n    value: function onActive() {\n      var _this3 = this;\n\n      this.fadeOut();\n\n      _Connection2.default.fetchUserData(_Connection2.default.userId, function (response) {\n        if (response.success) {\n          // Load name and money\n          _this3.graphics.playerNameText.text = response.userData.user_id;\n          _this3.graphics.coinText.text = response.userData.coin;\n\n          // Load party\n          _Connection2.default.partyCode = response.userData.party;\n          var rawPartyData = response.userData.party.split(\",\");\n          var partyData = [];\n\n          for (var i = 0; i < rawPartyData.length; i++) {\n            var cardNo = Number(rawPartyData[i]);\n            partyData.push(_CharacterDatabase2.default[cardNo]);\n          }\n\n          // Init card decks\n          _this3.graphics.cardDeck.setParty(partyData);\n\n          // Load card collection\n          var rawCharacterCollectionData = response.userData.card.split(\",\");\n          var characterCollectionData = [];\n\n          for (var _i = 0; _i < rawCharacterCollectionData.length; _i++) {\n            var _cardNo = Number(rawCharacterCollectionData[_i]);\n            characterCollectionData.push(_CharacterDatabase2.default[_cardNo]);\n          }\n\n          _this3.graphics.cardCollection.setCharacterCards(characterCollectionData);\n          _this3.graphics.cardCollection.setCardsInUse(partyData);\n        } else {\n          _this3.graphics.alertMessage.show(\"유저 정보를 불러오지 못했습니다\", 1000);\n        }\n      });\n    }\n  }, {\n    key: \"onUpdate\",\n    value: function onUpdate(deltaTime) {\n      // Live background\n      this.graphics.background.update(deltaTime);\n    }\n  }, {\n    key: \"_onFindMatch\",\n    value: function _onFindMatch(data) {\n      if (data.success) {\n        this.context.switchScreen(\"gameplay\");\n      }\n    }\n  }]);\n\n  return MainScreen;\n}(_Screen3.default);\n\nexports.default = MainScreen;\n\n//# sourceURL=webpack:///./src/MainScreen.js?");

/***/ }),

/***/ "./src/MatchFindingBox.js":
/*!********************************!*\
  !*** ./src/MatchFindingBox.js ***!
  \********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _pixi = __webpack_require__(/*! pixi.js */ \"./node_modules/pixi.js/lib/index.js\");\n\nvar PIXI = _interopRequireWildcard(_pixi);\n\nvar _tween = __webpack_require__(/*! @tweenjs/tween.js */ \"./node_modules/@tweenjs/tween.js/src/Tween.js\");\n\nvar TWEEN = _interopRequireWildcard(_tween);\n\nvar _Configuration = __webpack_require__(/*! ./Configuration */ \"./src/Configuration.js\");\n\nvar _Configuration2 = _interopRequireDefault(_Configuration);\n\nvar _ToggleButton = __webpack_require__(/*! ./ToggleButton */ \"./src/ToggleButton.js\");\n\nvar _ToggleButton2 = _interopRequireDefault(_ToggleButton);\n\nvar _Asset = __webpack_require__(/*! ./Asset */ \"./src/Asset.js\");\n\nvar _Asset2 = _interopRequireDefault(_Asset);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar MatchFindingBox = function (_PIXI$Container) {\n  _inherits(MatchFindingBox, _PIXI$Container);\n\n  function MatchFindingBox() {\n    _classCallCheck(this, MatchFindingBox);\n\n    var _this = _possibleConstructorReturn(this, (MatchFindingBox.__proto__ || Object.getPrototypeOf(MatchFindingBox)).call(this));\n\n    _this.initialize();\n    return _this;\n  }\n\n  _createClass(MatchFindingBox, [{\n    key: \"initialize\",\n    value: function initialize() {\n      this.visible = false;\n\n      this.matchFindingText = new PIXI.Text(\"매치 찾는 중\", {\n        fontFamily: \"Arial\",\n        fontWeight: \"bolder\",\n        letterSpacing: -5,\n        fontSize: 100,\n        fill: 0xffffff,\n        align: \"left\"\n      });\n\n      this.matchFindingText.anchor.set(0.5, 0.5);\n\n      this.matchFindingText.x = _Configuration2.default.baseResolution.width / 2;\n      this.matchFindingText.y = 360;\n\n      this.optionContainer = new PIXI.Container();\n\n      this.pannel = new PIXI.Graphics();\n      this.pannel.beginFill(0xfff2d7);\n      this.pannel.drawRoundedRect(0, 0, 830, 430, 15);\n      this.pannel.endFill();\n\n      this.helpText = new PIXI.Text(\"아래 조건에 맞는 매치만 찾기\", {\n        fontFamily: \"Arial\",\n        fontSize: 32,\n        letterSpacing: -1,\n        fill: 0x999999,\n        align: \"left\"\n      });\n\n      this.excludeTeamButton = new _ToggleButton2.default(_Asset2.default.graphics[\"button-off-exclude-teams\"], _Asset2.default.graphics[\"button-on-exclude-teams\"]);\n      this.exclude4pButton = new _ToggleButton2.default(_Asset2.default.graphics[\"button-off-exclude-4p\"], _Asset2.default.graphics[\"button-on-exclude-4p\"]);\n\n      this.helpText.x = 70;\n      this.helpText.y = 80;\n\n      this.excludeTeamButton.x = this.pannel.width / 2 - 180;\n      this.excludeTeamButton.y = 260;\n\n      this.exclude4pButton.x = this.pannel.width / 2 + 180;\n      this.exclude4pButton.y = 260;\n\n      this.optionContainer.addChild(this.pannel);\n      this.optionContainer.addChild(this.helpText);\n      this.optionContainer.addChild(this.excludeTeamButton);\n      this.optionContainer.addChild(this.exclude4pButton);\n\n      this.optionContainer.x = (_Configuration2.default.baseResolution.width - 830) / 2;\n      this.optionContainer.y = 660;\n\n      this.addChild(this.matchFindingText);\n      this.addChild(this.optionContainer);\n    }\n  }, {\n    key: \"show\",\n    value: function show() {\n      var _this2 = this;\n\n      if (!this.visible) {\n        this.visible = true;\n        this.optionContainer.y = 1000;\n        this.matchFindingText.y = 0;\n        var tween = new TWEEN.Tween(this.optionContainer).to({\n          y: 660\n        }, 400).easing(TWEEN.Easing.Quadratic.Out).onComplete(function () {\n          _this2.hidden = false;\n        }).start();\n        var tween2 = new TWEEN.Tween(this.matchFindingText).to({\n          y: 360\n        }, 400).easing(TWEEN.Easing.Quadratic.Out).start();\n        return true;\n      }\n      return false;\n    }\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      var _this3 = this;\n\n      if (!this.hidden) {\n        this.hidden = true;\n        var tween = new TWEEN.Tween(this.optionContainer).to({\n          y: 1200\n        }, 400).easing(TWEEN.Easing.Quadratic.Out).onComplete(function () {\n          _this3.visible = false;\n        }).start();\n        var tween2 = new TWEEN.Tween(this.matchFindingText).to({\n          y: -50\n        }, 400).easing(TWEEN.Easing.Quadratic.Out).start();\n        return true;\n      }\n      return false;\n    }\n  }]);\n\n  return MatchFindingBox;\n}(PIXI.Container);\n\nexports.default = MatchFindingBox;\n\n//# sourceURL=webpack:///./src/MatchFindingBox.js?");

/***/ }),

/***/ "./src/Obstacle.js":
/*!*************************!*\
  !*** ./src/Obstacle.js ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _pixi = __webpack_require__(/*! pixi.js */ \"./node_modules/pixi.js/lib/index.js\");\n\nvar PIXI = _interopRequireWildcard(_pixi);\n\nvar _Asset = __webpack_require__(/*! ./Asset.js */ \"./src/Asset.js\");\n\nvar _Asset2 = _interopRequireDefault(_Asset);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Obstacle = function (_PIXI$Container) {\n  _inherits(Obstacle, _PIXI$Container);\n\n  function Obstacle(obstacleId, x, y) {\n    _classCallCheck(this, Obstacle);\n\n    var _this = _possibleConstructorReturn(this, (Obstacle.__proto__ || Object.getPrototypeOf(Obstacle)).call(this));\n\n    _this.obstacleId = obstacleId;\n\n    _this.coordinate = { x: x, y: y };\n\n    _this._graphics = null;\n    _this._graphicsTexture = null;\n\n    _this._loadGraphics();\n    return _this;\n  }\n\n  _createClass(Obstacle, [{\n    key: \"_loadGraphics\",\n    value: function _loadGraphics() {\n      var pivotX = 128;\n      var pivotY = 0;\n\n      switch (this.obstacleId) {\n        case 1:\n          this._graphicsTexture = _Asset2.default.graphics[\"relic-red\"];\n          pivotY = 114;\n          break;\n        case 2:\n          this._graphicsTexture = _Asset2.default.graphics[\"relic-green\"];\n          pivotY = 114;\n          break;\n        case 3:\n          this._graphicsTexture = _Asset2.default.graphics[\"relic-yellow\"];\n          pivotY = 114;\n          break;\n        case 4:\n          this._graphicsTexture = _Asset2.default.graphics[\"obstacle-tree2\"];\n          pivotY = 114;\n          break;\n        case 2:\n          this._graphicsTexture = _Asset2.default.graphics[\"obstacle-tree2\"];\n          pivotY = 114;\n          break;\n        default:\n          this._graphicsTexture = _Asset2.default.graphics[\"obstacle-tree3\"];\n          pivotY = 114;\n      }\n\n      this._graphics = new PIXI.Sprite(this._graphicsTexture);\n      this._graphics.anchor.set(0.5, 1);\n      this._graphics.x = pivotX;\n      this._graphics.y = pivotY;\n\n      this.addChild(this._graphics);\n    }\n  }, {\n    key: \"graphics\",\n    get: function get() {\n      return this._graphics;\n    }\n  }]);\n\n  return Obstacle;\n}(PIXI.Container);\n\nexports.default = Obstacle;\n\n//# sourceURL=webpack:///./src/Obstacle.js?");

/***/ }),

/***/ "./src/Party.js":
/*!**********************!*\
  !*** ./src/Party.js ***!
  \**********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _pixi = __webpack_require__(/*! pixi.js */ \"./node_modules/pixi.js/lib/index.js\");\n\nvar PIXI = _interopRequireWildcard(_pixi);\n\nvar _Character = __webpack_require__(/*! ./Character.js */ \"./src/Character.js\");\n\nvar _Character2 = _interopRequireDefault(_Character);\n\nvar _Configuration = __webpack_require__(/*! ./Configuration.js */ \"./src/Configuration.js\");\n\nvar _Configuration2 = _interopRequireDefault(_Configuration);\n\nvar _Connection = __webpack_require__(/*! ./Connection.js */ \"./src/Connection.js\");\n\nvar _Connection2 = _interopRequireDefault(_Connection);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Party = function () {\n  function Party(id, userId, territoryColor) {\n    var _this = this;\n\n    _classCallCheck(this, Party);\n\n    /**\n     * Party identifier\n     */\n    this.id = id;\n    this.name = userId;\n    this.territoryColor = territoryColor;\n\n    // Start coordinate\n    this._startCoordinate = null;\n    this._startDirection = null;\n\n    /**\n     * Members of party\n     */\n    this.head = null;\n    this.members = [];\n    this._eliminatedMembers = [];\n\n    // Party speed\n    this._speed = 0;\n    this._speedMultiplier = 0.7;\n    this._speedGain = 0;\n    this._speedOutdated = true;\n\n    this._buffs = [];\n\n    this._permStats = {\n      kills: 0,\n      relics: 0,\n      score: 0,\n      time: 0\n    };\n\n    this.stats = {\n      kills: 0,\n      relics: 0,\n      score: 9,\n      time: 0\n    };\n\n    // Party relic\n    this._relics = [];\n    this._relicSprites = [];\n    this._ticker = 0;\n\n    // Party direction\n    this._reached = false;\n    this._displaced = false;\n    this._scheduledDirection = -1;\n    this._scheduledPath = [];\n\n    // Party halt\n    this._halted = false;\n    this._haltTimeLeft = 0;\n    this._haltCallback = null;\n\n    // Path history\n    this._lastStep = null;\n    this._disableArrowGuide = true;\n\n    // Event listeners\n    this._onEliminateHandler = [];\n    this._onDamageHandler = [];\n    this._onDisplacedHandler = [];\n\n    // Stop jump when damaged\n    this.onDamage(function () {\n      for (var i in _this.members) {\n        _this.members[i].jump = false;\n      }\n    });\n  }\n\n  _createClass(Party, [{\n    key: \"update\",\n    value: function update(deltaTime) {\n      if (this._displaced) {\n        if (this._halted) {\n          this._haltTimeLeft -= deltaTime;\n          if (this._haltTimeLeft <= 0) {\n            this._halted = false;\n            this._haltCallback();\n          }\n        }\n        this._updateRelics();\n        if (!this._halted) {\n          if (this._isArrived(deltaTime)) {\n            this._finishStep();\n          } else {\n            this._proceedStep(deltaTime);\n          }\n        }\n      }\n    }\n  }, {\n    key: \"schedulePath\",\n    value: function schedulePath(path) {\n      this._scheduledPath = this._scheduledPath.concat(path);\n    }\n  }, {\n    key: \"undoPath\",\n    value: function undoPath(path) {\n      for (var i = 0; i < path.length; i++) {\n        this._scheduledPath.pop();\n      }\n    }\n  }, {\n    key: \"clearPath\",\n    value: function clearPath() {\n      this._scheduledPath = [];\n    }\n  }, {\n    key: \"onEliminate\",\n    value: function onEliminate(handler) {\n      this._onEliminateHandler.push(handler);\n    }\n  }, {\n    key: \"onDisplaced\",\n    value: function onDisplaced(handler) {\n      this._onDisplacedHandler.push(handler);\n    }\n  }, {\n    key: \"onDamage\",\n    value: function onDamage(handler) {\n      this._onDamageHandler.push(handler);\n    }\n  }, {\n    key: \"addBuff\",\n    value: function addBuff(buff) {\n      var canDuplicate = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n      if (!canDuplicate) {\n        if (this.hasBuff(buff) > 0) {\n          return;\n        }\n      }\n      this._buffs.push(buff);\n    }\n  }, {\n    key: \"removeBuff\",\n    value: function removeBuff(buff) {\n      var index = this._buffs.indexOf(buff);\n      if (index >= 0) {\n        this._buffs.splice(index, 1);\n      }\n    }\n  }, {\n    key: \"hasBuff\",\n    value: function hasBuff(buff) {\n      var count = 0;\n      for (var i = 0; i < this._buffs.length; ++i) {\n        if (this._buffs[i] == buff) {\n          count++;\n        }\n      }\n      return count;\n    }\n\n    /**\n     * Get direction of this party\n     */\n\n  }, {\n    key: \"_getDirection\",\n    value: function _getDirection(current, next) {\n      if (current.x < next.x) return 0;else if (current.x > next.x) return 2;else if (current.y < next.y) return 3;else return 1;\n    }\n  }, {\n    key: \"gainRelic\",\n    value: function gainRelic(relic) {\n      var relicSprite = new PIXI.Sprite(relic.graphics.texture);\n      relicSprite.scale.set(0.4, 0.4);\n      relicSprite.anchor.set(0.5, 0.5);\n      relicSprite.theta = Math.random() * 360 * Math.PI / 180;\n      relicSprite.speed = 0.05 * Math.random() + 0.05;\n      this.head.addChild(relicSprite);\n\n      this._relics.push(relic);\n      this._relicSprites.push(relicSprite);\n      this._updateRelics();\n    }\n  }, {\n    key: \"loseRelic\",\n    value: function loseRelic(relic) {\n      var index = this._relics.indexOf(relic);\n      if (index >= 0) {\n        var relicSprite = this._relicSprites[index];\n        this.head.removeChild(relicSprite);\n\n        this._relics.splice(index, 1);\n        this._relicSprites.splice(index, 1);\n      }\n    }\n  }, {\n    key: \"setStartCoordinate\",\n    value: function setStartCoordinate(x, y, direction) {\n      this._startCoordinate = {\n        x: x,\n        y: y\n      };\n      this._startDirection = direction;\n    }\n\n    /**\n     * Add new member to party\n     *\n     * @param {Character} member\n     */\n\n  }, {\n    key: \"addMember\",\n    value: function addMember(member) {\n      if (this.members.length < 1) {\n        this.head = member;\n        this.head.head = true;\n        if (this.head.meta.buff.type == \"basic\" || this.head.meta.buff.type == \"testament\") {\n          this.addBuff(member.meta.buff.name);\n        }\n      }\n      if (member.meta.buff != null && member.meta.buff.type == \"support\") {\n        this.addBuff(member.meta.buff.name);\n      }\n      member.arrowGuideColor = this.territoryColor;\n      this.members.push(member);\n      this._speedOutdated = true;\n    }\n\n    /**\n     * Eliminate member from party\n     *\n     * @param {Character} member\n     */\n\n  }, {\n    key: \"eliminateMember\",\n    value: function eliminateMember(member) {\n      var i = this.members.indexOf(member);\n\n      if (i >= 0) {\n        // Remove from list\n        this.members.splice(i, 1);\n        this._eliminatedMembers.push(member);\n\n        // Move to permstats\n        this._permStats.kills += this.stats.kills;\n        this._permStats.relics += this.stats.relics;\n        this.stats.kills = 0;\n        this.stats.relics = 0;\n\n        // Disable graphics\n        member.jump = false;\n        member.dead = true;\n\n        // If none of members left,\n        if (this.members.length > 0) {\n          // If removed member was head, replace head\n          if (i == 0) {\n            // Pass down relics\n            for (var j = 0; j < this._relics.length; j++) {\n              var relic = this._relicSprites[j];\n              member.removeChild(relic);\n              this.members[0].addChild(relic);\n            }\n\n            member.head = false;\n            this.members[0].head = true;\n            this.members[0].coordinate = member.coordinate;\n            this.members[0].direction = member.direction;\n            this.head = this.members[0];\n\n            if (this.head.meta.buff.type == \"basic\" || this.head.meta.buff.type == \"testament\") {\n              this.addBuff(this.head.meta.buff.name);\n            }\n          }\n        }\n        // Dispatch event\n        for (var _j = 0; _j < this._onEliminateHandler.length; _j++) {\n          this._onEliminateHandler[_j](member, this.members.length < 1);\n        }\n\n        if (member.meta.buff != null) {\n          this.removeBuff(member.meta.buff.name);\n        }\n        this._speedOutdated = true;\n        return true;\n      }\n      return false;\n    }\n\n    /**\n     * Damage this party!\n     *\n     * @param {Integer} amount\n     */\n\n  }, {\n    key: \"damage\",\n    value: function damage(amount) {\n      if (this.members.length > 0) {\n        this.members[0].health -= amount;\n\n        // Dispatch event\n        for (var j = 0; j < this._onDamageHandler.length; j++) {\n          this._onDamageHandler[j](this.members[0], amount);\n        }\n\n        // Eliminated!\n        if (this.members[0].health <= 0) {\n          this.eliminateMember(this.members[0]);\n          return true;\n        }\n      }\n      return false;\n    }\n\n    /**\n     * Heal this party!\n     *\n     * @param {Integer} amount\n     */\n\n  }, {\n    key: \"heal\",\n    value: function heal(amount) {\n      if (this.members.length > 0) {\n        for (var i = 0; i < this.members.length; i++) {\n          if (this.members[i].health < this.members[i].meta.maxHealth) {\n            this.members[i].health += amount;\n            break;\n          }\n        }\n      }\n    }\n  }, {\n    key: \"displaceToStartCoordinate\",\n    value: function displaceToStartCoordinate() {\n      this.displace(this._startCoordinate, this._startDirection);\n    }\n  }, {\n    key: \"displace\",\n    value: function displace(coordinate, direction) {\n      // Initialize\n      this._displaced = true;\n      this._justDisplaced = true;\n      this.clearPath();\n\n      var position = this._translateCoordinate(coordinate);\n      this.head.direction = direction;\n      this.head.coordinate.x = coordinate.x;\n      this.head.coordinate.y = coordinate.y;\n      this.head.targetPosition.x = position.x;\n      this.head.targetPosition.y = position.y;\n      this.head.x = position.x;\n      this.head.y = position.y;\n\n      this.head.show();\n      this.head.jump = true;\n\n      for (var i = 1; i < this.members.length; i++) {\n        this.members[i].hide();\n        this.members[i].jump = false;\n      }\n      this._lastStep = null;\n\n      for (var _i = 0; _i < this._onDisplacedHandler.length; _i++) {\n        this._onDisplacedHandler[_i](coordinate);\n      }\n    }\n  }, {\n    key: \"halt\",\n    value: function halt(seconds, callback) {\n      this._halted = true;\n      this._haltTimeLeft = seconds * 60;\n      this._haltCallback = callback;\n    }\n  }, {\n    key: \"nextStep\",\n    value: function nextStep() {\n      this._reached = false;\n      if (this._hasScheduledDirection()) {\n        this._changeDirection();\n      }\n      this._targetForward(this.head);\n    }\n  }, {\n    key: \"_isArrived\",\n    value: function _isArrived(deltaTime) {\n      var destX = this.head.coordinate.x * _Configuration2.default.isometric.unitWidth / 2 - this.head.coordinate.y * _Configuration2.default.isometric.unitWidth / 2;\n\n      var charX = this.head.x;\n      var distanceLeft = this.head.direction < 2 ? destX - charX : charX - destX;\n\n      return Math.abs(this._getVelocity(deltaTime).x) >= distanceLeft;\n    }\n  }, {\n    key: \"_finishStep\",\n    value: function _finishStep() {\n      // Ignore function call when head coordinate did not changed\n      if (this._lastStep != null && this._lastStep.x == this.head.coordinate.x && this._lastStep.y == this.head.coordinate.y) {\n        return;\n      }\n\n      this._lastStep = this.head.coordinate.clone();\n\n      var position = void 0;\n      for (var i = this.members.length - 1; i >= 0; i--) {\n        var member = this.members[i];\n        if (i > 0) {\n          position = this.members[i - 1].targetPosition;\n          if (this.members[i - 1].jump) {\n            if (!member.jump && !this._justDisplaced) {\n              member.show();\n              member.jump = true;\n            }\n            member.direction = this.members[i - 1].direction;\n            member.coordinate = this.members[i - 1].coordinate.clone();\n          }\n        } else {\n          position = this._translateCoordinate(this.head.coordinate);\n        }\n        if (member.jump) {\n          member.targetPosition.x = position.x;\n          member.targetPosition.y = position.y;\n          member.x = member.targetPosition.x;\n          member.y = member.targetPosition.y;\n        }\n      }\n\n      this._reached = true;\n      this._justDisplaced = false;\n    }\n  }, {\n    key: \"_proceedStep\",\n    value: function _proceedStep(deltaTime) {\n      for (var i = this.members.length - 1; i >= 0; i--) {\n        var member = this.members[i];\n        if (!member.jump) {\n          continue;\n        }\n        var velocity = this._getVelocity(deltaTime, member.direction);\n        member.x += velocity.x;\n        member.y += velocity.y;\n      }\n    }\n  }, {\n    key: \"_hasScheduledDirection\",\n    value: function _hasScheduledDirection() {\n      return this._scheduledDirection >= 0;\n    }\n  }, {\n    key: \"_changeDirection\",\n    value: function _changeDirection() {\n      if (this._scheduledDirection >= 0) {\n        this.head.direction = this._scheduledDirection;\n        this._scheduledDirection = -1;\n      }\n    }\n  }, {\n    key: \"_targetForward\",\n    value: function _targetForward(member) {\n      switch (member.direction) {\n        case 0:\n          member.coordinate.x++;\n          break;\n        case 1:\n          member.coordinate.y--;\n          break;\n        case 2:\n          member.coordinate.x--;\n          break;\n        case 3:\n          member.coordinate.y++;\n          break;\n      }\n    }\n  }, {\n    key: \"_hasScheduledDirection\",\n    value: function _hasScheduledDirection() {\n      return this._scheduledPath.length > 0;\n    }\n  }, {\n    key: \"_changeDirection\",\n    value: function _changeDirection() {\n      if (this._scheduledPath.length > 0) {\n        this.head.direction = this.nextDirection;\n        this._scheduledPath.shift();\n      }\n    }\n  }, {\n    key: \"_getVelocity\",\n    value: function _getVelocity(deltaTime) {\n      var direction = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : -1;\n\n      var velocityX = (2 + this.speed) * deltaTime;\n      var velocityY = (2 + this.speed) / 1.722 * deltaTime;\n\n      if (direction < 0) {\n        direction = this.head.direction;\n      }\n\n      if (direction > 1) {\n        velocityX = -velocityX;\n      }\n\n      if (direction > 0 && direction < 3) {\n        velocityY = -velocityY;\n      }\n\n      return {\n        x: velocityX,\n        y: velocityY\n      };\n    }\n  }, {\n    key: \"_updateRelics\",\n    value: function _updateRelics() {\n      for (var i = 0; i < this._relicSprites.length; i++) {\n        var relic = this._relicSprites[i];\n        relic.theta += relic.speed;\n        relic.x = 128 + Math.cos(relic.theta) * 50;\n        relic.y = -60 + Math.sin(relic.theta) * 30;\n      }\n    }\n  }, {\n    key: \"_translateCoordinate\",\n    value: function _translateCoordinate(coordinate) {\n      var tx = coordinate.x * _Configuration2.default.isometric.unitWidth / 2 - coordinate.y * _Configuration2.default.isometric.unitWidth / 2;\n      var ty = coordinate.x * _Configuration2.default.isometric.unitHeight / 2 + coordinate.y * _Configuration2.default.isometric.unitHeight / 2;\n      return {\n        x: tx,\n        y: ty\n      };\n    }\n  }, {\n    key: \"reached\",\n    get: function get() {\n      return this._reached && !this._halted;\n    }\n  }, {\n    key: \"halted\",\n    get: function get() {\n      return this._halted;\n    }\n  }, {\n    key: \"speedGain\",\n    set: function set(value) {\n      this._speedGain = value;\n      this._speedOutdated = true;\n    },\n    get: function get() {\n      return this._speedGain || 0;\n    }\n  }, {\n    key: \"startCoordinate\",\n    get: function get() {\n      return this._startCoordinate || {\n        x: 0,\n        y: 0\n      };\n    }\n  }, {\n    key: \"stats\",\n    set: function set(value) {\n      this._stats = value;\n    },\n    get: function get() {\n      var combStats = {};\n      var keys = Object.keys(this._permStats);\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = keys[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var key = _step.value;\n\n          combStats[key] = this._stats[key] + this._permStats[key];\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      combStats.lives = this.members.length;\n      return combStats;\n    }\n  }, {\n    key: \"finalCoordinate\",\n    get: function get() {\n      return this._scheduledPath[this._scheduledPath.length - 1] || this.head.coordinate;\n    }\n  }, {\n    key: \"startDirection\",\n    get: function get() {\n      return this._startDirection;\n    }\n  }, {\n    key: \"direction\",\n    get: function get() {\n      return this.head.direction;\n    }\n\n    /**\n     * Get speed of this party\n     */\n\n  }, {\n    key: \"speed\",\n    get: function get() {\n      if (this.members.length < 1) {\n        return 0;\n      }\n\n      this._speed = this.head.meta.speed + this._speedGain + this.hasBuff(\"relic-green\") - this.hasBuff(\"relic-red\") + this.hasBuff(\"serial-killer\") * this.stats.kills;\n\n      return this._speed;\n    }\n  }, {\n    key: \"nextDirection\",\n    get: function get() {\n      return this._scheduledPath.length > 0 ? this._getDirection(this.head.coordinate, this._scheduledPath[0]) : this.direction;\n    }\n  }, {\n    key: \"disableArrowGuide\",\n    set: function set(value) {\n      if (this._disableArrowGuide != value) {\n        this._disableArrowGuide = value;\n        this.head.disableArrowGuide = value;\n      }\n    }\n  }]);\n\n  return Party;\n}();\n\nexports.default = Party;\n\n//# sourceURL=webpack:///./src/Party.js?");

/***/ }),

/***/ "./src/PartySimulator.js":
/*!*******************************!*\
  !*** ./src/PartySimulator.js ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _easystarjs = __webpack_require__(/*! easystarjs */ \"./node_modules/easystarjs/src/easystar.js\");\n\nvar _easystarjs2 = _interopRequireDefault(_easystarjs);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar PartySimulator = function () {\n  function PartySimulator(party, territory, obstacles) {\n    var _this = this;\n\n    _classCallCheck(this, PartySimulator);\n\n    // Basic data to evaluate\n    this._party = party;\n    this._territory = null;\n    this._obstacles = null;\n\n    // Pathfinder\n    this._pathfinder = null;\n    this._findLimit = 9;\n    this._intendedBound = null;\n\n    // Current status\n    this._plannedPath = [];\n    this._plannedPathIndex = 0;\n    this._requiresNewPlan = true;\n\n    this._party.onEliminate(function (member, deadly) {\n      if (deadly) {\n        _this._pathfinder = null;\n      }\n      _this._requiresNewPlan = true;\n    });\n\n    this._party.onDisplaced(function (coordinate) {\n      _this._requiresNewPlan = true;\n    });\n  }\n\n  _createClass(PartySimulator, [{\n    key: \"setEnvironment\",\n    value: function setEnvironment(territory, obstacles) {\n      var _this2 = this;\n\n      this._territory = territory;\n      this._obstacles = obstacles;\n      this._initializePathfinder();\n\n      this._territory.onOccupy(function (party, changes) {\n        if (party == _this2._party.id) {\n          _this2._requiresNewPlan = true;\n        }\n      });\n    }\n  }, {\n    key: \"_isBefore4\",\n    value: function _isBefore4() {\n      var ta = this._party.head.coordinate;\n      var tb = this._plannedPath[Math.max(this._plannedPath.length - 4, 0)];\n      if (ta.x == tb.x && ta.y == tb.y) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n  }, {\n    key: \"update\",\n    value: function update(deltaTime) {\n      if (this._pathfinder == null) {\n        return;\n      }\n\n      // 만약 파티가 도착지점 4타일 전이거나, 새로 플랜하라는 명령을 받으면\n      if (this._requiresNewPlan) {\n        this._requiresNewPlan = false;\n        if (Math.random() > 0.5) {\n          this._findLimit = 4;\n        }\n        this._planPath(0, this._findLimit);\n        this._party.schedulePath(this._plannedPath);\n      }\n    }\n  }, {\n    key: \"_planPath\",\n    value: function _planPath(startLimit, endLimit) {\n      var _this3 = this;\n\n      var currentStep = this._party.finalCoordinate;\n      var preferredSteps = [];\n\n      // treaverse near area  c\n      var esx = Math.max(0, currentStep.x - endLimit);\n      var eex = Math.min(this._territory.width - 1, currentStep.x + endLimit);\n      var esy = Math.max(0, currentStep.y - endLimit);\n      var eey = Math.min(this._territory.height - 1, currentStep.y + endLimit);\n\n      var ssx = Math.max(0, currentStep.x - startLimit);\n      var sex = Math.min(this._territory.width - 1, currentStep.x + startLimit);\n      var ssy = Math.max(0, currentStep.y - startLimit);\n      var sey = Math.min(this._territory.height - 1, currentStep.y + startLimit);\n\n      for (var y = esy; y <= eey; y++) {\n        if (y == currentStep.y) {\n          continue;\n        }\n\n        for (var x = esx; x <= eex; x++) {\n          if (x == currentStep.x) {\n            continue;\n          }\n\n          // Too close\n          if (x >= ssx && x <= sex && y >= ssy && y <= sey) {\n            continue;\n          }\n          // Is occupiable\n          if (this._isOccupiable(x, y) && this._isOccupiable(currentStep.x, y) && this._isOccupiable(x, currentStep.y)) {\n            preferredSteps.push({ x: x, y: y });\n          }\n        }\n      }\n\n      // If not found, increase traverse area\n      if (preferredSteps.length < 1) {\n        if (endLimit >= this._territory.width || endLimit >= this._territory.height) {\n          preferredSteps.push({\n            x: Math.floor((this._territory.width - 1) * Math.random()),\n            y: Math.floor((this._territory.height - 1) * Math.random())\n          });\n        } else {\n          this._findLimit *= 2;\n          this._planPath(endLimit, this._findLimit);\n          return;\n        }\n      }\n      // Random select from the possible steps\n      var selectedStep = preferredSteps[Math.floor((preferredSteps.length - 1) * Math.random())];\n      this._intendedBound = {};\n      this._intendedBound.x = selectedStep.x;\n      this._intendedBound.y = selectedStep.y;\n      // Target coordinates\n      var tcoord = [];\n      tcoord.push({\n        x: currentStep.x,\n        y: currentStep.y\n      });\n      tcoord.push({\n        x: selectedStep.x,\n        y: currentStep.y\n      });\n      tcoord.push({\n        x: selectedStep.x,\n        y: selectedStep.y\n      });\n      tcoord.push({\n        x: currentStep.x,\n        y: selectedStep.y\n      });\n      tcoord.push({\n        x: currentStep.x,\n        y: currentStep.y\n      });\n\n      if (Math.random() > 0.5) {\n        var temp = tcoord[1];\n        tcoord[1] = tcoord[3];\n        tcoord[3] = temp;\n      }\n\n      // Interpolate!\n      for (var i = 0; i < tcoord.length - 1; i++) {\n        this._pathfinder.findPath(tcoord[i].x, tcoord[i].y, tcoord[i + 1].x, tcoord[i + 1].y, function (pathFound) {\n          if (pathFound != null && pathFound.length > 0) {\n            _this3._plannedPath = _this3._plannedPath.concat(pathFound.slice(1));\n          }\n        });\n        this._pathfinder.calculate();\n      }\n\n      // REMOVE TAILING\n      var cleaned = [];\n      cleaned.push(this._plannedPath[0]);\n      for (var _i = 1; _i < this._plannedPath.length - 1; _i++) {\n        var prv = this._plannedPath[_i - 1];\n        var now = this._plannedPath[_i];\n        var nex = this._plannedPath[_i + 1];\n\n        if (prv.x == nex.x && prv.y == nex.y) {\n          _i += 2;\n          continue;\n        } else {\n          cleaned.push(now);\n          if (_i == this._plannedPath.length - 2) {\n            cleaned.push(nex);\n          }\n        }\n      }\n      this._plannedPath = cleaned;\n\n      this._plannedPathIndex = 0;\n    }\n  }, {\n    key: \"_isOccupiable\",\n    value: function _isOccupiable(x, y) {\n      var territory = this._territory.get(x, y);\n      if (territory.owner != this._party.id) {\n        if (this._obstacles[y][x] == 0) {\n          return true;\n        }\n      }\n      return false;\n    }\n  }, {\n    key: \"_initializePathfinder\",\n    value: function _initializePathfinder() {\n      this._pathfinder = new _easystarjs2.default.js();\n      this._pathfinder.enableSync();\n      this._pathfinder.setGrid(this._obstacles);\n      this._pathfinder.setAcceptableTiles([0]);\n    }\n  }]);\n\n  return PartySimulator;\n}();\n\nexports.default = PartySimulator;\n\n//# sourceURL=webpack:///./src/PartySimulator.js?");

/***/ }),

/***/ "./src/Pathfinder.js":
/*!***************************!*\
  !*** ./src/Pathfinder.js ***!
  \***************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Pathfinder = function () {\n  function Pathfinder() {\n    _classCallCheck(this, Pathfinder);\n\n    // Grid instances\n    this._grid = null;\n    this._edgeGrid = null;\n    this._gridWidth = 0;\n    this._gridHeight = 0;\n    this._gridSize = 0;\n\n    this._context = 0;\n  }\n\n  _createClass(Pathfinder, [{\n    key: \"setGrid\",\n    value: function setGrid(grid, edgeGrid) {\n      this._grid = grid;\n      this._edgeGrid = edgeGrid;\n      this._gridWidth = grid[0].length;\n      this._gridHeight = grid.length;\n      this._gridSize = this._gridWidth * this._gridHeight;\n    }\n  }, {\n    key: \"findPath\",\n    value: function findPath(partyId, start, end) {\n      var forbiddenMove = 0;\n      if (start.x > end.x) forbiddenMove = 0;else if (start.x < end.x) forbiddenMove = 1;else if (start.y > end.y) forbiddenMove = 2;else forbiddenMove = 3;\n\n      this._context = {\n        party: partyId,\n        start: start,\n        end: end,\n        forbiddenMove: forbiddenMove\n      };\n\n      var pathStart = new PathfinderNode(null, start.x, start.y, this._gridWidth);\n      var pathEnd = new PathfinderNode(null, end.x, end.y, this._gridWidth);\n      var visited = new Array(this._gridSize);\n\n      var open = [pathStart];\n      var closed = [];\n      var result = [];\n      var step = void 0;\n      var length = void 0,\n          max = void 0,\n          min = void 0,\n          i = void 0,\n          j = void 0;\n\n      while (length = open.length) {\n        max = this._gridSize;\n        min = -1;\n        for (i = 0; i < length; i++) {\n          if (open[i].f < max) {\n            max = open[i].f;\n            min = i;\n          }\n        }\n        var node = open.splice(min, 1)[0];\n        if (node.value === pathEnd.value) {\n          step = closed[closed.push(node) - 1];\n          do {\n            result.push({ x: step.x, y: step.y });\n          } while (step = step.parent);\n          visited = closed = open = [];\n          result.reverse();\n        } else {\n          var neighbours = this._neighbors(node.x, node.y);\n          for (i = 0, j = neighbours.length; i < j; i++) {\n            step = new PathfinderNode(node, neighbours[i].x, neighbours[i].y, this._gridWidth);\n            if (!visited[step.value]) {\n              step.g = node.g + this._distance(neighbours[i], node);\n              step.f = step.g + this._distance(neighbours[i], pathEnd);\n              open.push(step);\n              visited[step.value] = true;\n            }\n          }\n          closed.push(node);\n        }\n      }\n      return result;\n    }\n  }, {\n    key: \"_distance\",\n    value: function _distance(point, goal) {\n      return Math.abs(point.x - goal.x) + Math.abs(point.y - goal.y);\n    }\n  }, {\n    key: \"_neighbors\",\n    value: function _neighbors(x, y) {\n      var approachable = [true, true, true, true];\n      if (this._context.start.x == x && this._context.start.y == y) {\n        approachable[this._context.forbiddenMove] = false;\n      }\n      if (this._grid[y][x].lineOwner == this._context.party) {\n        switch (this._grid[y][x].lineCode) {\n          case 1:\n            // north and south\n            approachable[0] = false;\n            approachable[1] = false;\n            break;\n          case 2:\n            // west and east\n            approachable[2] = false;\n            approachable[3] = false;\n            break;\n          case 3:\n            // north and west\n            approachable[1] = false;\n            approachable[3] = false;\n            break;\n          case 4:\n            // north and east\n            approachable[0] = false;\n            approachable[3] = false;\n            break;\n          case 5:\n            // south and east\n            approachable[0] = false;\n            approachable[2] = false;\n            break;\n          case 6:\n            // south and west\n            approachable[1] = false;\n            approachable[2] = false;\n            break;\n        }\n      }\n\n      var N = y - 1,\n          S = y + 1,\n          E = x + 1,\n          W = x - 1,\n          myN = N > -1 && this._steppable(x, N) && approachable[2],\n          myS = S < this._gridHeight && this._steppable(x, S) && approachable[3],\n          myE = E < this._gridWidth && this._steppable(E, y) && approachable[1],\n          myW = W > -1 && this._steppable(W, y) && approachable[0],\n          result = [];\n      if (myN) result.push({ x: x, y: N });\n      if (myE) result.push({ x: E, y: y });\n      if (myS) result.push({ x: x, y: S });\n      if (myW) result.push({ x: W, y: y });\n      return result;\n    }\n  }, {\n    key: \"_steppable\",\n    value: function _steppable(x, y) {\n      return this._grid[y][x].lineOwner == this._context.party || this._edgeGrid[y][x] == this._context.party;\n    }\n  }]);\n\n  return Pathfinder;\n}();\n\nexports.default = Pathfinder;\n\nvar PathfinderNode = function PathfinderNode(parent, x, y, width) {\n  _classCallCheck(this, PathfinderNode);\n\n  this.parent = parent;\n  this.x = x;\n  this.y = y;\n  this.f = 0;\n  this.g = 0;\n  this.value = y * width + x;\n};\n\n//# sourceURL=webpack:///./src/Pathfinder.js?");

/***/ }),

/***/ "./src/Relic.js":
/*!**********************!*\
  !*** ./src/Relic.js ***!
  \**********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _pixi = __webpack_require__(/*! pixi.js */ \"./node_modules/pixi.js/lib/index.js\");\n\nvar PIXI = _interopRequireWildcard(_pixi);\n\nvar _Asset = __webpack_require__(/*! ./Asset.js */ \"./src/Asset.js\");\n\nvar _Asset2 = _interopRequireDefault(_Asset);\n\nvar _tween = __webpack_require__(/*! @tweenjs/tween.js */ \"./node_modules/@tweenjs/tween.js/src/Tween.js\");\n\nvar TWEEN = _interopRequireWildcard(_tween);\n\nvar _Obstacle2 = __webpack_require__(/*! ./Obstacle.js */ \"./src/Obstacle.js\");\n\nvar _Obstacle3 = _interopRequireDefault(_Obstacle2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Relic = function (_Obstacle) {\n  _inherits(Relic, _Obstacle);\n\n  function Relic(obstacleId, x, y) {\n    _classCallCheck(this, Relic);\n\n    var _this = _possibleConstructorReturn(this, (Relic.__proto__ || Object.getPrototypeOf(Relic)).call(this, obstacleId, x, y));\n\n    _this._shadow = null;\n    _this._shadowTexture = null;\n\n    _this._hoverUpTween = null;\n    _this._hoverDownTween = null;\n    _this._hoverStarted = false;\n    _this._hoverDuration = 1000 + Math.random() * 300;\n\n    _this._createShadow();\n    _this._initializeBuff(obstacleId);\n    return _this;\n  }\n\n  _createClass(Relic, [{\n    key: \"_initializeBuff\",\n    value: function _initializeBuff(obstacleId) {\n      switch (obstacleId) {\n        case 1:\n          this.buff = \"relic-red\";\n          break;\n        case 2:\n          this.buff = \"relic-green\";\n          break;\n        case 3:\n          this.buff = \"relic-yellow\";\n          break;\n      }\n    }\n  }, {\n    key: \"update\",\n    value: function update() {}\n  }, {\n    key: \"_createShadow\",\n    value: function _createShadow() {\n      this._shadowTexture = _Asset2.default.graphics[\"unit-shadow\"];\n\n      this._shadow = new PIXI.Sprite(this._shadowTexture);\n      this._shadow.anchor.set(0.5, 0.5);\n      this._shadow.scale.set(1.3, 1.3);\n      this._shadow.alpha = 0.4;\n      this._shadow.x = 128;\n      this._shadow.y = 75;\n\n      this.addChildAt(this._shadow, 0);\n    }\n  }, {\n    key: \"_initializeHoverTween\",\n    value: function _initializeHoverTween() {\n      this._hoverUpTween = new TWEEN.Tween(this._graphics);\n      this._hoverDownTween = new TWEEN.Tween(this._graphics);\n\n      // These two tweens are chaning each other\n      this._hoverUpTween.to({\n        y: -0\n      }, this._hoverDuration).easing(TWEEN.Easing.Quadratic.InOut).chain(this._hoverDownTween);\n\n      this._hoverDownTween.to({\n        y: 114\n      }, this._hoverDuration).easing(TWEEN.Easing.Quadratic.InOut).chain(this._hoverUpTween);\n    }\n  }, {\n    key: \"owner\",\n    set: function set(value) {\n      if (this._owner != value) {\n        if (this._owner != null) {\n          this._owner.removeBuff(this.buff);\n        }\n      }\n      if (value != null) {\n        value.addBuff(this.buff);\n      }\n      this._owner = value;\n    },\n    get: function get() {\n      return this._owner;\n    }\n  }, {\n    key: \"hover\",\n    get: function get() {\n      return this._hoverStarted;\n    }\n\n    /**\n     * Start or stop hovering\n     */\n    ,\n    set: function set(value) {\n      if (this._hoverStarted == value) {\n        return;\n      }\n      if (value) {\n        if (this._hoverUpTween == null) {\n          this._initializeHoverTween();\n        }\n        this._hoverUpTween.start();\n      } else {\n        this._hoverUpTween.stop();\n        this._hoverDownTween.stop();\n      }\n      this._hoverStarted = value;\n    }\n  }]);\n\n  return Relic;\n}(_Obstacle3.default);\n\nexports.default = Relic;\n\n//# sourceURL=webpack:///./src/Relic.js?");

/***/ }),

/***/ "./src/RewardPodium.js":
/*!*****************************!*\
  !*** ./src/RewardPodium.js ***!
  \*****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _pixi = __webpack_require__(/*! pixi.js */ \"./node_modules/pixi.js/lib/index.js\");\n\nvar PIXI = _interopRequireWildcard(_pixi);\n\nvar _tween4 = __webpack_require__(/*! @tweenjs/tween.js */ \"./node_modules/@tweenjs/tween.js/src/Tween.js\");\n\nvar TWEEN = _interopRequireWildcard(_tween4);\n\nvar _Asset = __webpack_require__(/*! ./Asset.js */ \"./src/Asset.js\");\n\nvar _Asset2 = _interopRequireDefault(_Asset);\n\nvar _CharacterDatabase = __webpack_require__(/*! ./CharacterDatabase.js */ \"./src/CharacterDatabase.js\");\n\nvar _CharacterDatabase2 = _interopRequireDefault(_CharacterDatabase);\n\nvar _Configuration = __webpack_require__(/*! ./Configuration.js */ \"./src/Configuration.js\");\n\nvar _Configuration2 = _interopRequireDefault(_Configuration);\n\nvar _Character = __webpack_require__(/*! ./Character.js */ \"./src/Character.js\");\n\nvar _Character2 = _interopRequireDefault(_Character);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar RewardPodium = function (_PIXI$Container) {\n  _inherits(RewardPodium, _PIXI$Container);\n\n  function RewardPodium() {\n    _classCallCheck(this, RewardPodium);\n\n    var _this = _possibleConstructorReturn(this, (RewardPodium.__proto__ || Object.getPrototypeOf(RewardPodium)).call(this));\n\n    _this._stands = [];\n    _this._characters = [];\n    _this._ticks = 0;\n\n    _this._standTexture = null;\n    _this._nametagTexture = null;\n    _this._goldMedalTexture = null;\n    _this._silverMedalTexture = null;\n    _this._bronzeMedalTexture = null;\n\n    _this._initialize();\n    return _this;\n  }\n\n  _createClass(RewardPodium, [{\n    key: \"setStand\",\n    value: function setStand(rank, name, party, color) {\n      if (rank < 0 || rank > 4) {\n        this._stands = 0;\n      }\n\n      var stand = new PIXI.Container();\n      var nametag = new PIXI.Sprite(this._nametagTexture);\n      var nametagText = new PIXI.Text(name, {\n        fontFamily: \"Arial\",\n        fontSize: 24,\n        fill: 0xffffff,\n        align: \"left\"\n      });\n      nametag.tint = color;\n      nametag.anchor.set(0.5, 0.5);\n      nametag.scale.set(0.5, 0.6);\n      nametag.y = -90;\n\n      nametagText.anchor.set(0.5, 0.5);\n      nametagText.y = -93;\n      nametag.width = Math.max(nametagText.width + 40, nametag.width);\n\n      for (var i = 4; i >= 0; i--) {\n        var standBlock = new PIXI.Sprite(this._standTexture);\n        standBlock.anchor.set(0.5, 0);\n        standBlock.y = i * 185;\n        // standBlock.tint = color;\n        stand.addChild(standBlock);\n      }\n\n      var characterPosition = [0, 40, -75, 80, 75, 80];\n      var partyCodeList = party.split(\",\");\n\n      for (var _i = 0; _i < 3; _i++) {\n        var character = new _Character2.default(_CharacterDatabase2.default[partyCodeList[_i]]);\n        character.x = characterPosition[_i * 2] - 90;\n        character.y = characterPosition[_i * 2 + 1] - 45;\n        if (rank == 1) {\n          character.jump = true;\n        }\n        character.disableArrowGuide = true;\n        character.scale.set(0.7, 0.7);\n        this._characters.push(character);\n        stand.addChild(character);\n      }\n\n      stand.addChild(nametag);\n      stand.addChild(nametagText);\n\n      if (rank > 0) {\n        var medal = void 0;\n        switch (rank) {\n          case 1:\n            medal = new PIXI.Sprite(this._goldMedalTexture);\n            break;\n          case 2:\n            medal = new PIXI.Sprite(this._silverMedalTexture);\n            break;\n          case 3:\n            medal = new PIXI.Sprite(this._bronzeMedalTexture);\n            break;\n        }\n        if (medal) {\n          medal.anchor.set(0.5, 0.5);\n          medal.scale.set(0.6, 0.6);\n          medal.x = nametag.x - nametag.width / 2 - 25;\n          medal.y = -72;\n          stand.addChild(medal);\n        }\n      }\n\n      stand.y = 300;\n      stand.visible = false;\n      this._stands[rank] = stand;\n      this.addChild(stand);\n    }\n  }, {\n    key: \"show\",\n    value: function show() {\n      if (this._stands[0]) {\n        this._stands[0].x = _Configuration2.default.baseResolution.width / 2;\n        this._stands[0].y = _Configuration2.default.baseResolution.height;\n        this._stands[0].visible = true;\n        var tween = new TWEEN.Tween(this._stands[0]).to({ y: 100 }, 1000).easing(TWEEN.Easing.Quadratic.Out).start();\n      } else {\n        if (this._stands[1]) {\n          this._stands[1].x = _Configuration2.default.baseResolution.width / 2;\n          this._stands[1].y = _Configuration2.default.baseResolution.height;\n          this._stands[1].visible = true;\n          var _tween = new TWEEN.Tween(this._stands[1]).to({ y: 100 }, 1000).easing(TWEEN.Easing.Quadratic.Out).start();\n        }\n\n        if (this._stands[2]) {\n          this._stands[2].x = _Configuration2.default.baseResolution.width / 2 - 250;\n          this._stands[2].y = _Configuration2.default.baseResolution.height;\n          this._stands[2].visible = true;\n          var _tween2 = new TWEEN.Tween(this._stands[2]).to({ y: 300 }, 1400).easing(TWEEN.Easing.Quadratic.Out).start();\n        }\n\n        if (this._stands[3]) {\n          this._stands[3].x = _Configuration2.default.baseResolution.width / 2 + 250;\n          this._stands[3].y = _Configuration2.default.baseResolution.height;\n          this._stands[3].visible = true;\n          var _tween3 = new TWEEN.Tween(this._stands[3]).to({ y: 450 }, 1800).easing(TWEEN.Easing.Quadratic.Out).start();\n        }\n      }\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      if (this._ticks++ > 30) {\n        this._ticks = 0;\n      } else {\n        return;\n      }\n\n      for (var i = 0; i < this._characters.length; i++) {\n        var character = this._characters[i];\n        if (Math.random() > 0.8) {\n          character.direction = Math.random() > 0.5 ? 0 : 3;\n        }\n      }\n    }\n  }, {\n    key: \"_initialize\",\n    value: function _initialize() {\n      this._stands = [];\n\n      this._standTexture = _Asset2.default.graphics[\"podium\"];\n      this._nametagTexture = _Asset2.default.graphics[\"nametag\"];\n      this._goldMedalTexture = _Asset2.default.graphics[\"medal-gold\"];\n      this._silverMedalTexture = _Asset2.default.graphics[\"medal-silver\"];\n      this._bronzeMedalTexture = _Asset2.default.graphics[\"medal-bronze\"];\n    }\n  }]);\n\n  return RewardPodium;\n}(PIXI.Container);\n\nexports.default = RewardPodium;\n\n//# sourceURL=webpack:///./src/RewardPodium.js?");

/***/ }),

/***/ "./src/RewardScreen.js":
/*!*****************************!*\
  !*** ./src/RewardScreen.js ***!
  \*****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _pixi = __webpack_require__(/*! pixi.js */ \"./node_modules/pixi.js/lib/index.js\");\n\nvar PIXI = _interopRequireWildcard(_pixi);\n\nvar _Screen2 = __webpack_require__(/*! ./Screen.js */ \"./src/Screen.js\");\n\nvar _Screen3 = _interopRequireDefault(_Screen2);\n\nvar _Asset = __webpack_require__(/*! ./Asset.js */ \"./src/Asset.js\");\n\nvar _Asset2 = _interopRequireDefault(_Asset);\n\nvar _LiveBackground = __webpack_require__(/*! ./LiveBackground.js */ \"./src/LiveBackground.js\");\n\nvar _LiveBackground2 = _interopRequireDefault(_LiveBackground);\n\nvar _RewardPodium = __webpack_require__(/*! ./RewardPodium.js */ \"./src/RewardPodium.js\");\n\nvar _RewardPodium2 = _interopRequireDefault(_RewardPodium);\n\nvar _RewardSummary = __webpack_require__(/*! ./RewardSummary.js */ \"./src/RewardSummary.js\");\n\nvar _RewardSummary2 = _interopRequireDefault(_RewardSummary);\n\nvar _CharacterDatabase = __webpack_require__(/*! ./CharacterDatabase.js */ \"./src/CharacterDatabase.js\");\n\nvar _CharacterDatabase2 = _interopRequireDefault(_CharacterDatabase);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar RewardScreen = function (_Screen) {\n  _inherits(RewardScreen, _Screen);\n\n  function RewardScreen() {\n    _classCallCheck(this, RewardScreen);\n\n    return _possibleConstructorReturn(this, (RewardScreen.__proto__ || Object.getPrototypeOf(RewardScreen)).apply(this, arguments));\n  }\n\n  _createClass(RewardScreen, [{\n    key: \"onInit\",\n    value: function onInit() {\n      var _this2 = this;\n\n      this._background = new _LiveBackground2.default(this.getWidth(), this.getHeight());\n      this._podium = new _RewardPodium2.default();\n      this._summary = new _RewardSummary2.default(this.context.results.stats);\n\n      /*\n      results\n        stats: {time, kills, lives, relics, score}\n        players: [{partyId, userId, territoryColor, partyCode, rank, score}}]\n      */\n      /*\n      rewards\n        [{type, characterData || amount}]\n      */\n\n      this._results = this.context.results;\n      this._rewards = this.context.rewards;\n      this.context.results = {};\n      this.context.rewards = [];\n\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this._results.players[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var player = _step.value;\n\n          this._podium.setStand(player.rank, player.userId, player.partyCode, player.territoryColor);\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      this._podium.x = -400;\n      this._podium.y = 200;\n\n      this._summary.x = this.getWidth() - 470;\n      this._summary.y = 100;\n\n      this._summary.onBack(function () {\n        _this2.fadeIn(function () {\n          _this2.context.switchScreen(\"main\");\n        });\n      });\n\n      this.root.addChild(this._background);\n      this.root.addChild(this._podium);\n      this.root.addChild(this._summary);\n\n      _Asset2.default.sounds[\"gameSound\"].stop();\n      _Asset2.default.sounds[\"endSound\"].play();\n    }\n  }, {\n    key: \"onUpdate\",\n    value: function onUpdate(deltaTime) {\n      this._background.update(deltaTime);\n      this._podium.update();\n    }\n  }, {\n    key: \"onActive\",\n    value: function onActive() {\n      var _this3 = this;\n\n      this.fadeOut();\n\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = this._rewards[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var reward = _step2.value;\n\n          this._summary.addReward(reward);\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2.return) {\n            _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      this._podium.show();\n      setTimeout(function () {\n        _this3._summary.show();\n      }, 1500);\n    }\n  }]);\n\n  return RewardScreen;\n}(_Screen3.default);\n\nexports.default = RewardScreen;\n\n//# sourceURL=webpack:///./src/RewardScreen.js?");

/***/ }),

/***/ "./src/RewardSummary.js":
/*!******************************!*\
  !*** ./src/RewardSummary.js ***!
  \******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _pixi = __webpack_require__(/*! pixi.js */ \"./node_modules/pixi.js/lib/index.js\");\n\nvar PIXI = _interopRequireWildcard(_pixi);\n\nvar _tween = __webpack_require__(/*! @tweenjs/tween.js */ \"./node_modules/@tweenjs/tween.js/src/Tween.js\");\n\nvar TWEEN = _interopRequireWildcard(_tween);\n\nvar _Asset = __webpack_require__(/*! ./Asset.js */ \"./src/Asset.js\");\n\nvar _Asset2 = _interopRequireDefault(_Asset);\n\nvar _CharacterDatabase = __webpack_require__(/*! ./CharacterDatabase.js */ \"./src/CharacterDatabase.js\");\n\nvar _CharacterDatabase2 = _interopRequireDefault(_CharacterDatabase);\n\nvar _Configuration = __webpack_require__(/*! ./Configuration.js */ \"./src/Configuration.js\");\n\nvar _Configuration2 = _interopRequireDefault(_Configuration);\n\nvar _Character = __webpack_require__(/*! ./Character.js */ \"./src/Character.js\");\n\nvar _Character2 = _interopRequireDefault(_Character);\n\nvar _Button = __webpack_require__(/*! ./Button.js */ \"./src/Button.js\");\n\nvar _Button2 = _interopRequireDefault(_Button);\n\nvar _CoinCard = __webpack_require__(/*! ./CoinCard.js */ \"./src/CoinCard.js\");\n\nvar _CoinCard2 = _interopRequireDefault(_CoinCard);\n\nvar _CharacterCard = __webpack_require__(/*! ./CharacterCard.js */ \"./src/CharacterCard.js\");\n\nvar _CharacterCard2 = _interopRequireDefault(_CharacterCard);\n\nvar _assert = __webpack_require__(/*! assert */ \"./node_modules/assert/assert.js\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar RewardSummary = function (_PIXI$Container) {\n  _inherits(RewardSummary, _PIXI$Container);\n\n  function RewardSummary(stats) {\n    _classCallCheck(this, RewardSummary);\n\n    var _this = _possibleConstructorReturn(this, (RewardSummary.__proto__ || Object.getPrototypeOf(RewardSummary)).call(this));\n\n    _this._summaryBox = null;\n    _this._summaryBackground = null;\n    _this._summaryDeco = null;\n    _this._totalTimeText = null;\n    _this._totalKillsText = null;\n    _this._totalLivesText = null;\n    _this._totalScoreText = null;\n    _this._totalRelicsText = null;\n    _this._totalTimeGrade = null;\n    _this._totalKillsGrade = null;\n    _this._totalLivesGrade = null;\n    _this._totalScoreGrade = null;\n    _this._totalRelicsGrade = null;\n    _this._totalGrade = null;\n\n    _this._gradeATexture = null;\n    _this._gradeBTexture = null;\n    _this._gradeCTexture = null;\n    _this._gradeDTexture = null;\n    _this._summaryDecoTexture = null;\n    _this._summaryBackgroundTexture = null;\n\n    _this._rewards = null;\n    _this._rewardCardBacks = null;\n    _this._rewardCards = null;\n    _this._rewardBox = null;\n    _this._pannelShadow = null;\n    _this._pannel = null;\n    _this._openCardButton = null;\n    _this._noRewardText = null;\n\n    _this._openCardButtonTexture = null;\n    _this._cardBackTexture = null;\n\n    _this._onBackHandlers = [];\n\n    _this._initializeSummary(stats);\n    _this._initializeReward();\n    return _this;\n  }\n\n  _createClass(RewardSummary, [{\n    key: \"addReward\",\n    value: function addReward(reward) {\n      var _this2 = this;\n\n      this._noRewardText.visible = false;\n      this._openCardButton.visible = true;\n      this._backButton.visible = false;\n\n      var cardBack = new PIXI.Sprite(this._cardBackTexture);\n      cardBack.scale.set(0.5, 0.5);\n      cardBack.anchor.set(0.5, 0.5);\n\n      var card = void 0;\n\n      if (reward.type == \"coin\") {\n        card = new _CoinCard2.default(reward.amount);\n      } else {\n        card = new _CharacterCard2.default(_CharacterDatabase2.default[reward.characterData || 21]);\n      }\n      card.scale.set(0.5, 0.5);\n      card.visible = false;\n      var index = this._rewards.length;\n      cardBack.on(\"pointertap\", function () {\n        _this2._openReward(index);\n      });\n      cardBack.interactive = true;\n      this.interactive = true;\n\n      this._rewardCards.push(card);\n      this._rewardCardBacks.push(cardBack);\n      this._rewards.push(reward);\n\n      this._rewardBox.addChild(cardBack);\n      this._rewardBox.addChild(card);\n      this._updateReward();\n    }\n  }, {\n    key: \"show\",\n    value: function show() {\n      this.visible = true;\n\n      this._summaryBox.x = 700;\n      this._rewardBox.x = 700;\n      var tween = new TWEEN.Tween(this._summaryBox).to({ x: 0 }, 2000).easing(TWEEN.Easing.Elastic.Out).start();\n      var tween2 = new TWEEN.Tween(this._rewardBox).to({ x: 0 }, 2000).easing(TWEEN.Easing.Elastic.Out).start();\n    }\n  }, {\n    key: \"onBack\",\n    value: function onBack(handler) {\n      this._onBackHandlers.push(handler);\n    }\n  }, {\n    key: \"_initializeSummary\",\n    value: function _initializeSummary(stats) {\n      this._gradeATexture = _Asset2.default.graphics[\"grade-a\"];\n      this._gradeBTexture = _Asset2.default.graphics[\"grade-b\"];\n      this._gradeCTexture = _Asset2.default.graphics[\"grade-c\"];\n      this._gradeDTexture = _Asset2.default.graphics[\"grade-d\"];\n      this._summaryDecoTexture = _Asset2.default.graphics[\"nametag\"];\n      this._summaryBackgroundTexture = _Asset2.default.graphics[\"match-result\"];\n\n      this._summaryBox = new PIXI.Container();\n      this._summaryBackground = new PIXI.Sprite(this._summaryBackgroundTexture);\n      this._summaryDeco = new PIXI.Sprite(this._summaryDecoTexture);\n\n      var timeText = Math.round(stats.time / 60) + \":\" + Math.round(stats.time % 60);\n      this._totalTimeText = new PIXI.Text(timeText, {\n        fontFamily: \"Arial\",\n        fontSize: 29,\n        fill: 0x999999,\n        align: \"left\"\n      });\n      this._totalTimeGrade = new PIXI.Sprite(this._gradeATexture);\n      this._totalKillsText = new PIXI.Text(stats.kills, {\n        fontFamily: \"Arial\",\n        fontSize: 29,\n        fill: 0x999999,\n        align: \"left\"\n      });\n      this._totalKillsGrade = new PIXI.Sprite(this._gradeBTexture);\n      this._totalLivesText = new PIXI.Text(stats.lives, {\n        fontFamily: \"Arial\",\n        fontSize: 29,\n        fill: 0x999999,\n        align: \"left\"\n      });\n      this._totalLivesGrade = new PIXI.Sprite(this._gradeCTexture);\n      this._totalScoreText = new PIXI.Text(stats.score, {\n        fontFamily: \"Arial\",\n        fontSize: 29,\n        fill: 0x999999,\n        align: \"left\"\n      });\n      this._totalScoreGrade = new PIXI.Sprite(this._gradeDTexture);\n      this._totalRelicsText = new PIXI.Text(stats.relics, {\n        fontFamily: \"Arial\",\n        fontSize: 29,\n        fill: 0x999999,\n        align: \"left\"\n      });\n      this._totalRelicsGrade = new PIXI.Sprite(this._gradeATexture);\n      this._totalGrade = new PIXI.Sprite(this._gradeBTexture);\n\n      this._totalTimeText.x = 115 - 450;\n      this._totalTimeText.y = 140;\n      this._totalTimeGrade.x = -73;\n      this._totalTimeGrade.y = 140 + 8;\n\n      this._totalKillsText.x = 115 - 450;\n      this._totalKillsText.y = 190;\n      this._totalKillsGrade.x = -73;\n      this._totalKillsGrade.y = 190 + 8;\n\n      this._totalLivesText.x = 117 - 450;\n      this._totalLivesText.y = 238;\n      this._totalLivesGrade.x = -73;\n      this._totalLivesGrade.y = 238 + 8;\n\n      this._totalScoreText.x = 92;\n      this._totalScoreText.y = 140;\n      this._totalScoreGrade.x = 350;\n      this._totalScoreGrade.y = 140 + 8;\n\n      this._totalRelicsText.x = 92;\n      this._totalRelicsText.y = 190;\n      this._totalRelicsGrade.x = 350;\n      this._totalRelicsGrade.y = 190 + 8;\n\n      this._totalGrade.scale.set(1.5, 1.5);\n      this._totalGrade.x = 348;\n      this._totalGrade.y = 250;\n\n      this._summaryBackground.anchor.set(0.5, 0);\n      this._summaryDeco.anchor.set(0.5, 0);\n\n      this._summaryDeco.y = -24;\n      this._summaryDeco.tint = 0xcccccc;\n\n      this._summaryBox.addChild(this._summaryBackground);\n      this._summaryBox.addChild(this._summaryDeco);\n      this._summaryBox.addChild(this._totalTimeText);\n      this._summaryBox.addChild(this._totalKillsText);\n      this._summaryBox.addChild(this._totalLivesText);\n      this._summaryBox.addChild(this._totalScoreText);\n      this._summaryBox.addChild(this._totalRelicsText);\n      this._summaryBox.addChild(this._totalTimeGrade);\n      this._summaryBox.addChild(this._totalKillsGrade);\n      this._summaryBox.addChild(this._totalLivesGrade);\n      this._summaryBox.addChild(this._totalScoreGrade);\n      this._summaryBox.addChild(this._totalRelicsGrade);\n      this._summaryBox.addChild(this._totalGrade);\n\n      this.addChild(this._summaryBox);\n    }\n  }, {\n    key: \"_initializeReward\",\n    value: function _initializeReward() {\n      var _this3 = this;\n\n      this._rewards = [];\n      this._rewardCardBacks = [];\n      this._rewardCards = [];\n\n      this._openCardButtonTexture = _Asset2.default.graphics[\"button-open-card\"];\n      this._backButtonTexture = _Asset2.default.graphics[\"button-back\"];\n\n      this._cardBackTexture = _Asset2.default.graphics[\"card-back\"];\n\n      this._rewardBox = new PIXI.Container();\n      this._pannelShadow = new PIXI.Graphics();\n      this._pannel = new PIXI.Graphics();\n      this._openCardButton = new _Button2.default(this._openCardButtonTexture);\n      this._backButton = new _Button2.default(this._backButtonTexture);\n\n      this._noRewardText = new PIXI.Text(\"보상 없음\", {\n        fontFamily: \"Arial\",\n        fontSize: 40,\n        fill: 0xcccccc,\n        align: \"left\"\n      });\n\n      this._pannelShadow.beginFill(0xc7b299);\n      this._pannelShadow.drawRoundedRect(-450, 530, 900, 30, 20);\n      this._pannelShadow.endFill();\n\n      this._pannel.beginFill(0xfff2d7);\n      this._pannel.drawRoundedRect(-450, 0, 900, 550, 15);\n      this._pannel.endFill();\n\n      this._noRewardText.anchor.set(0.5, 0);\n      this._noRewardText.y = 150;\n\n      this._openCardButton.y = 410;\n      this._backButton.y = 410;\n\n      this._rewardBox.y = 340;\n\n      this._rewardBox.addChild(this._pannelShadow);\n      this._rewardBox.addChild(this._pannel);\n      this._rewardBox.addChild(this._openCardButton);\n      this._rewardBox.addChild(this._backButton);\n      this._rewardBox.addChild(this._noRewardText);\n      this.addChild(this._rewardBox);\n\n      this._openCardButton.visible = false;\n      this._openCardButton.clicked(function () {\n        for (var i = 0; i < _this3._rewards.length; i++) {\n          if (!_this3._rewards[i].opened) {\n            _this3._openReward(i);\n            break;\n          }\n        }\n      });\n      this._backButton.clicked(function () {\n        for (var i = 0; i < _this3._onBackHandlers.length; i++) {\n          _this3._onBackHandlers[i]();\n        }\n      });\n      this.visible = false;\n    }\n  }, {\n    key: \"_openReward\",\n    value: function _openReward(index) {\n      var _this4 = this;\n\n      if (index < this._rewards.length) {\n        if (this._rewards[index].opened) {\n          return;\n        }\n\n        var openTween = new TWEEN.Tween(this._rewardCards[index].scale).to({ x: 0.5, y: 0.5 }, 500).easing(TWEEN.Easing.Quartic.Out);\n\n        var closeTween = new TWEEN.Tween(this._rewardCardBacks[index].scale).to({ x: 0, y: 0.6 }, 500).easing(TWEEN.Easing.Quartic.In).onComplete(function () {\n          _this4._rewardCardBacks[index].visible = false;\n          _this4._rewardCards[index].visible = true;\n          _this4._rewardCards[index].scale.x = 0;\n          _this4._rewardCards[index].scale.y = 0.6;\n        }).chain(openTween).start();\n\n        this._rewards[index].opened = true;\n\n        var stillOpened = false;\n        for (var i = 0; i < this._rewards.length; i++) {\n          if (!this._rewards[i].opened) {\n            stillOpened = true;\n            break;\n          }\n        }\n\n        if (!stillOpened) {\n          this._openCardButton.visible = false;\n          this._backButton.visible = true;\n        }\n      }\n    }\n  }, {\n    key: \"_updateReward\",\n    value: function _updateReward() {\n      var gap = (900 - 100) / this._rewards.length;\n      for (var i = 0; i < this._rewards.length; i++) {\n        var cardBack = this._rewardCardBacks[i];\n        var card = this._rewardCards[i];\n        cardBack.x = gap * i + gap / 2 - 400;\n        cardBack.y = 172;\n\n        card.x = gap * i + gap / 2 - 400;\n        card.y = 172;\n      }\n    }\n  }]);\n\n  return RewardSummary;\n}(PIXI.Container);\n\nexports.default = RewardSummary;\n\n//# sourceURL=webpack:///./src/RewardSummary.js?");

/***/ }),

/***/ "./src/Screen.js":
/*!***********************!*\
  !*** ./src/Screen.js ***!
  \***********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _pixi = __webpack_require__(/*! pixi.js */ \"./node_modules/pixi.js/lib/index.js\");\n\nvar PIXI = _interopRequireWildcard(_pixi);\n\nvar _tween = __webpack_require__(/*! @tweenjs/tween.js */ \"./node_modules/@tweenjs/tween.js/src/Tween.js\");\n\nvar TWEEN = _interopRequireWildcard(_tween);\n\nvar _Context = __webpack_require__(/*! ./Context.js */ \"./src/Context.js\");\n\nvar _Context2 = _interopRequireDefault(_Context);\n\nvar _Configuration = __webpack_require__(/*! ./Configuration.js */ \"./src/Configuration.js\");\n\nvar _Configuration2 = _interopRequireDefault(_Configuration);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Interface like superclass for all screens\n *\n * @date 13 June 2018\n * @author HyunJun Kim\n */\nvar Screen = function () {\n  /**\n   * Initialize a screen\n   * @param {Context} context\n   */\n  function Screen(context) {\n    _classCallCheck(this, Screen);\n\n    this.context = context;\n\n    // Initialize root container\n    this.root = new PIXI.Container();\n    this.root.interactive = true;\n\n    // Renderer reference\n    this.active = false;\n    this.initialized = false;\n\n    this._fadeInProgress = false;\n  }\n\n  /**\n   * Called first time only when it's being constructed.\n   */\n\n\n  _createClass(Screen, [{\n    key: \"onInit\",\n    value: function onInit() {}\n\n    /**\n     * Update current screen activities\n     */\n\n  }, {\n    key: \"onUpdate\",\n    value: function onUpdate(deltaTime) {}\n\n    /**\n     * Called first time when this screen becomes active in renderer.\n     */\n\n  }, {\n    key: \"onActive\",\n    value: function onActive() {}\n\n    /**\n     * Called when this screen goes inactive (unbineded from renderer)\n     */\n\n  }, {\n    key: \"onInactive\",\n    value: function onInactive() {}\n\n    /**\n     * Return stage container of this screen\n     */\n\n  }, {\n    key: \"getRoot\",\n    value: function getRoot() {\n      return this.root;\n    }\n  }, {\n    key: \"getWidth\",\n    value: function getWidth() {\n      return _Configuration2.default.baseResolution.width;\n    }\n  }, {\n    key: \"getHeight\",\n    value: function getHeight() {\n      return _Configuration2.default.baseResolution.height;\n    }\n\n    /**\n     * Set renderer for this screen. Properties of renderer will be used to coordinate events.\n     * @param {ScreenRenderer} renderer\n     */\n\n  }, {\n    key: \"makeActive\",\n    value: function makeActive() {\n      if (this.context.renderer != null) {\n        this.active = true;\n        if (!this.initialized) {\n          this.onInit();\n          this.initialized = true;\n        }\n        this.onActive();\n      }\n    }\n\n    /**\n     * Unbind renderer so to remove event listeners.\n     */\n\n  }, {\n    key: \"makeInactive\",\n    value: function makeInactive() {\n      this.active = false;\n      this.onInactive();\n    }\n  }, {\n    key: \"fadeIn\",\n    value: function fadeIn(callback) {\n      var _this = this;\n\n      if (this._fadeInProgress) {\n        return;\n      }\n      this._fadeInProgress = true;\n\n      var shade = this._createShade();\n      shade.alpha = 0;\n\n      var tween = new TWEEN.Tween(shade).to({ alpha: 1 }, 500).easing(TWEEN.Easing.Quintic.Out).onComplete(function () {\n        _this.root.removeChild(shade);\n        _this._fadeInProgress = false;\n        if (callback) callback();\n      }).start();\n      this.root.addChild(shade);\n    }\n  }, {\n    key: \"fadeOut\",\n    value: function fadeOut(callback) {\n      var _this2 = this;\n\n      if (this._fadeInProgress) {\n        return;\n      }\n      this._fadeInProgress = true;\n\n      var shade = this._createShade();\n      shade.alpha = 1;\n\n      var tween = new TWEEN.Tween(shade).to({ alpha: 0 }, 500).easing(TWEEN.Easing.Quintic.In).onComplete(function () {\n        _this2.root.removeChild(shade);\n        _this2._fadeInProgress = false;\n        if (callback) callback();\n      }).start();\n      this.root.addChild(shade);\n    }\n  }, {\n    key: \"_createShade\",\n    value: function _createShade() {\n      var shade = new PIXI.Graphics();\n      shade.beginFill(0xffb2a0);\n      shade.drawRect(0, 0, this.getWidth(), this.getHeight());\n      shade.endFill();\n      return shade;\n    }\n  }]);\n\n  return Screen;\n}();\n\nexports.default = Screen;\n\n//# sourceURL=webpack:///./src/Screen.js?");

/***/ }),

/***/ "./src/ScreenRenderer.js":
/*!*******************************!*\
  !*** ./src/ScreenRenderer.js ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _pixi = __webpack_require__(/*! pixi.js */ \"./node_modules/pixi.js/lib/index.js\");\n\nvar PIXI = _interopRequireWildcard(_pixi);\n\nvar _tween = __webpack_require__(/*! @tweenjs/tween.js */ \"./node_modules/@tweenjs/tween.js/src/Tween.js\");\n\nvar TWEEN = _interopRequireWildcard(_tween);\n\nvar _Configuration = __webpack_require__(/*! ./Configuration.js */ \"./src/Configuration.js\");\n\nvar _Configuration2 = _interopRequireDefault(_Configuration);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Performs rendering for the screen instance\n *\n * @date 13 June 2018\n * @author HyunJun Kim\n */\nvar ScreenRenderer = function () {\n  /**\n   * Params for the screen size. This value does not change; It just determines screen ratio.\n   * @param {number} width\n   * @param {number} height\n   */\n  function ScreenRenderer(width, height) {\n    var _this = this;\n\n    _classCallCheck(this, ScreenRenderer);\n\n    // Screen size values\n    this.width = width;\n    this.height = height;\n    this.ratio = width / height;\n\n    // 'Real' screen size\n    this.displayWidth = width;\n    this.displayHeight = height;\n\n    // Screen to render\n    this.screen = null;\n\n    // Initialize renderer\n    this.renderer = PIXI.autoDetectRenderer(width, height, {\n      backgroundColor: 0xffb2a0,\n      antialias: false, // Because we use pixels\n      transparent: false,\n      resolution: 1,\n      autoResize: false\n    });\n    this._resized = false;\n\n    // Interaction manager for global user inputs\n    this.interactionManager = new PIXI.interaction.InteractionManager(this.renderer);\n\n    // Timer for real-time screen update\n    this.rendererTicker = new PIXI.ticker.Ticker();\n    this.rendererTicker.start();\n    this.rendererTicker.add(function () {\n      _this.update();\n    });\n    this._ticks = 0;\n\n    PIXI.UPDATE_PRIORITY.INTERACTION = 0;\n  }\n\n  /**\n   *\n   * @param {Screen} screen\n   */\n\n\n  _createClass(ScreenRenderer, [{\n    key: \"setScreen\",\n    value: function setScreen(screen) {\n      if (this.screen != null) {\n        this.screen.getRoot().scale.set(1, 1);\n        this.screen.makeInactive();\n      }\n      this.screen = screen;\n      this.screen.makeActive();\n      this.screen.getRoot().scale.set(_Configuration2.default.resolutionFactor, _Configuration2.default.resolutionFactor);\n    }\n  }, {\n    key: \"globalToLocal\",\n    value: function globalToLocal(x, y) {\n      var scrollX = document.body.scrollLeft;\n      var scrollY = document.body.scrollTop;\n      var offset = this._cumulativeOffset(this.renderer.view);\n      var localX = this.width * (x - offset.left + scrollX) / this.displayWidth;\n      var localY = this.height * (y - offset.top + scrollY) / this.displayHeight;\n      return {\n        x: localX,\n        y: localY\n      };\n    }\n  }, {\n    key: \"_cumulativeOffset\",\n    value: function _cumulativeOffset(element) {\n      var top = 0,\n          left = 0;\n      do {\n        top += element.offsetTop || 0;\n        left += element.offsetLeft || 0;\n        element = element.offsetParent;\n      } while (element);\n\n      return {\n        top: top,\n        left: left\n      };\n    }\n    /**\n     * Updates screen and re-renders it\n     */\n\n  }, {\n    key: \"update\",\n    value: function update() {\n      if (!this._resized || this._ticks++ > 60) {\n        this._resized = true;\n        this._ticks = 0;\n        var parentElement = this.renderer.view.parentElement;\n\n        if (this.pivotWidth != parentElement.clientWidth && parentElement != undefined) {\n          this.pivotWidth = parentElement.clientWidth;\n          this.resizeRendererView(this.pivotWidth, this.pivotWidth);\n        }\n      }\n\n      if (this.screen != null) {\n        this.renderer.render(this.screen.getRoot());\n\n        this.screen.onUpdate(this.rendererTicker.deltaTime);\n        TWEEN.default.update();\n      }\n\n      // monitored code goes here\n    }\n  }, {\n    key: \"resizeRendererView\",\n    value: function resizeRendererView(width, height) {\n      var viewWidth, viewHeight;\n\n      if (width / height >= this.ratio) {\n        viewWidth = height * this.ratio;\n        viewHeight = height;\n      } else {\n        viewWidth = width;\n        viewHeight = width / this.ratio;\n      }\n      this.displayWidth = viewWidth; // * 0.9;\n      this.displayHeight = viewHeight; // * 0.9;\n      this.renderer.view.style.width = this.displayWidth + \"px\";\n      this.renderer.view.style.height = this.displayHeight + \"px\";\n    }\n  }, {\n    key: \"getDomElement\",\n    value: function getDomElement() {\n      return this.renderer.view;\n    }\n  }, {\n    key: \"getInteractiveManager\",\n    value: function getInteractiveManager() {\n      return this.interactionManager;\n    }\n  }]);\n\n  return ScreenRenderer;\n}();\n\nexports.default = ScreenRenderer;\n\n//# sourceURL=webpack:///./src/ScreenRenderer.js?");

/***/ }),

/***/ "./src/SpringParty.js":
/*!****************************!*\
  !*** ./src/SpringParty.js ***!
  \****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Configuration = __webpack_require__(/*! ./Configuration.js */ \"./src/Configuration.js\");\n\nvar _Configuration2 = _interopRequireDefault(_Configuration);\n\nvar _ScreenRenderer = __webpack_require__(/*! ./ScreenRenderer.js */ \"./src/ScreenRenderer.js\");\n\nvar _ScreenRenderer2 = _interopRequireDefault(_ScreenRenderer);\n\nvar _Context = __webpack_require__(/*! ./Context.js */ \"./src/Context.js\");\n\nvar _Context2 = _interopRequireDefault(_Context);\n\nvar _MainScreen = __webpack_require__(/*! ./MainScreen.js */ \"./src/MainScreen.js\");\n\nvar _MainScreen2 = _interopRequireDefault(_MainScreen);\n\nvar _GameplayScreen = __webpack_require__(/*! ./GameplayScreen.js */ \"./src/GameplayScreen.js\");\n\nvar _GameplayScreen2 = _interopRequireDefault(_GameplayScreen);\n\nvar _LoadingScreen = __webpack_require__(/*! ./LoadingScreen.js */ \"./src/LoadingScreen.js\");\n\nvar _LoadingScreen2 = _interopRequireDefault(_LoadingScreen);\n\nvar _LoginScreen = __webpack_require__(/*! ./LoginScreen.js */ \"./src/LoginScreen.js\");\n\nvar _LoginScreen2 = _interopRequireDefault(_LoginScreen);\n\nvar _RewardScreen = __webpack_require__(/*! ./RewardScreen.js */ \"./src/RewardScreen.js\");\n\nvar _RewardScreen2 = _interopRequireDefault(_RewardScreen);\n\nvar _TestGameplayScreen = __webpack_require__(/*! ./TestGameplayScreen.js */ \"./src/TestGameplayScreen.js\");\n\nvar _TestGameplayScreen2 = _interopRequireDefault(_TestGameplayScreen);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar SpringParty = function () {\n  function SpringParty() {\n    _classCallCheck(this, SpringParty);\n\n    this.context = new _Context2.default();\n\n    // Add renderer to context\n    this.context.renderer = new _ScreenRenderer2.default(_Configuration2.default.resolution.width, _Configuration2.default.resolution.height);\n\n    this.context.screens = {\n      loading: new _LoadingScreen2.default(this.context),\n      login: new _LoginScreen2.default(this.context),\n      main: new _MainScreen2.default(this.context),\n      gameplay: new _GameplayScreen2.default(this.context),\n      test: new _TestGameplayScreen2.default(this.context),\n      reward: new _RewardScreen2.default(this.context)\n    };\n\n    this.start();\n  }\n\n  _createClass(SpringParty, [{\n    key: \"start\",\n    value: function start() {\n      this.context.switchScreen(\"loading\");\n    }\n  }]);\n\n  return SpringParty;\n}();\n\nexports.default = SpringParty;\n\n//# sourceURL=webpack:///./src/SpringParty.js?");

/***/ }),

/***/ "./src/Stage.js":
/*!**********************!*\
  !*** ./src/Stage.js ***!
  \**********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _pixi = __webpack_require__(/*! pixi.js */ \"./node_modules/pixi.js/lib/index.js\");\n\nvar PIXI = _interopRequireWildcard(_pixi);\n\nvar _Asset = __webpack_require__(/*! ./Asset.js */ \"./src/Asset.js\");\n\nvar _Asset2 = _interopRequireDefault(_Asset);\n\nvar _StageCamera = __webpack_require__(/*! ./StageCamera.js */ \"./src/StageCamera.js\");\n\nvar _StageCamera2 = _interopRequireDefault(_StageCamera);\n\nvar _Obstacle = __webpack_require__(/*! ./Obstacle.js */ \"./src/Obstacle.js\");\n\nvar _Obstacle2 = _interopRequireDefault(_Obstacle);\n\nvar _Relic = __webpack_require__(/*! ./Relic.js */ \"./src/Relic.js\");\n\nvar _Relic2 = _interopRequireDefault(_Relic);\n\nvar _StageTerritory = __webpack_require__(/*! ./StageTerritory.js */ \"./src/StageTerritory.js\");\n\nvar _StageTerritory2 = _interopRequireDefault(_StageTerritory);\n\nvar _StageMinimap = __webpack_require__(/*! ./StageMinimap.js */ \"./src/StageMinimap.js\");\n\nvar _StageMinimap2 = _interopRequireDefault(_StageMinimap);\n\nvar _Configuration = __webpack_require__(/*! ./Configuration.js */ \"./src/Configuration.js\");\n\nvar _Configuration2 = _interopRequireDefault(_Configuration);\n\nvar _Connection = __webpack_require__(/*! ./Connection.js */ \"./src/Connection.js\");\n\nvar _Connection2 = _interopRequireDefault(_Connection);\n\nvar _StageTerritoryDisplay = __webpack_require__(/*! ./StageTerritoryDisplay.js */ \"./src/StageTerritoryDisplay.js\");\n\nvar _StageTerritoryDisplay2 = _interopRequireDefault(_StageTerritoryDisplay);\n\nvar _StageObjectDisplay = __webpack_require__(/*! ./StageObjectDisplay.js */ \"./src/StageObjectDisplay.js\");\n\nvar _StageObjectDisplay2 = _interopRequireDefault(_StageObjectDisplay);\n\nvar _StageParticleEffectsDisplay = __webpack_require__(/*! ./StageParticleEffectsDisplay.js */ \"./src/StageParticleEffectsDisplay.js\");\n\nvar _StageParticleEffectsDisplay2 = _interopRequireDefault(_StageParticleEffectsDisplay);\n\nvar _StageTerrainDisplay = __webpack_require__(/*! ./StageTerrainDisplay.js */ \"./src/StageTerrainDisplay.js\");\n\nvar _StageTerrainDisplay2 = _interopRequireDefault(_StageTerrainDisplay);\n\nvar _StageTimer = __webpack_require__(/*! ./StageTimer.js */ \"./src/StageTimer.js\");\n\nvar _StageTimer2 = _interopRequireDefault(_StageTimer);\n\nvar _StageEventBoard = __webpack_require__(/*! ./StageEventBoard.js */ \"./src/StageEventBoard.js\");\n\nvar _StageEventBoard2 = _interopRequireDefault(_StageEventBoard);\n\nvar _StagePlayerBoard = __webpack_require__(/*! ./StagePlayerBoard.js */ \"./src/StagePlayerBoard.js\");\n\nvar _StagePlayerBoard2 = _interopRequireDefault(_StagePlayerBoard);\n\nvar _StagePlotter = __webpack_require__(/*! ./StagePlotter.js */ \"./src/StagePlotter.js\");\n\nvar _StagePlotter2 = _interopRequireDefault(_StagePlotter);\n\nvar _StagePlotterBox = __webpack_require__(/*! ./StagePlotterBox.js */ \"./src/StagePlotterBox.js\");\n\nvar _StagePlotterBox2 = _interopRequireDefault(_StagePlotterBox);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Stage = function (_PIXI$Container) {\n  _inherits(Stage, _PIXI$Container);\n\n  function Stage(stageData) {\n    _classCallCheck(this, Stage);\n\n    /**\n     * Metadata for stage\n     */\n    var _this = _possibleConstructorReturn(this, (Stage.__proto__ || Object.getPrototypeOf(Stage)).call(this));\n\n    _this.meta = stageData;\n    _this._ended = false;\n    _this._closed = false;\n\n    // Parties in this stage\n    _this._me = null;\n    _this._parties = [];\n\n    // Territory\n    _this._territory = null;\n    _this._territoryChanges = [];\n\n    // Relics\n    _this._relics = [];\n\n    // Stage camera\n    _this._camera = null;\n    _this._cameraTick = 0;\n    _this._cameraZoom = 1;\n\n    // Stage displays\n    _this._terrainDisplay = null;\n    _this._territoryDisplay = null;\n    _this._plotter = null;\n    _this._objectDisplay = null;\n    _this._particleEffectsDisplay = null;\n\n    // Minimap\n    _this._minimap = null;\n\n    // Timer\n    _this._timer = null;\n\n    // Event board\n    _this._eventBoard = null;\n\n    // Player board\n    _this._playerBoard = null;\n\n    // Game end handler\n    _this._onGameEndhandler = [];\n\n    // Plotter box\n    _this._plotterBox = null;\n\n    _this._initializeTerritory();\n    _this._createCamera();\n    _this._createTerrainDisplay();\n    _this._createTerritoryDisplay();\n    _this._createPlotter();\n    _this._createObjectDisplay();\n    _this._createParticleEffectsDisplay();\n    _this._createMinimap();\n    _this._createTimer(1);\n    _this._createEventBoard();\n    _this._createPlayerBoard();\n    _this._createPlotterBox();\n    return _this;\n  }\n\n  _createClass(Stage, [{\n    key: \"update\",\n\n\n    /**\n     * Make real-time updates in stage\n     */\n    value: function update(deltaTime) {\n\n      // Game closed check\n      if (this._closed) return;\n\n      // Time end check\n      if (this._ended) {\n        /*\n        results\n          stats: {time, kills, lives, relics, score}\n          players: [{partyId, userId, rank, score}]\n        */\n        this.me.stats.time = this.timer._timeTotal;\n        var results = {};\n        results.stats = this.me.stats;\n        results.players = this._playerBoard.ranking;\n        for (var i in this._onGameEndhandler) {\n          this._onGameEndhandler[i](results);\n        }\n        this._closed = true;\n        return;\n      }\n\n      // Update parties\n      for (var _i = 0; _i < this._parties.length; _i++) {\n        var party = this._parties[_i];\n\n        party.update(deltaTime);\n\n        // If party reached next tile,\n        if (party.reached) {\n          if (party === this._me) {\n            if (this._plotter.isPlotted(party.head.coordinate)) {\n              this._plotter.removePlotTile(party.head.coordinate);\n            } else if (!party.head.coordinate.equals(party.startCoordinate)) {\n              this._eventBoard.newEvent(\"kill\", party.territoryColor);\n              this.damageParty(party, 10);\n              return;\n            }\n          }\n\n          var tile = this._territory.get(party.head.coordinate.x, party.head.coordinate.y);\n          if (tile.owner == party.id) {\n            party.disableArrowGuide = true;\n            party.speedGain = 2 * party.hasBuff(\"friendly-boost\");\n          } else {\n            if (tile.owner > 0) {\n              party.speedGain = 2 * party.hasBuff(\"enemy-boost\");\n            } else {\n              party.speedGain = 0;\n            }\n            party.disableArrowGuide = false;\n          }\n\n          // Evaluate hit boundary\n          var hitBoundary = this._getHitBoundary(party.head.coordinate);\n\n          //If it hit obstacle or out of bound,\n          if (hitBoundary.indexOf(party.nextDirection) >= 0) {\n            this._territoryChanges = this._territoryChanges.concat(this._territory.removeLine(party.id));\n            // If it hit it's line\n            this._eventBoard.newEvent(\"kill\", party.territoryColor);\n            this.damageParty(party, 10);\n          }\n\n          // Let's roll'in\n          else {\n              this.trackTerritoryChanges(this._territory.step(party.id, party.head.coordinate, party.direction, party.nextDirection));\n              // Go next!\n              party.nextStep();\n            }\n        }\n      }\n\n      this._plotter.update(deltaTime, this.me.speed);\n\n      // party dead check\n      if (this.me.members.length <= 0) {\n        /*\n        results\n          stats: {time, kills, lives, relics, score}\n          players: [{partyId, userId, rank, score}]\n        */\n        this.me.stats.time = Math.round(this.timer._timeElapsed);\n        var _results = {};\n        _results.stats = this.me.stats;\n        _results.players = this._playerBoard.ranking;\n        for (var _i2 in this._onGameEndhandler) {\n          this._onGameEndhandler[_i2](_results);\n        }\n        this._closed = true;\n        return;\n      }\n\n      // Update object display\n      this._objectDisplay.update(this._camera.viewport);\n      this._terrainDisplay.update(this._camera.x, this._camera.y);\n\n      // Update territory display\n      this._territoryDisplay.update(this._camera.viewport, this._territoryChanges);\n\n      // Update party in minimap\n      this._minimap.updateParty();\n\n      if (this._territoryChanges.length > 0) {\n        // Update minimap\n        this._minimap.updateTerritory(this._territoryChanges);\n      }\n\n      // Update timer\n      this._timer.update(deltaTime);\n\n      // Update camera\n      if (this._plotter.targetPosition) {\n        //this._camera.update(this._parties[1].head, deltaTime);\n        //this._camera.update(this._plotter.targetPosition, deltaTime);\n\n        // me와 plotter의 중간\n        var ppos = this._translateCoordinate(this._me.head.coordinate);\n        var px = this._plotter.targetPosition.x;\n        var py = this._plotter.targetPosition.y;\n        var hx = this._me.head.x;\n        var hy = this._me.head.y;\n\n        if (this._cameraTick++ > 2 * 60) {\n          this._cameraTick = 0;\n          var distance = Math.floor(Math.sqrt(Math.pow(px - ppos.x, 2) + Math.pow(py - ppos.y, 2))) / 100;\n\n          if (distance > 10) {\n            this._cameraZoom = 0.7;\n          } else {\n            this._cameraZoom = 0.9;\n          }\n        }\n        //let zoom = (10 + distance) / 10;\n        //console.log(1 / zoom);\n        this._camera.zoomTo({ x: (px + hx) / 2, y: (py + hy) / 2 }, this._cameraZoom);\n      }\n\n      this._territoryChanges = [];\n    }\n  }, {\n    key: \"onGameEnd\",\n    value: function onGameEnd(handler) {\n      this._onGameEndhandler.push(handler);\n    }\n  }, {\n    key: \"damageParty\",\n    value: function damageParty(party, damage) {\n      var deadly = party.damage(damage);\n\n      if (party == this.me) _Asset2.default.sounds[\"hitSound\"].play();\n\n      this._territory.removeLine(party.id);\n\n      if (deadly) {\n        this._particleEffectsDisplay.boom(party.head.coordinate);\n      } else {\n        this._particleEffectsDisplay.tinyBoom(party.head.coordinate);\n      }\n      party.halt(0.4, function () {\n        party.displaceToStartCoordinate();\n      });\n    }\n\n    /**\n     * Add new party to stage\n     */\n\n  }, {\n    key: \"addParty\",\n    value: function addParty(party) {\n      var _this2 = this;\n\n      this._parties.push(party);\n      this._minimap.bindParty(party);\n      this._playerBoard.addParty(party);\n\n      for (var i = 0; i < party.members.length; i++) {\n        var character = party.members[i];\n        this._objectDisplay.addChild(character);\n      }\n\n      this._minimap.updateTerritory();\n      this._minimap.updateParty(party);\n\n      // Update territory colors\n      var territoryColorList = [0];\n      for (var _i3 = 0; _i3 < this._parties.length; _i3++) {\n        territoryColorList.push(this._parties[_i3].territoryColor);\n      }\n      this._territoryDisplay.setTerritoryColor(territoryColorList);\n\n      party.onDisplaced(function () {\n        _this2._onDisplaced(party);\n      });\n    }\n\n    /**\n     * Territory data\n     */\n\n  }, {\n    key: \"_initializeTerritory\",\n    value: function _initializeTerritory() {\n      var _this3 = this;\n\n      this._territory = new _StageTerritory2.default(this.meta.dimension.width, this.meta.dimension.height);\n      for (var y = 0; y < this._territory.height; y++) {\n        for (var x = 0; x < this._territory.width; x++) {\n          if (this.meta.territory[y][x] > 0) {\n            this.trackTerritoryChanges(this._territory.occupy(this.meta.territory[y][x], { x: x, y: y }));\n          }\n        }\n      }\n\n      this._territory.onHitLine(function (partyId, hitPartyId) {\n        _this3._onPartyHitLine(partyId, hitPartyId);\n      });\n\n      this._territory.onOccupy(function (partyId, changes) {\n        _this3._onPartyOccupy(partyId, changes);\n      });\n    }\n\n    /**\n     * Camera\n     */\n\n  }, {\n    key: \"_createCamera\",\n    value: function _createCamera() {\n      this._camera = new _StageCamera2.default();\n      this._camera.bind(this);\n      this._camera.setBound(this.meta.dimension.width, this.meta.dimension.height);\n    }\n\n    /**\n     * Terrain Display\n     */\n\n  }, {\n    key: \"_createTerrainDisplay\",\n    value: function _createTerrainDisplay() {\n      this._terrainDisplay = new _StageTerrainDisplay2.default();\n      this._terrainDisplay.bind(this.meta);\n\n      this.addChild(this._terrainDisplay);\n    }\n\n    /**\n     * Territory Display\n     */\n\n  }, {\n    key: \"_createTerritoryDisplay\",\n    value: function _createTerritoryDisplay() {\n      this._territoryDisplay = new _StageTerritoryDisplay2.default();\n      this._territoryDisplay.bind(this._territory);\n      this.addChild(this._territoryDisplay);\n\n      // Update territory display\n      this._territoryDisplay.update(this._camera.x, this._camera.y);\n    }\n  }, {\n    key: \"_createPlotter\",\n    value: function _createPlotter() {\n      var _this4 = this;\n\n      this._plotter = new _StagePlotter2.default();\n      this._plotter.bindEnvironment(this._territory, this.meta.obstacles);\n      this._plotter.onPlot(function (path) {\n        _this4._onMePlot(path);\n      });\n      this.addChild(this._plotter);\n    }\n\n    /**\n     * Object Display\n     */\n\n  }, {\n    key: \"_createObjectDisplay\",\n    value: function _createObjectDisplay() {\n      this._objectDisplay = new _StageObjectDisplay2.default();\n\n      for (var y = 0; y < this.meta.dimension.height; y++) {\n        for (var x = 0; x < this.meta.dimension.width; x++) {\n          if (this.meta.obstacles[y][x] < 1) {\n            continue;\n          }\n          var obstacle = void 0;\n          if (this.meta.obstacles[y][x] < 4) {\n            obstacle = new _Relic2.default(this.meta.obstacles[y][x], x, y);\n            obstacle.hover = true;\n            this._relics.push(obstacle);\n          } else {\n            obstacle = new _Obstacle2.default(this.meta.obstacles[y][x], x, y);\n          }\n          var tilePosition = this._translateCoordinate({\n            x: x,\n            y: y\n          });\n          obstacle.x = tilePosition.x;\n          obstacle.y = tilePosition.y;\n          this._objectDisplay.addChild(obstacle);\n        }\n      }\n      this.addChild(this._objectDisplay);\n    }\n  }, {\n    key: \"_createParticleEffectsDisplay\",\n    value: function _createParticleEffectsDisplay() {\n      this._particleEffectsDisplay = new _StageParticleEffectsDisplay2.default();\n\n      this.addChild(this._particleEffectsDisplay);\n    }\n  }, {\n    key: \"_createMinimap\",\n    value: function _createMinimap() {\n      this._minimap = new _StageMinimap2.default(this.meta);\n      this._minimap.bindTerritory(this._territory);\n\n      // Update minimap\n      this._minimap.updateTerritory();\n    }\n  }, {\n    key: \"_translateCoordinate\",\n    value: function _translateCoordinate(coordinate) {\n      var tx = coordinate.x * _Configuration2.default.isometric.unitWidth / 2 - coordinate.y * _Configuration2.default.isometric.unitWidth / 2;\n      var ty = coordinate.x * _Configuration2.default.isometric.unitHeight / 2 + coordinate.y * _Configuration2.default.isometric.unitHeight / 2;\n      return {\n        x: tx,\n        y: ty\n      };\n    }\n  }, {\n    key: \"_createTimer\",\n    value: function _createTimer(seconds) {\n      var _this5 = this;\n\n      this._timer = new _StageTimer2.default(seconds);\n      this._timer.onTimeDone(function () {\n        _this5._ended = true;\n      });\n    }\n  }, {\n    key: \"_createEventBoard\",\n    value: function _createEventBoard() {\n      this._eventBoard = new _StageEventBoard2.default();\n    }\n  }, {\n    key: \"_createPlayerBoard\",\n    value: function _createPlayerBoard() {\n      this._playerBoard = new _StagePlayerBoard2.default();\n    }\n  }, {\n    key: \"_createPlotterBox\",\n    value: function _createPlotterBox() {\n      this._plotterBox = new _StagePlotterBox2.default();\n    }\n  }, {\n    key: \"_getHitBoundary\",\n    value: function _getHitBoundary(coordinate) {\n      if (coordinate.y < 0 || coordinate.y >= this.meta.terrain.length) {\n        return [0, 1, 2, 3];\n      }\n      if (coordinate.x < 0 || coordinate.x >= this.meta.terrain[coordinate.y].length) {\n        return [0, 1, 2, 3];\n      }\n\n      var boundary = [];\n\n      if (coordinate.y == 0) boundary.push(1);\n      if (coordinate.x == 0) boundary.push(2);\n      if (coordinate.y == this.meta.dimension.height - 1) boundary.push(3);\n      if (coordinate.x == this.meta.dimension.width - 1) boundary.push(0);\n\n      // TODO: check whether it is an obstacle\n      if (this.meta.obstacles[coordinate.y][coordinate.x] > 0) {\n        return [0, 1, 2, 3];\n      }\n\n      return boundary;\n    }\n  }, {\n    key: \"_onPartyHitLine\",\n    value: function _onPartyHitLine(subjectId, objectId) {\n      var subjectParty = void 0;\n      var objectParty = void 0;\n      // Find party\n      for (var i = 0; i < this._parties.length; i++) {\n        if (this._parties[i].id == subjectId) {\n          subjectParty = this._parties[i];\n        }\n        if (this._parties[i].id == objectId) {\n          objectParty = this._parties[i];\n        }\n      }\n      // If it hit it's line\n      this._eventBoard.newEvent(\"kill\", subjectParty.territoryColor, objectParty.territoryColor);\n      this.damageParty(objectParty, 10);\n      if (subjectId != objectId) {\n        subjectParty.stats.kills++;\n      }\n    }\n  }, {\n    key: \"_onPartyOccupy\",\n    value: function _onPartyOccupy(partyId, changes) {\n      // 만약 적이 먹은 영역에 내가 있다면, die!\n      var targetParty = void 0;\n\n      for (var i = 0; i < this._parties.length; i++) {\n        var party = this._parties[i];\n\n        if (party.id == partyId) {\n          targetParty = this._parties[i];\n          _Asset2.default.sounds[\"fillSound\"].play();\n        }\n      }\n\n      for (var _i4 = 0; _i4 < this._parties.length; _i4++) {\n        var _party = this._parties[_i4];\n\n        if (_party.id != partyId) {\n          if (this._isChanged(changes, _party.head.coordinate.x, _party.head.coordinate.y)) {\n            this.damageParty(_party, 10);\n            targetParty.stats.kills++;\n          }\n        }\n        this._playerBoard.updatePlayerScore(_party.id, this._territory.getScore(_party.id));\n        targetParty.stats.score = this._territory.getScore(_party.id);\n      }\n      // 유물 체크\n      for (var _i5 = 0; _i5 < this._relics.length; _i5++) {\n        var relic = this._relics[_i5];\n\n        if (this._isChanged(changes, relic.coordinate.x, relic.coordinate.y)) {\n          if (relic.owner != targetParty && relic.owner != null) {\n            relic.owner.loseRelic(relic);\n          }\n          relic.owner = targetParty;\n          targetParty.gainRelic(relic);\n          targetParty.stats.relic++;\n        }\n      }\n\n      this._playerBoard.update();\n    }\n  }, {\n    key: \"_onMePlot\",\n    value: function _onMePlot(path) {\n      // 서버로 전송\n      if (path.length < 5) {\n        _Connection2.default.sendPath(this.me.name, path);\n      }\n      this._me.schedulePath(path);\n\n      // this.print(\"mine! \",this.me._scheduledPath)\n      this._plotterBox.setPrototype(this._plotter.nextPrototype);\n    }\n  }, {\n    key: \"_onDisplaced\",\n    value: function _onDisplaced(party) {\n      // If me, init plotter\n\n      if (party == this._me) {\n        this._plotter.clear();\n        this._plotter.initialize(party.startCoordinate, _StagePlotter2.default.INITIALIZER, party.startDirection);\n        this._plotter.setColor(party.territoryColor);\n      }\n\n      // For others, just push some paths (4)\n      else {\n          // forward path\n          var path = [];\n          var startX = party.startCoordinate.x;\n          var startY = party.startCoordinate.y;\n          for (var i = 0; i < 5; i++) {\n            switch (party.startDirection) {\n              case 0:\n                startX++;\n                break;\n              case 1:\n                startY--;\n                break;\n              case 2:\n                startX--;\n                break;\n              case 3:\n                startY++;\n                break;\n            }\n            path.push({ x: startX, y: startY });\n          }\n          party.schedulePath(path);\n          // this.print(\"opponents! \",party._scheduledPath);\n        }\n    }\n  }, {\n    key: \"print\",\n    value: function print(id, path) {\n      var ss = path.length + \" | \";\n      for (var i = 0; i < path.length; i++) {\n        ss += \"(\" + path[i].x + \",\" + path[i].y + \"), \";\n      }\n      console.log(id, ss);\n    }\n  }, {\n    key: \"_isChanged\",\n    value: function _isChanged(changes, x, y) {\n      return changes.indexOf(y * this._territory.width + x) >= 0;\n    }\n  }, {\n    key: \"trackTerritoryChanges\",\n    value: function trackTerritoryChanges(changes) {\n      this._territoryChanges = this._territoryChanges.concat(changes);\n    }\n  }, {\n    key: \"parties\",\n    get: function get() {\n      return this._parties;\n    }\n  }, {\n    key: \"minimap\",\n    get: function get() {\n      return this._minimap;\n    }\n  }, {\n    key: \"timer\",\n    get: function get() {\n      return this._timer;\n    }\n  }, {\n    key: \"eventBoard\",\n    get: function get() {\n      return this._eventBoard;\n    }\n  }, {\n    key: \"playerBoard\",\n    get: function get() {\n      return this._playerBoard;\n    }\n  }, {\n    key: \"plotter\",\n    get: function get() {\n      return this._plotter;\n    }\n  }, {\n    key: \"plotterBox\",\n    get: function get() {\n      return this._plotterBox;\n    }\n  }, {\n    key: \"territory\",\n    get: function get() {\n      return this._territory;\n    }\n  }, {\n    key: \"me\",\n    set: function set(value) {\n      this._me = value;\n    },\n    get: function get() {\n      return this._me;\n    }\n  }]);\n\n  return Stage;\n}(PIXI.Container);\n\nexports.default = Stage;\n\n//# sourceURL=webpack:///./src/Stage.js?");

/***/ }),

/***/ "./src/StageCamera.js":
/*!****************************!*\
  !*** ./src/StageCamera.js ***!
  \****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _pixi = __webpack_require__(/*! pixi.js */ \"./node_modules/pixi.js/lib/index.js\");\n\nvar PIXI = _interopRequireWildcard(_pixi);\n\nvar _Configuration = __webpack_require__(/*! ./Configuration.js */ \"./src/Configuration.js\");\n\nvar _Configuration2 = _interopRequireDefault(_Configuration);\n\nvar _tween = __webpack_require__(/*! @tweenjs/tween.js */ \"./node_modules/@tweenjs/tween.js/src/Tween.js\");\n\nvar TWEEN = _interopRequireWildcard(_tween);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar StageCamera = function () {\n  function StageCamera() {\n    _classCallCheck(this, StageCamera);\n\n    this._SW = _Configuration2.default.baseResolution.width;\n    this._SH = _Configuration2.default.baseResolution.height;\n\n    // Targeted stage\n    this._stage = null;\n\n    // Camera boudary size\n    this._width = 0;\n    this._height = 0;\n    this._x = 0;\n    this._y = 0;\n\n    this.viewport = {\n      width: 0,\n      height: 0,\n      x: 0,\n      y: 0\n    };\n\n    // Camera viewport position\n\n    this._padding = _Configuration2.default.isometric.unitWidth;\n    this._bound = null;\n\n    this._positionTween = null;\n    this._scaleTween = null;\n\n    this.interactiveChildren = false;\n  }\n\n  _createClass(StageCamera, [{\n    key: \"setBound\",\n    value: function setBound(width, height) {\n      this._width = width;\n      this._height = height;\n\n      var lbc = this._translateCoordinate({\n        x: 0,\n        y: height - 1\n      });\n      var rtc = this._translateCoordinate({\n        x: width - 1,\n        y: 0\n      });\n      var rbc = this._translateCoordinate({\n        x: width - 1,\n        y: height - 1\n      });\n      var ltc = this._translateCoordinate({\n        x: 0,\n        y: 0\n      });\n\n      this._bound = new PIXI.Rectangle(lbc.x, ltc.y, -lbc.x + rtc.x, rbc.y);\n    }\n  }, {\n    key: \"bind\",\n    value: function bind(stage) {\n      this._stage = stage;\n\n      var tween = new TWEEN.Tween(this._stage.scale).to({\n        x: 0.8,\n        y: 0.8\n      }, 2200).easing(TWEEN.Easing.Quadratic.Out);\n      // .start();\n    }\n  }, {\n    key: \"zoomTo\",\n    value: function zoomTo(position, scale) {\n      if (this._currentTargetPosition == position && this._currentTargetScale == scale) {\n        return;\n      }\n\n      // 여기서 포지션은 scale1에서 중앙점임\n      this.viewport.width = this._SW / scale;\n      this.viewport.height = this._SH / scale;\n      this.viewport.x = position.x + 128 - this.viewport.width / 2;\n      this.viewport.y = position.y - this.viewport.height / 2;\n\n      var targetX = -((position.x + 128) * scale) + this._SW / 2;\n      var targetY = -(position.y * scale) + this._SH / 2;\n\n      var dx = 0.03 * (targetX - this._stage.x);\n      var dy = 0.03 * (targetY - this._stage.y);\n\n      //dx = Math.abs(dx) >= 3 ? (dx > 0 ? 1 : -1) * 3 : dx;\n      //dy = Math.abs(dy) >= 1.5 ? (dy > 0 ? 1 : -1) * 1.5 : dy;\n\n      this._stage.x += dx;\n      this._stage.y += dy;\n\n      /*\n      if (this._currentTargetPosition != position) {\n        if (this._positionTween != null) {\n          this._positionTween.stop();\n        }\n        this._positionTween = new TWEEN.Tween(this._stage)\n          .to(\n            {\n              x: targetX,\n              y: targetY\n            },\n            1200\n          )\n          .easing(TWEEN.Easing.Quadratic.Out)\n          .start();\n      }\n      */\n      // this._stage.scale.set(scale, scale);\n      if (this._currentTargetScale != scale) {\n        // return;\n        if (this._scaleTween != null) {\n          this._scaleTween.stop();\n        }\n\n        this._scaleTween = new TWEEN.Tween(this._stage.scale).to({\n          x: scale,\n          y: scale\n        }, 2000).easing(TWEEN.Easing.Quadratic.Out).start();\n      }\n\n      this._currentTargetPosition = position;\n      this._currentTargetScale = scale;\n    }\n  }, {\n    key: \"update\",\n    value: function update(position, deltaTime) {\n      if (this._stage != null) {\n        var targetX = this._SW / 2 - position.x - 128;\n        var targetY = this._SH / 2 - position.y;\n\n        // Check for _bounds\n        targetX = Math.min(targetX, -(this._bound.x - this._padding));\n        targetX = Math.max(targetX, -(this._bound.x + this._bound.width + this._padding - this._SW));\n\n        targetY = Math.min(targetY, -(this._bound.y - this._padding));\n        targetY = Math.max(targetY, -(this._bound.y + this._bound.height + this._padding - this._SH));\n\n        // Adjust viewport coord\n        var dx = 0.03 * (targetX - this.x);\n        var dy = 0.03 * (targetY - this.y);\n\n        //dx = Math.abs(dx) >= 3 ? (dx > 0 ? 1 : -1) * 3 : dx;\n        //dy = Math.abs(dy) >= 1.5 ? (dy > 0 ? 1 : -1) * 1.5 : dy;\n\n        this._stage.x += dx * deltaTime;\n        this._stage.y += dy * deltaTime;\n\n        //this._stage.x = targetX;\n        //this._stage.y = targetY;\n        this._x = this._stage.x;\n        this._y = this._stage.y;\n      }\n    }\n  }, {\n    key: \"_translateCoordinate\",\n    value: function _translateCoordinate(coordinate) {\n      var tx = coordinate.x * _Configuration2.default.isometric.unitWidth / 2 - coordinate.y * _Configuration2.default.isometric.unitWidth / 2;\n      var ty = coordinate.x * _Configuration2.default.isometric.unitHeight / 2 + coordinate.y * _Configuration2.default.isometric.unitHeight / 2;\n      return {\n        x: tx,\n        y: ty\n      };\n    }\n  }, {\n    key: \"x\",\n    get: function get() {\n      return this._x;\n    }\n  }, {\n    key: \"y\",\n    get: function get() {\n      return this._y;\n    }\n  }]);\n\n  return StageCamera;\n}();\n\nexports.default = StageCamera;\n\n//# sourceURL=webpack:///./src/StageCamera.js?");

/***/ }),

/***/ "./src/StageData.js":
/*!**************************!*\
  !*** ./src/StageData.js ***!
  \**************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar gen = __webpack_require__(/*! random-seed */ \"./node_modules/random-seed/index.js\");\n\nvar StageData = function () {\n  function StageData(seed) {\n    _classCallCheck(this, StageData);\n\n    this.dimension = {\n      width: 32,\n      height: 32\n    };\n    this.seed = seed || 0;\n    this.random = gen(this.seed);\n    this.territory = this._generateEmptyTerritory();\n    this.terrain = this._generateTerrain();\n    this.obstacles = this._generateObstacles();\n  }\n\n  _createClass(StageData, [{\n    key: \"_generateEmptyTerritory\",\n    value: function _generateEmptyTerritory() {\n      var territory = [];\n      for (var y = 0; y < this.dimension.height; y++) {\n        territory[y] = [];\n        for (var x = 0; x < this.dimension.width; x++) {\n          if (y < 3 && x < 3) {\n            territory[y][x] = 2;\n          } else if (y < 3 && x > this.dimension.width - 4) {\n            territory[y][x] = 1;\n          } else if (y > this.dimension.height - 4 && x > this.dimension.width - 4) {\n            territory[y][x] = 4;\n          } else if (y > this.dimension.height - 4 && x < 3) {\n            territory[y][x] = 3;\n          } else {\n            territory[y][x] = 0;\n          }\n        }\n      }\n      return territory;\n    }\n  }, {\n    key: \"_generateTerrain\",\n    value: function _generateTerrain() {\n      var terrain = [];\n      for (var y = 0; y < this.dimension.height; y++) {\n        terrain[y] = [];\n        for (var x = 0; x < this.dimension.width; x++) {\n          if (this.territory[y][x] > 0) {\n            terrain[y][x] = 0;\n            continue;\n          }\n          terrain[y][x] = this.random(100) > 90 ? -1 : this.random(100) > 30 ? 0 : 1;\n        }\n      }\n      return terrain;\n    }\n  }, {\n    key: \"_generateObstacles\",\n    value: function _generateObstacles(seed) {\n      var obstacles = [];\n      for (var y = 0; y < this.dimension.height; y++) {\n        obstacles[y] = [];\n        for (var x = 0; x < this.dimension.width; x++) {\n          if (this.territory[y][x] || this.terrain[y][x] == -1) {\n            obstacles[y][x] = 0;\n            continue;\n          }\n          obstacles[y][x] = this.random(100) > 98 ? Math.floor(this.random(100) * 0.1) : 0;\n        }\n      }\n      return obstacles;\n    }\n  }]);\n\n  return StageData;\n}();\n\nexports.default = StageData;\n\n//# sourceURL=webpack:///./src/StageData.js?");

/***/ }),

/***/ "./src/StageEventBoard.js":
/*!********************************!*\
  !*** ./src/StageEventBoard.js ***!
  \********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _pixi = __webpack_require__(/*! pixi.js */ \"./node_modules/pixi.js/lib/index.js\");\n\nvar PIXI = _interopRequireWildcard(_pixi);\n\nvar _Asset = __webpack_require__(/*! ./Asset.js */ \"./src/Asset.js\");\n\nvar _Asset2 = _interopRequireDefault(_Asset);\n\nvar _Configuration = __webpack_require__(/*! ./Configuration.js */ \"./src/Configuration.js\");\n\nvar _Configuration2 = _interopRequireDefault(_Configuration);\n\nvar _tween = __webpack_require__(/*! @tweenjs/tween.js */ \"./node_modules/@tweenjs/tween.js/src/Tween.js\");\n\nvar TWEEN = _interopRequireWildcard(_tween);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar StageEventBoard = function (_PIXI$Container) {\n  _inherits(StageEventBoard, _PIXI$Container);\n\n  function StageEventBoard() {\n    _classCallCheck(this, StageEventBoard);\n\n    var _this = _possibleConstructorReturn(this, (StageEventBoard.__proto__ || Object.getPrototypeOf(StageEventBoard)).call(this));\n\n    _this._events = null;\n\n    _this._eventBackgroundTexture = null;\n    _this._killIconTexture = null;\n    _this._gobletIconTexture = null;\n    _this._arrowIconTexture = null;\n\n    _this._initialize();\n    return _this;\n  }\n\n  _createClass(StageEventBoard, [{\n    key: \"newEvent\",\n    value: function newEvent(type, color1, color2) {\n      var _this2 = this;\n\n      var eventCard = new PIXI.Container();\n      var eventCardBackground = new PIXI.Sprite(this._eventBackgroundTexture);\n      var eventCardIcon = void 0;\n\n      eventCard.addChild(eventCardBackground);\n\n      if (type == \"kill\") {\n        eventCardIcon = new PIXI.Sprite(this._killIconTexture);\n        eventCardIcon.x = 13;\n        eventCardIcon.y = 14;\n        eventCard.addChild(eventCardIcon);\n\n        if (color2 != null) {\n          var eventCardArrow = new PIXI.Sprite(this._arrowIconTexture);\n          var eventSubject = new PIXI.Graphics();\n          var eventObject = new PIXI.Graphics();\n\n          eventSubject.beginFill(color1);\n          eventSubject.drawRect(0, 0, 40, 30);\n          eventSubject.endFill();\n\n          eventSubject.x = 70;\n          eventSubject.y = 20;\n\n          eventObject.beginFill(color2);\n          eventObject.drawRect(0, 0, 40, 30);\n          eventObject.endFill();\n\n          eventCardArrow.x = 118;\n          eventCardArrow.y = 28;\n          eventObject.x = 138;\n          eventObject.y = 20;\n\n          eventCard.addChild(eventCardArrow);\n          eventCard.addChild(eventSubject);\n          eventCard.addChild(eventObject);\n        } else {\n          var _eventSubject = new PIXI.Graphics();\n\n          _eventSubject.beginFill(color1);\n          _eventSubject.drawRect(0, 0, 108, 30);\n          _eventSubject.endFill();\n\n          _eventSubject.x = 70;\n          _eventSubject.y = 20;\n          eventCard.addChild(_eventSubject);\n        }\n      } else if (type == \"relic\") {\n        eventCardIcon = new PIXI.Sprite(this._gobletIconTexture);\n        eventCardIcon.x = 13;\n        eventCardIcon.y = 14;\n        eventCard.addChild(eventCardIcon);\n\n        var _eventSubject2 = new PIXI.Graphics();\n\n        _eventSubject2.beginFill(color1);\n        _eventSubject2.drawRect(0, 0, 108, 30);\n        _eventSubject2.endFill();\n\n        _eventSubject2.x = 70;\n        _eventSubject2.y = 20;\n        eventCard.addChild(_eventSubject2);\n      } else {}\n\n      var tween = new TWEEN.Tween(eventCard).to({ alpha: 0 }, 3000).easing(TWEEN.Easing.Exponential.In).onComplete(function () {\n        _this2._events.shift();\n        _this2.removeChild(eventCard);\n        _this2.update();\n      }).start();\n\n      eventCard.y = this._events.length * 100;\n\n      this._events.push(eventCard);\n      this.addChild(eventCard);\n      this.update();\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      for (var i = 0; i < this._events.length; i++) {\n        var tween = new TWEEN.Tween(this._events[i]).to({ y: i * 100 }, 300).easing(TWEEN.Easing.Quadratic.Out).start();\n      }\n    }\n  }, {\n    key: \"_initialize\",\n    value: function _initialize() {\n      this._events = [];\n      this._eventBackgroundTexture = _Asset2.default.graphics[\"nametag\"];\n      this._killIconTexture = _Asset2.default.graphics[\"icon-skull\"];\n      this._gobletIconTexture = _Asset2.default.graphics[\"icon-goblet\"];\n      this._arrowIconTexture = _Asset2.default.graphics[\"icon-arrow\"];\n    }\n  }]);\n\n  return StageEventBoard;\n}(PIXI.Container);\n\nexports.default = StageEventBoard;\n\n//# sourceURL=webpack:///./src/StageEventBoard.js?");

/***/ }),

/***/ "./src/StageMiniTimer.js":
/*!*******************************!*\
  !*** ./src/StageMiniTimer.js ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _pixi = __webpack_require__(/*! pixi.js */ \"./node_modules/pixi.js/lib/index.js\");\n\nvar PIXI = _interopRequireWildcard(_pixi);\n\nvar _Asset = __webpack_require__(/*! ./Asset.js */ \"./src/Asset.js\");\n\nvar _Asset2 = _interopRequireDefault(_Asset);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar StageMiniTimer = function (_PIXI$Container) {\n  _inherits(StageMiniTimer, _PIXI$Container);\n\n  function StageMiniTimer() {\n    _classCallCheck(this, StageMiniTimer);\n\n    // Time\n    var _this = _possibleConstructorReturn(this, (StageMiniTimer.__proto__ || Object.getPrototypeOf(StageMiniTimer)).call(this));\n\n    _this._totalTicks = 0;\n    _this._currentTicks = 0;\n    _this._expired = true;\n\n    // Sprites\n    _this._background = null;\n    _this._barContainer = null;\n    _this._bar = null;\n    _this._barLeftEdge = null;\n    _this._barRightEdge = null;\n\n    // Textures\n    _this._backgroundTexture = null;\n    _this._barTexture = null;\n    _this._barEdgeTexture = null;\n\n    _this._onTimeDoneHandlers = [];\n\n    _this._initializeGraphics();\n    return _this;\n  }\n\n  _createClass(StageMiniTimer, [{\n    key: \"start\",\n    value: function start(ticks) {\n      this._totalTicks = ticks;\n      this._currentTicks = 0;\n      this._expired = false;\n\n      this.update(0);\n    }\n  }, {\n    key: \"update\",\n    value: function update(deltaTime) {\n      if (this._expired) {\n        return;\n      }\n\n      this._currentTicks += deltaTime;\n\n      var barWidth = 206 * (this._totalTicks - this._currentTicks) / this._totalTicks;\n      if (barWidth >= 0) {\n        this._bar.width = barWidth;\n        this._barRightEdge.x = barWidth + 28;\n      } else {\n        this._expired = true;\n\n        for (var i = 0; i < this._onTimeDoneHandlers.length; i++) {\n          this._onTimeDoneHandlers[i]();\n        }\n      }\n    }\n  }, {\n    key: \"onTimeDone\",\n    value: function onTimeDone(handler) {\n      this._onTimeDoneHandlers.push(handler);\n    }\n  }, {\n    key: \"_initializeTimer\",\n    value: function _initializeTimer() {\n      this._timeElapsed = 0;\n      this._prevTimeElapsed = -0;\n      this._expired = false;\n    }\n  }, {\n    key: \"_initializeGraphics\",\n    value: function _initializeGraphics() {\n      // Load assets\n      this._backgroundTexture = _Asset2.default.graphics[\"timelimit-background\"];\n      this._barTexture = _Asset2.default.graphics[\"timer-bar\"];\n      this._barEdgeTexture = _Asset2.default.graphics[\"timer-edge\"];\n\n      // Create sprites\n      this._background = new PIXI.Sprite(this._backgroundTexture);\n      this._barContainer = new PIXI.Container();\n      this._bar = new PIXI.Sprite(this._barTexture);\n      this._barLeftEdge = new PIXI.Sprite(this._barEdgeTexture);\n      this._barRightEdge = new PIXI.Sprite(this._barEdgeTexture);\n\n      this._bar.height = 51;\n      this._barLeftEdge.height = 51;\n      this._barRightEdge.height = 51;\n\n      this._barContainer.y = 45;\n\n      this._bar.x = 18 + 11;\n      this._barLeftEdge.scale.x = -1;\n      this._barLeftEdge.x = 18 + 12;\n\n      this._barContainer.addChild(this._bar);\n      this._barContainer.addChild(this._barLeftEdge);\n      this._barContainer.addChild(this._barRightEdge);\n      this.addChild(this._background);\n      this.addChild(this._barContainer);\n    }\n  }]);\n\n  return StageMiniTimer;\n}(PIXI.Container);\n\nexports.default = StageMiniTimer;\n\n//# sourceURL=webpack:///./src/StageMiniTimer.js?");

/***/ }),

/***/ "./src/StageMinimap.js":
/*!*****************************!*\
  !*** ./src/StageMinimap.js ***!
  \*****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _pixi = __webpack_require__(/*! pixi.js */ \"./node_modules/pixi.js/lib/index.js\");\n\nvar PIXI = _interopRequireWildcard(_pixi);\n\nvar _Asset = __webpack_require__(/*! ./Asset.js */ \"./src/Asset.js\");\n\nvar _Asset2 = _interopRequireDefault(_Asset);\n\nvar _Configuration = __webpack_require__(/*! ./Configuration.js */ \"./src/Configuration.js\");\n\nvar _Configuration2 = _interopRequireDefault(_Configuration);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar StageMinimap = function (_PIXI$Container) {\n  _inherits(StageMinimap, _PIXI$Container);\n\n  function StageMinimap(stageData) {\n    _classCallCheck(this, StageMinimap);\n\n    var _this = _possibleConstructorReturn(this, (StageMinimap.__proto__ || Object.getPrototypeOf(StageMinimap)).call(this));\n\n    _this._TW = _Configuration2.default.isometric.unitWidth / 8;\n    _this._TH = _Configuration2.default.isometric.unitHeight / 8;\n    _this._SIZE = 16;\n    _this._SCALE = _Configuration2.default.isometric.unitWidth / (_this._SIZE * _this._TW);\n\n    // Territory\n    _this._territory = null;\n\n    // Parties\n    _this._parties = [];\n    _this._partiesByIndex = [];\n    _this._partySprites = [];\n\n    // Territory tile graphics\n    _this._territoryDisplay = null;\n    _this._territoryTiles = null;\n    _this._territoryTileTexture = null;\n\n    // Party graphics\n    _this._partyDisplay = null;\n    _this._partyTexture = null;\n\n    _this._initializeTerritoryDisplay();\n    _this._initializePartyDisplay();\n    return _this;\n  }\n\n  _createClass(StageMinimap, [{\n    key: \"bindTerritory\",\n    value: function bindTerritory(territory) {\n      this._territory = territory;\n      this._SCALE = this._SCALE * this._territory.height;\n    }\n  }, {\n    key: \"bindParty\",\n    value: function bindParty(party) {\n      // Add party sprite\n\n      var partySprite = new PIXI.Container();\n\n      var inner = new PIXI.Sprite(this._partyTexture);\n      inner.scale.set(2, 2);\n      inner.anchor.set(0.5, 0.5);\n      inner.tint = 0xffffff;\n      inner.alpha = 0.7;\n\n      var outer = new PIXI.Sprite(this._partyTexture);\n      outer.anchor.set(0.5, 0.5);\n      outer.tint = party.territoryColor;\n      outer.alpha = 0.7;\n\n      partySprite.addChild(inner);\n      partySprite.addChild(outer);\n      partySprite.cacheAsBitmap = true;\n\n      this._partyDisplay.addChild(partySprite);\n      this._partySprites.push(partySprite);\n\n      // Register party\n      this._partiesByIndex[party.id] = party;\n      this._parties.push(party);\n      this.updateParty();\n    }\n  }, {\n    key: \"unbindParty\",\n    value: function unbindParty(party) {\n      var i = this._parties.indexOf(party);\n      if (i >= 0) {\n        this._parties.push(party);\n        this.updateParty();\n      }\n    }\n  }, {\n    key: \"updateTerritory\",\n    value: function updateTerritory(modifiedCoordinates) {\n      if (this._territory != null) {\n        var modifiedRegions = [];\n\n        var coverAreaWidth = Math.floor(this._territory.width / this._SIZE);\n        var coverAreaHeight = Math.floor(this._territory.height / this._SIZE);\n\n        // Calculate modified regions to make efficient update\n        if (modifiedCoordinates != null) {\n          for (var i = 0; i < modifiedCoordinates.length; i++) {\n            var x = modifiedCoordinates[i] % this._territory.width;\n            var y = Math.floor(modifiedCoordinates[i] / this._territory.width);\n\n            var regionX = Math.floor(x / coverAreaWidth);\n            var regionY = Math.floor(y / coverAreaHeight);\n            var regionIndex = regionY * coverAreaWidth + regionX;\n\n            if (modifiedRegions.indexOf(regionIndex) < 0) {\n              modifiedRegions.push(regionIndex);\n            }\n          }\n        }\n\n        this._territoryDisplay.cacheAsBitmap = false;\n\n        // Calculate dominance\n        for (var _y = 0; _y < this._SIZE; _y++) {\n          for (var _x = 0; _x < this._SIZE; _x++) {\n            if (modifiedCoordinates != null && modifiedRegions.indexOf(_y * coverAreaWidth + _x) < 0) {\n              continue;\n            }\n\n            // Occupation Ratio\n            var teamOccupationRatio = [0, 0, 0, 0, 0, 0, 0, 0];\n            for (var cy = _y * coverAreaHeight; cy < (_y + 1) * coverAreaHeight; cy++) {\n              for (var cx = _x * coverAreaWidth; cx < (_x + 1) * coverAreaWidth; cx++) {\n                var index = this._territory.get(cx, cy).owner;\n                teamOccupationRatio[index]++;\n              }\n            }\n\n            var dominantPartyIndex = 0;\n            var dominanceRatio = 0;\n\n            // Find most dominant party\n            for (var _i = 0; _i < teamOccupationRatio.length; _i++) {\n              if (teamOccupationRatio[_i] > dominanceRatio) {\n                dominantPartyIndex = _i;\n                dominanceRatio = teamOccupationRatio[_i];\n              }\n            }\n\n            dominanceRatio = dominanceRatio / (coverAreaWidth * coverAreaHeight);\n\n            // Not occupied\n            if (dominantPartyIndex == 0) {\n              if (this._territoryTiles[_y][_x].checked) {\n                this._territoryTiles[_y][_x].tint = 0xeeeeee;\n              } else {\n                this._territoryTiles[_y][_x].tint = 0xffffff;\n              }\n            }\n\n            // Color it!\n            else if (this._partiesByIndex[dominantPartyIndex] != null) {\n                var dominantParty = this._partiesByIndex[dominantPartyIndex];\n\n                this._territoryTiles[_y][_x].tint = dominantParty.territoryColor;\n                this._territoryTiles[_y][_x].alpha = 0.7 * dominanceRatio;\n              }\n          }\n        }\n        this._territoryDisplay.cacheAsBitmap = true;\n      }\n    }\n  }, {\n    key: \"updateParty\",\n    value: function updateParty() {\n      if (this._parties != null) {\n        for (var i = 0; i < this._parties.length; i++) {\n          var party = this._parties[i];\n          var partySprite = this._partySprites[i];\n          partySprite.x = party.head.x / this._SCALE + 256;\n          partySprite.y = party.head.y / this._SCALE;\n        }\n      }\n    }\n  }, {\n    key: \"_initializeTerritoryDisplay\",\n    value: function _initializeTerritoryDisplay() {\n      this._territoryDisplay = new PIXI.Container();\n      this._territoryTiles = [];\n      this._territoryTileTexture = _Asset2.default.graphics[\"minimap-tile\"];\n\n      var checked = false;\n      for (var y = 0; y < this._SIZE; y++) {\n        this._territoryTiles[y] = [];\n        checked = !checked;\n        for (var x = 0; x < this._SIZE; x++) {\n          var tile = new PIXI.Sprite(this._territoryTileTexture);\n          tile.alpha = 0.6;\n          tile.checked = checked;\n          if (checked) {\n            tile.tint = 0xeeeeee;\n          }\n          checked = !checked;\n          tile.x = x * this._TW / 2 - y * this._TW / 2 + 256 - this._TW / 4;\n          tile.y = x * this._TH / 2 + y * this._TH / 2;\n\n          this._territoryTiles[y][x] = tile;\n          this._territoryDisplay.addChild(tile);\n        }\n      }\n      this.addChild(this._territoryDisplay);\n      this._territoryDisplay.cacheAsBitmap = true;\n    }\n  }, {\n    key: \"_initializePartyDisplay\",\n    value: function _initializePartyDisplay() {\n      this._partyDisplay = new PIXI.Container();\n      this._partyTexture = _Asset2.default.graphics[\"minimap-party\"];\n\n      this.addChild(this._partyDisplay);\n    }\n  }]);\n\n  return StageMinimap;\n}(PIXI.Container);\n\nexports.default = StageMinimap;\n\n//# sourceURL=webpack:///./src/StageMinimap.js?");

/***/ }),

/***/ "./src/StageObjectDisplay.js":
/*!***********************************!*\
  !*** ./src/StageObjectDisplay.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _pixi = __webpack_require__(/*! pixi.js */ \"./node_modules/pixi.js/lib/index.js\");\n\nvar PIXI = _interopRequireWildcard(_pixi);\n\nvar _Configuration = __webpack_require__(/*! ./Configuration */ \"./src/Configuration.js\");\n\nvar _Configuration2 = _interopRequireDefault(_Configuration);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar StageObjectDisplay = function (_PIXI$Container) {\n  _inherits(StageObjectDisplay, _PIXI$Container);\n\n  function StageObjectDisplay() {\n    _classCallCheck(this, StageObjectDisplay);\n\n    var _this = _possibleConstructorReturn(this, (StageObjectDisplay.__proto__ || Object.getPrototypeOf(StageObjectDisplay)).call(this));\n\n    _this._ticks = 0;\n    return _this;\n  }\n\n  _createClass(StageObjectDisplay, [{\n    key: \"update\",\n    value: function update(viewport) {\n      if (this._ticks++ < 6) {\n        return;\n      }\n      this._ticks = 0;\n\n      var sX = viewport.x - 200;\n      var sY = viewport.y - 200;\n      var eX = sX + viewport.width + 400;\n      var eY = sY + viewport.width + 400;\n\n      var children = this.children;\n      var tmpChanged = [],\n          tmpOld = [];\n\n      for (var i = 0; i < children.length; i++) {\n        var child = children[i];\n\n        if (child.x >= sX && child.x <= eX && child.y >= sY && child.y <= eY) {\n          if (!child.dead) {\n            child.visible = true;\n          }\n        } else {\n          child.visible = false;\n        }\n\n        if (child.y !== child.oldY && child.visible) {\n          tmpChanged.push(child);\n        } else {\n          tmpOld.push(child);\n        }\n        child.oldY = child.y;\n      }\n\n      if (tmpChanged.length === 0) {\n        tmpOld.length = 0;\n        return;\n      }\n      if (tmpChanged.length > 1) {\n        tmpChanged.sort(this._compare);\n      }\n\n      var j = 0,\n          a = 0,\n          b = 0;\n      while (a < tmpChanged.length && b < tmpOld.length) {\n        if (this._compare(tmpChanged[a], tmpOld[b]) < 0) {\n          children[j++] = tmpChanged[a++];\n        } else {\n          children[j++] = tmpOld[b++];\n        }\n      }\n      while (a < tmpChanged.length) {\n        children[j++] = tmpChanged[a++];\n      }\n      while (b < tmpOld.length) {\n        children[j++] = tmpOld[b++];\n      }\n\n      tmpChanged.length = 0;\n      tmpOld.length = 0;\n    }\n  }, {\n    key: \"_compare\",\n    value: function _compare(a, b) {\n      if (a.y > b.y) return 1;else return -1;\n    }\n  }]);\n\n  return StageObjectDisplay;\n}(PIXI.Container);\n\nexports.default = StageObjectDisplay;\n\n//# sourceURL=webpack:///./src/StageObjectDisplay.js?");

/***/ }),

/***/ "./src/StageParticleEffectsDisplay.js":
/*!********************************************!*\
  !*** ./src/StageParticleEffectsDisplay.js ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _pixi = __webpack_require__(/*! pixi.js */ \"./node_modules/pixi.js/lib/index.js\");\n\nvar PIXI = _interopRequireWildcard(_pixi);\n\n__webpack_require__(/*! pixi-particles */ \"./node_modules/pixi-particles/dist/pixi-particles.min.js\");\n\nvar _Configuration = __webpack_require__(/*! ./Configuration.js */ \"./src/Configuration.js\");\n\nvar _Configuration2 = _interopRequireDefault(_Configuration);\n\nvar _Asset = __webpack_require__(/*! ./Asset.js */ \"./src/Asset.js\");\n\nvar _Asset2 = _interopRequireDefault(_Asset);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar StageParticleEffectsDisplay = function (_PIXI$Container) {\n  _inherits(StageParticleEffectsDisplay, _PIXI$Container);\n\n  function StageParticleEffectsDisplay() {\n    _classCallCheck(this, StageParticleEffectsDisplay);\n\n    var _this = _possibleConstructorReturn(this, (StageParticleEffectsDisplay.__proto__ || Object.getPrototypeOf(StageParticleEffectsDisplay)).call(this));\n\n    _this._emitters = null;\n    _this._emitterParticleTexture = null;\n    return _this;\n  }\n\n  _createClass(StageParticleEffectsDisplay, [{\n    key: \"tinyBoom\",\n    value: function tinyBoom(coordinates) {\n      this.boom(coordinates, true);\n    }\n  }, {\n    key: \"boom\",\n    value: function boom(coordinates) {\n      var isTiny = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      var position = this._translateCoordinate(coordinates);\n\n      var emitter = this._createEmittor(isTiny);\n      emitter.updateSpawnPos(position.x + 128, position.y + 16);\n      emitter.autoUpdate = true;\n      emitter.playOnceAndDestroy();\n    }\n  }, {\n    key: \"_createEmittor\",\n    value: function _createEmittor() {\n      var isTiny = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n      this._emitterParticleTexture = _Asset2.default.graphics[\"particle\"];\n\n      var emitterSettings = void 0;\n\n      if (isTiny) {\n        emitterSettings = this._getTinyBoomEffect();\n      } else {\n        emitterSettings = this._getBoomEffect();\n      }\n\n      var emitter = new PIXI.particles.Emitter(this, this._emitterParticleTexture, emitterSettings);\n      return emitter;\n    }\n  }, {\n    key: \"_translateCoordinate\",\n    value: function _translateCoordinate(coordinate) {\n      var tx = coordinate.x * _Configuration2.default.isometric.unitWidth / 2 - coordinate.y * _Configuration2.default.isometric.unitWidth / 2;\n      var ty = coordinate.x * _Configuration2.default.isometric.unitHeight / 2 + coordinate.y * _Configuration2.default.isometric.unitHeight / 2;\n      return {\n        x: tx,\n        y: ty\n      };\n    }\n  }, {\n    key: \"_getBoomEffect\",\n    value: function _getBoomEffect() {\n      return {\n        alpha: {\n          start: 1,\n          end: 0.1\n        },\n        scale: {\n          start: 0.8,\n          end: 0.4,\n          minimumScaleMultiplier: 1.2\n        },\n        speed: {\n          start: 400,\n          end: 10,\n          minimumSpeedMultiplier: 3\n        },\n        acceleration: {\n          x: 0,\n          y: 0\n        },\n        maxSpeed: 0,\n        startRotation: {\n          min: 0,\n          max: 360\n        },\n        noRotation: false,\n        rotationSpeed: {\n          min: 0,\n          max: 0\n        },\n        lifetime: {\n          min: 0.4,\n          max: 0.8\n        },\n        blendMode: \"normal\",\n        frequency: 0.008,\n        emitterLifetime: 0.31,\n        maxParticles: 100,\n        pos: {\n          x: 0,\n          y: 0\n        },\n        addAtBack: false,\n        spawnType: \"circle\",\n        spawnCircle: {\n          x: 0,\n          y: 0,\n          r: 50\n        }\n      };\n    }\n  }, {\n    key: \"_getTinyBoomEffect\",\n    value: function _getTinyBoomEffect() {\n      return {\n        alpha: {\n          start: 1,\n          end: 0.1\n        },\n        scale: {\n          start: 0.6,\n          end: 0.2,\n          minimumScaleMultiplier: 1\n        },\n        speed: {\n          start: 200,\n          end: 10,\n          minimumSpeedMultiplier: 3\n        },\n        acceleration: {\n          x: 0,\n          y: 0\n        },\n        maxSpeed: 0,\n        startRotation: {\n          min: 0,\n          max: 360\n        },\n        noRotation: false,\n        rotationSpeed: {\n          min: 0,\n          max: 0\n        },\n        lifetime: {\n          min: 0.2,\n          max: 0.5\n        },\n        blendMode: \"normal\",\n        frequency: 0.018,\n        emitterLifetime: 0.31,\n        maxParticles: 10,\n        pos: {\n          x: 0,\n          y: 0\n        },\n        addAtBack: false,\n        spawnType: \"circle\",\n        spawnCircle: {\n          x: 0,\n          y: 0,\n          r: 50\n        }\n      };\n    }\n  }]);\n\n  return StageParticleEffectsDisplay;\n}(PIXI.Container);\n\nexports.default = StageParticleEffectsDisplay;\n\n//# sourceURL=webpack:///./src/StageParticleEffectsDisplay.js?");

/***/ }),

/***/ "./src/StagePlayerBoard.js":
/*!*********************************!*\
  !*** ./src/StagePlayerBoard.js ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _pixi = __webpack_require__(/*! pixi.js */ \"./node_modules/pixi.js/lib/index.js\");\n\nvar PIXI = _interopRequireWildcard(_pixi);\n\nvar _Asset = __webpack_require__(/*! ./Asset.js */ \"./src/Asset.js\");\n\nvar _Asset2 = _interopRequireDefault(_Asset);\n\nvar _Configuration = __webpack_require__(/*! ./Configuration.js */ \"./src/Configuration.js\");\n\nvar _Configuration2 = _interopRequireDefault(_Configuration);\n\nvar _tween = __webpack_require__(/*! @tweenjs/tween.js */ \"./node_modules/@tweenjs/tween.js/src/Tween.js\");\n\nvar TWEEN = _interopRequireWildcard(_tween);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar StagePlayerBoard = function (_PIXI$Container) {\n  _inherits(StagePlayerBoard, _PIXI$Container);\n\n  function StagePlayerBoard() {\n    _classCallCheck(this, StagePlayerBoard);\n\n    // Player info\n    var _this = _possibleConstructorReturn(this, (StagePlayerBoard.__proto__ || Object.getPrototypeOf(StagePlayerBoard)).call(this));\n\n    _this._players = null;\n\n    // Player card textures\n    _this._playerCardBackgroundTexture = null;\n    _this._playerCardUnitHighlightTexture = null;\n\n    _this._initialize();\n    return _this;\n  }\n\n  _createClass(StagePlayerBoard, [{\n    key: \"addParty\",\n    value: function addParty(party) {\n      var playerCard = new PIXI.Container();\n      var playerCardBackground = new PIXI.Sprite(this._playerCardBackgroundTexture);\n      var playerName = new PIXI.Text(party.name, {\n        fontFamily: \"Arial\",\n        fontSize: 25,\n        fill: 0xffffff,\n        align: \"left\"\n      });\n\n      var playerScore = new PIXI.Text(\"0\", {\n        fontFamily: \"Arial\",\n        fontSize: 37,\n        fontWeight: \"bold\",\n        fill: 0xffffff,\n        align: \"left\"\n      });\n\n      playerCardBackground.tint = party.territoryColor;\n\n      playerName.anchor.set(0, 0.5);\n      playerName.x = 15;\n      playerName.y = 21;\n\n      playerScore.anchor.set(1, 0.5);\n      playerScore.x = 182;\n      playerScore.y = 43;\n\n      playerCard.addChild(playerCardBackground);\n      playerCard.addChild(playerName);\n      playerCard.addChild(playerScore);\n\n      playerCard.cacheAsBitmap = true;\n\n      this._players.push({\n        party: party,\n        score: 0,\n        card: playerCard,\n        scoreText: playerScore\n      });\n\n      this.addChild(playerCard);\n\n      this.update();\n    }\n  }, {\n    key: \"updatePlayerScore\",\n    value: function updatePlayerScore(partyId, score) {\n      // 순위가 바뀌었으면, insertion sort!\n      var player = null;\n      for (var i = 0; i < this._players.length; i++) {\n        if (this._players[i].party.id == partyId) {\n          this._players[i].score = score;\n          this._players[i].card.cacheAsBitmap = false;\n          this._players[i].scoreText.text = score;\n          this._players[i].card.cacheAsBitmap = true;\n        }\n      }\n\n      // value 기준으로 정렬\n      this._players.sort(function (a, b) {\n        if (a.score > b.score) {\n          return -1;\n        } else if (a.score < b.score) {\n          return 1;\n        }\n        return 0;\n      });\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      for (var i = 0; i < this._players.length; i++) {\n        var tween = new TWEEN.Tween(this._players[i].card).to({ y: i * 100 }, 200).easing(TWEEN.Easing.Quadratic.Out).start();\n      }\n    }\n  }, {\n    key: \"_initialize\",\n    value: function _initialize() {\n      this._players = [];\n\n      this._playerCardBackgroundTexture = _Asset2.default.graphics[\"nametag\"];\n      this._playerCardUnitHighlightTexture = _Asset2.default.graphics[\"unit-highlight\"];\n    }\n  }, {\n    key: \"palyers\",\n    get: function get() {\n      return this._players;\n    }\n  }, {\n    key: \"ranking\",\n    get: function get() {\n      var ranking = [];\n      for (var i in this._players) {\n        var rankInfo = {};\n        rankInfo.rank = Number(i) + 1;\n        rankInfo.partyId = this._players[i].party.id;\n        rankInfo.userId = this._players[i].party.name;\n        rankInfo.score = this._players[i].score;\n        ranking.push(rankInfo);\n      }\n      return ranking;\n    }\n  }]);\n\n  return StagePlayerBoard;\n}(PIXI.Container);\n\nexports.default = StagePlayerBoard;\n\n//# sourceURL=webpack:///./src/StagePlayerBoard.js?");

/***/ }),

/***/ "./src/StagePlotter.js":
/*!*****************************!*\
  !*** ./src/StagePlotter.js ***!
  \*****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _pixi = __webpack_require__(/*! pixi.js */ \"./node_modules/pixi.js/lib/index.js\");\n\nvar PIXI = _interopRequireWildcard(_pixi);\n\nvar _tween = __webpack_require__(/*! @tweenjs/tween.js */ \"./node_modules/@tweenjs/tween.js/src/Tween.js\");\n\nvar TWEEN = _interopRequireWildcard(_tween);\n\nvar _Asset = __webpack_require__(/*! ./Asset */ \"./src/Asset.js\");\n\nvar _Asset2 = _interopRequireDefault(_Asset);\n\nvar _Configuration = __webpack_require__(/*! ./Configuration */ \"./src/Configuration.js\");\n\nvar _Configuration2 = _interopRequireDefault(_Configuration);\n\nvar _StageMiniTimer = __webpack_require__(/*! ./StageMiniTimer.js */ \"./src/StageMiniTimer.js\");\n\nvar _StageMiniTimer2 = _interopRequireDefault(_StageMiniTimer);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar StagePlotter = function (_PIXI$Container) {\n  _inherits(StagePlotter, _PIXI$Container);\n\n  function StagePlotter() {\n    _classCallCheck(this, StagePlotter);\n\n    var _this = _possibleConstructorReturn(this, (StagePlotter.__proto__ || Object.getPrototypeOf(StagePlotter)).call(this));\n\n    _this._territory = null;\n    _this._obstacles = null;\n\n    _this._targetStep = null;\n    _this._targetDirection = null;\n    _this._targetPosition = null;\n\n    _this._plotTiles = null;\n    _this._plotHistory = [];\n\n    _this._maskSprite = null;\n\n    // Preview data\n    _this._previewPlotPrototype = null;\n    _this._previewPlotDirection = null;\n    _this._plotPreviewTiles = null;\n    _this._plotPreviewOutlines = null;\n    _this._plotColor = 0xcccccc;\n\n    // Timer bar\n    _this._currentTime = 0;\n    _this._timeLimit = 0; //0.5 * 60;\n    _this._timer = null;\n    _this._timerStarted = false;\n    /*\n    this._blinkerStarted = false;\n    this._blinkerTargets = null;\n    this._blinkerUp = null;\n    this._blinkerDown = null;*/\n    // Prototype list\n    _this._blinkerStarted = false;\n    _this._blinkerUp = null;\n    _this._blinkerDown = null;\n\n    _this._prototypes = [];\n\n    // Textures\n    _this._territoryTileTextures = null;\n\n    // Event handlers\n    _this._onPlotHandlers = [];\n\n    _this._loadTerritoryTileTextures();\n    _this._initializeTiles();\n    _this._initializeTimer();\n    _this._createBlinker();\n    _this._startBlinker();\n    return _this;\n  }\n\n  _createClass(StagePlotter, [{\n    key: \"isPlotted\",\n    value: function isPlotted(coordinate) {\n      var key = coordinate.y * this._territory.width + coordinate.x;\n      return this._plotTiles.has(key);\n    }\n  }, {\n    key: \"_startBlinker\",\n    value: function _startBlinker() {\n      if (this._blinkerUp && !this._blinkerStarted) {\n        this._blinkerStarted = true;\n        this._blinkerUp.stop();\n        this._blinkerDown.stop();\n        for (var i = 0; i < this._plotPreviewTiles.length; i++) {\n          this._plotPreviewTiles[i].alpha = 0.8;\n        }\n      }\n    }\n  }, {\n    key: \"_startBlinker\",\n    value: function _startBlinker() {\n      if (!this._blinkerStarted) {\n        this._blinkerDown.start();\n        this._blinkerStarted = false;\n      }\n    }\n  }, {\n    key: \"_createBlinker\",\n    value: function _createBlinker(targetSprites) {\n      var _this2 = this;\n\n      var valueObject = { alpha: 0.8 };\n\n      this._blinkerUp = new TWEEN.Tween(valueObject);\n      this._blinkerDown = new TWEEN.Tween(valueObject);\n\n      // These two tweens are chaning each other\n      this._blinkerUp.to({\n        alpha: 0.8\n      }, 300).easing(TWEEN.Easing.Quadratic.In).onUpdate(function () {\n        for (var i = 0; i < _this2._plotPreviewTiles.length; i++) {\n          _this2._plotPreviewTiles[i].alpha = valueObject.alpha;\n        }\n      }).chain(this._blinkerDown);\n\n      this._blinkerDown.to({\n        alpha: 0.3\n      }, 300).onUpdate(function () {\n        for (var i = 0; i < _this2._plotPreviewTiles.length; i++) {\n          _this2._plotPreviewTiles[i].alpha = valueObject.alpha;\n        }\n      }).easing(TWEEN.Easing.Quadratic.Out).chain(this._blinkerUp);\n    }\n  }, {\n    key: \"update\",\n    value: function update(deltaTime, speed) {\n      this._currentTime += deltaTime;\n\n      // ensurance second : es (1.5s)\n      // countdown second: 1.5\n      // character tile per second: tps -> 256 / (speed * 60)\n      // tps * es 타일 전에 있어야 한다.\n\n      // 만약 유저가 세 타일 전을 밟았다면,\n\n      var ensureTiles = Math.ceil((2 + 3.5) * (speed * 60) / 200);\n\n      if (this._plotTiles.size <= ensureTiles) {\n        // Start blinking\n\n        if (!this._timerStarted) {\n          var multi = this._plotTiles.size / ensureTiles;\n\n          this._timerStarted = true;\n          this._timer.start(1.5 * 60 * multi);\n          this._timer.visible = true;\n          this._timer.x = this._targetPosition.x - 10;\n          this._timer.y = this._targetPosition.y - 100;\n        }\n        this._timer.update(deltaTime);\n      } else {\n        this._timer.visible = false;\n      }\n    }\n  }, {\n    key: \"setColor\",\n    value: function setColor(color) {\n      this._plotColor = color;\n    }\n  }, {\n    key: \"popNextPrototype\",\n    value: function popNextPrototype() {\n      if (this._prototypes.length <= 1) {\n        this._prototypes.push(this.pickRandomPrototype());\n      }\n      return this._prototypes.shift();\n    }\n  }, {\n    key: \"onPlot\",\n    value: function onPlot(handler) {\n      this._onPlotHandlers.push(handler);\n    }\n  }, {\n    key: \"_initializeTimer\",\n    value: function _initializeTimer() {\n      var _this3 = this;\n\n      this._timer = new _StageMiniTimer2.default();\n      this._timer.onTimeDone(function () {\n        _this3._onTimeDone();\n      });\n      this.addChild(this._timer);\n    }\n  }, {\n    key: \"_onTimeDone\",\n    value: function _onTimeDone() {\n      this.plot();\n      this.setPreviewPrototype(this.popNextPrototype());\n      this._timerStarted = false;\n      this._currentTime = 0;\n      this._timer.visible = false;\n    }\n  }, {\n    key: \"initialize\",\n    value: function initialize(step, prototype, direction) {\n      this._targetStep = step;\n      this._targetPosition = this._translateCoordinate(step);\n      this._previewPlotPrototype = prototype;\n      this._previewPlotDirection = direction;\n      this.plot(prototype, direction);\n      this.setPreviewPrototype(this.nextPrototype);\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      var _this4 = this;\n\n      this._plotTiles.forEach(function (value, key, map) {\n        _this4.removeChild(value);\n      });\n      this._plotTiles.clear();\n    }\n  }, {\n    key: \"plot\",\n    value: function plot() {\n      var path = this._getPath(this._targetStep.x, this._targetStep.y, this._previewPlotPrototype, this._previewPlotDirection);\n      if (!path) {\n        return false;\n      }\n\n      this._plotHistory = this._plotHistory.concat(path);\n\n      this._timerStarted = false;\n\n      // 패스가 자기 자신 플롯과 겹치는지 검사!!!!!!!\n      this._drawPlotTiles(path, this._previewPlotDirection);\n\n      for (var i = 0; i < this._onPlotHandlers.length; i++) {\n        this._onPlotHandlers[i](path);\n      }\n\n      this._targetStep = path[path.length - 1];\n      this._targetPosition = this._translateCoordinate(this._targetStep);\n\n      return path;\n    }\n  }, {\n    key: \"setPreviewPrototype\",\n    value: function setPreviewPrototype(prototype) {\n      this._previewPlotPrototype = prototype;\n      this.rotatePreview();\n    }\n  }, {\n    key: \"rotatePreview\",\n    value: function rotatePreview() {\n      var excluded = [];\n\n      while (true) {\n        if (excluded.length > 3) {\n          break;\n        }\n\n        this._previewPlotDirection = ++this._previewPlotDirection;\n        if (this._previewPlotDirection > 3) {\n          this._previewPlotDirection = 0;\n        }\n\n        var rotated = this._preview(this._targetStep, this._previewPlotPrototype, this._previewPlotDirection);\n        if (rotated) {\n          break;\n        } else {\n          excluded.push(this._previewPlotDirection);\n        }\n      }\n    }\n  }, {\n    key: \"removePlotTile\",\n    value: function removePlotTile(coordinate) {\n      var _this5 = this;\n\n      var key = coordinate.y * this._territory.width + coordinate.x;\n      if (this._plotTiles.has(key)) {\n        var plotTile = this._plotTiles.get(key);\n\n        var tween = new TWEEN.Tween(plotTile).to({ alpha: 0 }, 600).easing(TWEEN.Easing.Quadratic.In).onComplete(function () {\n          _this5.removeChild(plotTile);\n        }).start();\n\n        this._plotTiles.delete(key);\n        this._plotHistory.shift();\n      }\n    }\n  }, {\n    key: \"placePlotTile\",\n    value: function placePlotTile(coordinate, direction, nextDirection) {\n      var key = coordinate.y * this._territory.width + coordinate.x;\n      if (!this._plotTiles.has(key)) {\n        var lineCode = this._getLineSubcode(direction, nextDirection);\n        var plotTile = new PIXI.Sprite(this._territoryTileTextures[0]);\n        plotTile.tint = this._plotColor;\n        plotTile.alpha = 0;\n        plotTile.anchor.set(0.5, 0.42);\n        this._updateSprite(plotTile, lineCode);\n        this.addChildAt(plotTile, 0);\n\n        var tween = new TWEEN.Tween(plotTile).to({ alpha: 0.4 }, 600).easing(TWEEN.Easing.Quadratic.In).start();\n\n        var position = this._translateCoordinate(coordinate);\n\n        plotTile.x = position.x + _Configuration2.default.isometric.unitWidth / 2;\n        plotTile.y = position.y;\n        this._plotTiles.set(key, plotTile);\n      }\n    }\n  }, {\n    key: \"bindEnvironment\",\n    value: function bindEnvironment(territory, obstacles) {\n      this._territory = territory;\n      this._obstacles = obstacles;\n    }\n  }, {\n    key: \"_initializeTiles\",\n    value: function _initializeTiles() {\n      this._plotTiles = new Map();\n      this._plotPreviewTiles = [];\n      this._plotPreviewOutlines = [];\n      for (var i = 0; i < 8; i++) {\n        var previewTile = new PIXI.Sprite(this._territoryTileTextures[0]);\n        var previewOutline = new PIXI.Sprite(this._territoryTileTextures[4]);\n        previewOutline.visible = false;\n        previewOutline.alpha = 0.4;\n        previewOutline.anchor.set(0.5, 0.42);\n        previewTile.visible = false;\n        previewTile.tint = 0xeeeeee;\n        previewTile.alpha = 0.7;\n        previewTile.anchor.set(0.5, 0.42);\n        this.addChild(previewOutline);\n        this.addChild(previewTile);\n        this._plotPreviewTiles.push(previewTile);\n        this._plotPreviewOutlines.push(previewOutline);\n      }\n    }\n  }, {\n    key: \"_clearPreviewTiles\",\n    value: function _clearPreviewTiles() {\n      for (var i = 0; i < this._plotPreviewTiles.length; i++) {\n        this._plotPreviewTiles[i].visible = false;\n        this._plotPreviewOutlines[i].visible = false;\n      }\n    }\n  }, {\n    key: \"_preview\",\n    value: function _preview(step, prototype, direction) {\n      this._clearPreviewTiles();\n\n      var path = this._getPath(step.x, step.y, prototype, direction);\n      if (path) {\n        this._drawPlotPreviewTiles(path, direction);\n        return true;\n      }\n      return false;\n    }\n  }, {\n    key: \"_drawPlotPreviewTiles\",\n    value: function _drawPlotPreviewTiles(path, initialDirection) {\n      var key = this._targetStep.y * this._territory.width + this._targetStep.x;\n      if (this._plotTiles.has(key)) {\n        var plotTile = this._plotTiles.get(key);\n        var newLineCode = this._getLineSubcode(this._targetDirection, initialDirection);\n        this._updateSprite(plotTile, newLineCode);\n      }\n\n      var direction = initialDirection;\n      var nextDirection = 0;\n\n      for (var i = 0; i < path.length; i++) {\n        var step = path[i];\n\n        if (i < path.length - 1) {\n          var nextStep = path[i + 1];\n\n          if (step.x < nextStep.x) nextDirection = 0;else if (step.x > nextStep.x) nextDirection = 2;else if (step.y < nextStep.y) nextDirection = 3;else nextDirection = 1;\n        } else {\n          nextDirection = direction;\n        }\n\n        // 부딛히면 빨간색으로 표시!!!!!!!!!!!!!!!!!!\n\n        var lineCode = this._getLineSubcode(direction, nextDirection);\n        var previewTile = this._plotPreviewTiles[i];\n        var previewTileOutline = this._plotPreviewOutlines[i];\n\n        if (this._obstacles[step.y][step.x] > 0) {\n          previewTileOutline.tint = 0xf8614a;\n        } else {\n          previewTileOutline.tint = 0x00c3f8;\n        }\n\n        this._updateSprite(previewTile, lineCode);\n        var position = this._translateCoordinate(step);\n\n        previewTileOutline.visible = true;\n        previewTileOutline.x = position.x + _Configuration2.default.isometric.unitWidth / 2;\n        previewTileOutline.y = position.y;\n\n        previewTile.visible = true;\n        previewTile.x = position.x + _Configuration2.default.isometric.unitWidth / 2;\n        previewTile.y = position.y;\n\n        direction = nextDirection;\n      }\n    }\n  }, {\n    key: \"_drawPlotTiles\",\n    value: function _drawPlotTiles(path, initialDirection) {\n      var direction = initialDirection;\n      var nextDirection = 0;\n      for (var i = 0; i < path.length; i++) {\n        var step = path[i];\n\n        if (i < path.length - 1) {\n          var nextStep = path[i + 1];\n\n          if (step.x < nextStep.x) nextDirection = 0;else if (step.x > nextStep.x) nextDirection = 2;else if (step.y < nextStep.y) nextDirection = 3;else nextDirection = 1;\n        } else {\n          nextDirection = direction;\n        }\n\n        this.placePlotTile(step, direction, nextDirection);\n\n        direction = nextDirection;\n      }\n\n      var lastStep = path[path.length - 1];\n      var lastPrevStep = path[path.length - 2];\n      if (lastPrevStep.x < lastStep.x) this._targetDirection = 0;else if (lastPrevStep.x > lastStep.x) this._targetDirection = 2;else if (lastPrevStep.y < lastStep.y) this._targetDirection = 3;else this._targetDirection = 1;\n    }\n  }, {\n    key: \"pickRandomPrototype\",\n    value: function pickRandomPrototype() {\n      var y = Math.floor(Math.random() * StagePlotter.PROTOTYPE.length);\n      var x = Math.floor(Math.random() * StagePlotter.PROTOTYPE[y].length);\n      return StagePlotter.PROTOTYPE[y][x];\n    }\n  }, {\n    key: \"_getPath\",\n    value: function _getPath(x, y, prototype, direction) {\n      //direction = 1;\n      var ptype = [];\n      for (var i = 0; i < prototype.length; i++) {\n        ptype[i] = prototype[i].slice();\n      }\n\n      var sx = x,\n          sy = y;\n\n      if (direction == 0) sx++;else if (direction == 1) sy--;else if (direction == 2) sx--;else sy++;\n\n      var isOutOfBound = false;\n      var shiftUp = ptype[0].indexOf(2) < 0;\n\n      var cpx = 0;\n      var cpy = shiftUp ? 1 : 0;\n\n      var cgx = sx,\n          cgy = sy;\n\n      var path = [];\n\n      while (!isOutOfBound) {\n        if (cgx < 0 || cgx >= this._territory.width || cgy < 0 || cgy >= this._territory.height) {\n          isOutOfBound = true;\n          continue;\n        }\n\n        var key = cgy * this._territory.width + cgx;\n        if (this._plotTiles.has(key)) {\n          isOutOfBound = true;\n          continue;\n        }\n\n        path.push({ x: cgx, y: cgy });\n\n        // pick next cpx and cpy = find adjacent\n        ptype[cpy][cpx] = 0;\n\n        if (cpy > 0 && ptype[cpy - 1][cpx] > 0) cpy--;else if (cpy < ptype.length - 1 && ptype[cpy + 1][cpx] > 0) cpy++;else if (cpx > 0 && ptype[cpy][cpx - 1]) cpx--;else if (cpx < ptype[cpy].length - 1 && ptype[cpy][cpx + 1]) cpx++;else break;\n\n        /// and update cgx and cgy\n        if (direction == 0) {\n          cgx = sx + cpx;\n          cgy = sy + (cpy + (shiftUp ? -1 : 0));\n        } else if (direction == 1) {\n          cgx = sx + (cpy + (shiftUp ? -1 : 0));\n          cgy = sy - cpx;\n        } else if (direction == 2) {\n          cgx = sx - cpx;\n          cgy = sy - (cpy + (shiftUp ? -1 : 0));\n        } else {\n          cgx = sx - (cpy + (shiftUp ? -1 : 0));\n          cgy = sy + cpx;\n        }\n      }\n      return !isOutOfBound ? path : null;\n    }\n  }, {\n    key: \"_loadTerritoryTileTextures\",\n    value: function _loadTerritoryTileTextures() {\n      this._territoryTileTextures = [];\n\n      this._territoryTileTextures[0] = _Asset2.default.graphics[\"tile-darrow0\"];\n      this._territoryTileTextures[1] = _Asset2.default.graphics[\"tile-darrow3\"];\n      this._territoryTileTextures[2] = _Asset2.default.graphics[\"tile-darrow1\"];\n      this._territoryTileTextures[3] = _Asset2.default.graphics[\"tile-darrow2\"];\n      this._territoryTileTextures[4] = _Asset2.default.graphics[\"tile-ground\"];\n    }\n  }, {\n    key: \"_updateSprite\",\n    value: function _updateSprite(sprite, territoryCode) {\n      var _this6 = this;\n\n      var u = function u(n, sx, sy) {\n        sprite.texture = _this6._territoryTileTextures[n];\n        sprite.scale.set(sx, sy);\n      };\n      switch (territoryCode) {\n        case 0:\n          u(4, 1, 1);\n          break;\n        case 1:\n          u(0, 1, 1);\n          break;\n        case 2:\n          u(0, -1, 1);\n          break;\n        case 3:\n          u(1, 1, 1);\n          break;\n        case 4:\n          u(3, -1, 1);\n          break;\n        case 5:\n          u(2, 1, 1);\n          break;\n        case 6:\n          u(3, 1, 1);\n          break;\n      }\n    }\n  }, {\n    key: \"_translateCoordinate\",\n    value: function _translateCoordinate(coordinate) {\n      var tx = coordinate.x * _Configuration2.default.isometric.unitWidth / 2 - coordinate.y * _Configuration2.default.isometric.unitWidth / 2;\n      var ty = coordinate.x * _Configuration2.default.isometric.unitHeight / 2 + coordinate.y * _Configuration2.default.isometric.unitHeight / 2;\n      return {\n        x: tx,\n        y: ty\n      };\n    }\n  }, {\n    key: \"_getLineSubcode\",\n    value: function _getLineSubcode(direction, nextDirection) {\n      // Forward, march\n      if (direction == nextDirection) {\n        if (direction == 1 || direction == 3) {\n          return 1;\n        } else {\n          return 2;\n        }\n      }\n\n      // Righttime, march\n      else {\n          if (direction == 0 && nextDirection == 1 || direction == 3 && nextDirection == 2) {\n            return 3;\n          } else if (direction == 3 && nextDirection == 0 || direction == 2 && nextDirection == 1) {\n            return 4;\n          } else if (direction == 2 && nextDirection == 3 || direction == 1 && nextDirection == 0) {\n            return 5;\n          } else {\n            return 6;\n          }\n        }\n    }\n  }, {\n    key: \"nextPrototype\",\n    get: function get() {\n      if (this._prototypes.length < 1) {\n        this._prototypes.push(this.pickRandomPrototype());\n      }\n\n      return this._prototypes[0];\n    }\n  }, {\n    key: \"targetPosition\",\n    get: function get() {\n      return this._targetPosition;\n    }\n  }]);\n\n  return StagePlotter;\n}(PIXI.Container);\n\nexports.default = StagePlotter;\n\n\nStagePlotter.PROTOTYPE = [[], [], [], []];\nStagePlotter.PROTOTYPE[0][0] = [[2, 1, 1]];\nStagePlotter.PROTOTYPE[1][0] = [[2, 0], [1, 1]];\nStagePlotter.PROTOTYPE[1][0] = [[1, 1], [2, 0]];\nStagePlotter.PROTOTYPE[2][0] = [[0, 0, 1], [2, 1, 1]];\nStagePlotter.PROTOTYPE[2][1] = [[2, 1, 1], [0, 0, 1]];\nStagePlotter.PROTOTYPE[2][2] = [[2, 0, 0], [1, 1, 1]];\nStagePlotter.PROTOTYPE[2][3] = [[1, 1, 1], [2, 0, 0]];\nStagePlotter.PROTOTYPE[3][0] = [[2, 1, 0], [0, 1, 1]];\nStagePlotter.PROTOTYPE[3][1] = [[0, 1, 1], [2, 1, 0]];\nStagePlotter.INITIALIZER = [[2, 1, 1, 1, 1]];\n\n//# sourceURL=webpack:///./src/StagePlotter.js?");

/***/ }),

/***/ "./src/StagePlotterBox.js":
/*!********************************!*\
  !*** ./src/StagePlotterBox.js ***!
  \********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _pixi = __webpack_require__(/*! pixi.js */ \"./node_modules/pixi.js/lib/index.js\");\n\nvar PIXI = _interopRequireWildcard(_pixi);\n\nvar _Asset = __webpack_require__(/*! ./Asset */ \"./src/Asset.js\");\n\nvar _Asset2 = _interopRequireDefault(_Asset);\n\nvar _StagePlotter = __webpack_require__(/*! ./StagePlotter */ \"./src/StagePlotter.js\");\n\nvar _StagePlotter2 = _interopRequireDefault(_StagePlotter);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar StagePlotterBox = function (_PIXI$Container) {\n  _inherits(StagePlotterBox, _PIXI$Container);\n\n  function StagePlotterBox() {\n    _classCallCheck(this, StagePlotterBox);\n\n    var _this = _possibleConstructorReturn(this, (StagePlotterBox.__proto__ || Object.getPrototypeOf(StagePlotterBox)).call(this));\n\n    _this._background = null;\n    _this._backgroundTexture = null;\n\n    _this._tileContainer = null;\n    _this._tileTexture = null;\n    _this._tileSprites = null;\n\n    _this._createBackground();\n    _this._initializePrototypeTiles();\n\n    _this.setPrototype(_StagePlotter2.default.PROTOTYPE[2][0]);\n    return _this;\n  }\n\n  _createClass(StagePlotterBox, [{\n    key: \"setNextPrototype\",\n    value: function setNextPrototype(index) {\n      this._prototypeSprite.texture = this._prototypeTextures[index];\n    }\n  }, {\n    key: \"setPrototype\",\n    value: function setPrototype(prototype) {\n      for (var i = 0; i < this._tileSprites.length; i++) {\n        this._tileSprites[i].visible = false;\n      }\n      var index = 0;\n      for (var _i = 0; _i < prototype.length; _i++) {\n        for (var j = 0; j < prototype[_i].length; j++) {\n          if (prototype[_i][j] > 0) {\n            var tileSprite = this._tileSprites[index];\n            tileSprite.visible = true;\n\n            if (prototype[_i][j] > 1) {\n              tileSprite.tint = 0xdddddd;\n            } else {\n              tileSprite.tint = 0xcccccc;\n            }\n\n            var position = this._translateCoordinate(j, _i);\n            tileSprite.x = position.x;\n            tileSprite.y = position.y;\n            index++;\n          }\n        }\n      }\n\n      this._tileContainer.x = 280 - this._tileContainer.width;\n      this._tileContainer.y = 182 - this._tileContainer.height - 20;\n    }\n  }, {\n    key: \"_initializePrototypeTiles\",\n    value: function _initializePrototypeTiles() {\n      this._tileContainer = new PIXI.Container();\n      this._tileSprites = [];\n      this._tileTexture = _Asset2.default.graphics[\"tile-prototype\"];\n      for (var i = 0; i < 4; i++) {\n        var tileSprite = new PIXI.Sprite(this._tileTexture);\n        tileSprite.anchor.set(0.5, 0.5);\n        tileSprite.visible = false;\n        this._tileSprites.push(tileSprite);\n        this._tileContainer.addChild(tileSprite);\n      }\n      this.addChild(this._tileContainer);\n    }\n  }, {\n    key: \"_createBackground\",\n    value: function _createBackground() {\n      this._backgroundTexture = _Asset2.default.graphics[\"nextmove-background\"];\n      this._background = new PIXI.Sprite(this._backgroundTexture);\n      this.addChild(this._background);\n    }\n  }, {\n    key: \"_initializePrototypeTextures\",\n    value: function _initializePrototypeTextures() {\n      this._prototypeTextures = [];\n      for (var i = 0; i < 7; i++) {\n        this._prototypeTextures[i] = _Asset2.default.graphics[\"piece\" + i];\n      }\n    }\n  }, {\n    key: \"_translateCoordinate\",\n    value: function _translateCoordinate(cx, cy) {\n      var tx = cx * 73 / 2 - cy * 73 / 2;\n      var ty = cx * 43 / 2 + cy * 43 / 2;\n      return {\n        x: tx,\n        y: ty\n      };\n    }\n  }]);\n\n  return StagePlotterBox;\n}(PIXI.Container);\n\nexports.default = StagePlotterBox;\n\n//# sourceURL=webpack:///./src/StagePlotterBox.js?");

/***/ }),

/***/ "./src/StageTerrainDisplay.js":
/*!************************************!*\
  !*** ./src/StageTerrainDisplay.js ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _pixi = __webpack_require__(/*! pixi.js */ \"./node_modules/pixi.js/lib/index.js\");\n\nvar PIXI = _interopRequireWildcard(_pixi);\n\n__webpack_require__(/*! pixi-tilemap */ \"./node_modules/pixi-tilemap/dist/pixi-tilemap.js\");\n\nvar _Configuration = __webpack_require__(/*! ./Configuration.js */ \"./src/Configuration.js\");\n\nvar _Configuration2 = _interopRequireDefault(_Configuration);\n\nvar _Asset = __webpack_require__(/*! ./Asset.js */ \"./src/Asset.js\");\n\nvar _Asset2 = _interopRequireDefault(_Asset);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar StageTerrainDisplay = function (_PIXI$Container) {\n  _inherits(StageTerrainDisplay, _PIXI$Container);\n\n  function StageTerrainDisplay() {\n    _classCallCheck(this, StageTerrainDisplay);\n\n    var _this = _possibleConstructorReturn(this, (StageTerrainDisplay.__proto__ || Object.getPrototypeOf(StageTerrainDisplay)).call(this));\n\n    _this._SW = _Configuration2.default.baseResolution.width;\n    _this._SH = _Configuration2.default.baseResolution.height;\n    _this._width = 0;\n    _this._height = 0;\n\n    _this._terrainDisplay = null;\n    _this._terrain = null;\n    _this._terrainTextures = null;\n    _this._ticks = 0;\n    _this._initializeTerrainTextures();\n    return _this;\n  }\n\n  _createClass(StageTerrainDisplay, [{\n    key: \"bind\",\n    value: function bind(stageData) {\n      this._terrain = stageData.terrain;\n      this._width = stageData.dimension.width;\n      this._height = stageData.dimension.height;\n      this.drawSpriteMode();\n    }\n  }, {\n    key: \"update\",\n    value: function update() {}\n  }, {\n    key: \"drawSpriteMode\",\n    value: function drawSpriteMode() {\n      this._terrainDisplay = new PIXI.particles.ParticleContainer(this._width * this._height + 1, {\n        scale: false,\n        position: true,\n        rotation: false,\n        uvs: false,\n        alpha: false\n      });\n\n      // Draw terrain as metadata indicates\n      for (var y = 0; y < this._height; y++) {\n        for (var x = 0; x < this._width; x++) {\n          var texture = void 0;\n          switch (this._terrain[y][x]) {\n            case -1:\n              texture = this._terrainTextures[2][Math.floor(Math.random() * 4)];\n              break;\n            case 0:\n              texture = this._terrainTextures[1][Math.floor(Math.random() * 4)];\n              break;\n            case 1:\n              texture = this._terrainTextures[0][Math.floor(Math.random() * 4)];\n              break;\n          }\n          var tilePosition = this._translateCoordinate({\n            x: x,\n            y: y\n          });\n\n          var tile = new PIXI.Sprite(texture);\n          tile.x = tilePosition.x;\n          tile.y = tilePosition.y;\n\n          this._terrainDisplay.addChild(tile);\n        }\n      }\n      //this._terrainDisplay.cacheAsBitmap = true;\n      this.addChild(this._terrainDisplay);\n    }\n  }, {\n    key: \"drawTileMode\",\n    value: function drawTileMode() {\n      this._terrainDisplay = new PIXI.tilemap.CompositeRectTileLayer(0, _Asset2.default.graphics[\"tile-dark0\"].baseTexture);\n\n      // Draw terrain as metadata indicates\n      for (var y = 0; y < this._height; y++) {\n        for (var x = 0; x < this._width; x++) {\n          var texture = void 0;\n          switch (this._terrain[y][x]) {\n            case -1:\n              texture = this._terrainTextures[2][Math.floor(Math.random() * 4)];\n              break;\n            case 0:\n              texture = this._terrainTextures[1][Math.floor(Math.random() * 4)];\n              break;\n            case 1:\n              texture = this._terrainTextures[0][Math.floor(Math.random() * 4)];\n              break;\n          }\n          var tilePosition = this._translateCoordinate({\n            x: x,\n            y: y\n          });\n\n          this._terrainDisplay.addFrame(texture, tilePosition.x, tilePosition.y);\n        }\n      }\n      this.addChild(this._terrainDisplay);\n    }\n  }, {\n    key: \"_initializeTerrainTextures\",\n    value: function _initializeTerrainTextures() {\n      this._terrainTextures = [];\n      for (var i = 0; i < 4; i++) {\n        this._terrainTextures[i] = [];\n      }\n      for (var _i = 0; _i < 4; _i++) {\n        this._terrainTextures[0][_i] = _Asset2.default.graphics[\"tile-dark\" + _i];\n      }\n      for (var _i2 = 0; _i2 < 4; _i2++) {\n        this._terrainTextures[1][_i2] = _Asset2.default.graphics[\"tile-light\" + _i2];\n      }\n      for (var _i3 = 0; _i3 < 4; _i3++) {\n        this._terrainTextures[2][_i3] = _Asset2.default.graphics[\"tile-water\" + _i3];\n      }\n\n      _Asset2.default.graphics[\"tile-dark0\"].baseTexture.mipmap = true;\n    }\n  }, {\n    key: \"_translateCoordinate\",\n    value: function _translateCoordinate(coordinate) {\n      var tx = coordinate.x * _Configuration2.default.isometric.unitWidth / 2 - coordinate.y * _Configuration2.default.isometric.unitWidth / 2;\n      var ty = coordinate.x * _Configuration2.default.isometric.unitHeight / 2 + coordinate.y * _Configuration2.default.isometric.unitHeight / 2;\n      return {\n        x: tx,\n        y: ty\n      };\n    }\n  }]);\n\n  return StageTerrainDisplay;\n}(PIXI.Container);\n\nexports.default = StageTerrainDisplay;\n\n//# sourceURL=webpack:///./src/StageTerrainDisplay.js?");

/***/ }),

/***/ "./src/StageTerritory.js":
/*!*******************************!*\
  !*** ./src/StageTerritory.js ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Pathfinder = __webpack_require__(/*! ./Pathfinder */ \"./src/Pathfinder.js\");\n\nvar _Pathfinder2 = _interopRequireDefault(_Pathfinder);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar StageTerritory = function () {\n  function StageTerritory(width, height) {\n    _classCallCheck(this, StageTerritory);\n\n    // Territory size\n    this._width = width;\n    this._height = height;\n\n    // Ownership data\n    this._grid = null;\n    this._edgeGrid = null;\n    this._score = null;\n\n    // Pathfinder\n    this._pathfinder = null;\n\n    // Event handlers\n    this._onHitLineHandler = [];\n    this._onOccupyHandler = [];\n\n    this._initialize();\n  }\n\n  _createClass(StageTerritory, [{\n    key: \"getScore\",\n    value: function getScore(partyId) {\n      return this._score[partyId];\n    }\n  }, {\n    key: \"onHitLine\",\n    value: function onHitLine(handler) {\n      this._onHitLineHandler.push(handler);\n    }\n  }, {\n    key: \"onOccupy\",\n    value: function onOccupy(handler) {\n      this._onOccupyHandler.push(handler);\n    }\n  }, {\n    key: \"get\",\n    value: function get(x, y) {\n      return this._grid[y][x];\n    }\n  }, {\n    key: \"occupy\",\n    value: function occupy(partyId, coordinate) {\n      var changes = [];\n      var tile = this._grid[coordinate.y][coordinate.x];\n      if (tile.owner != partyId) {\n        if (tile.owner > 0) {\n          this._score[tile.owner]--;\n        }\n        this._score[partyId]++;\n        tile.owner = partyId;\n        changes.push(tile.y * this._width + tile.x);\n      }\n\n      // 인접한 타일이 다른 타일이면\n      this._updateEdges(coordinate.x - 1, coordinate.y - 1, coordinate.x + 1, coordinate.y + 1);\n\n      return changes;\n    }\n  }, {\n    key: \"view\",\n    value: function view() {\n      for (var y = 0; y < this._height; y++) {\n        var ss = \"(\" + y + \")  \";\n        for (var x = 0; x < this._width; x++) {\n          var tile = this._grid[y][x];\n          ss += tile.owner + (tile.lineOwner > 0 ? \"|\" + tile.lineOwner + \"|\" : \"\") + \"   \";\n        }\n        console.log(ss);\n      }\n      console.log(\"\");\n    }\n  }, {\n    key: \"step\",\n    value: function step(partyId, coordinate, direction, nextDirection) {\n      var changes = [];\n      var tile = this._grid[coordinate.y][coordinate.x];\n\n      // 만약 내 영역이면서, 가장자리이면\n      if (tile.owner == partyId && this._edgeGrid[tile.y][tile.x] == partyId) {\n        // 밖에서 안으로 들어오는거면\n        var adjacentLinedTiles = this._adjacentLinedTiles(tile, false);\n\n        if (adjacentLinedTiles.length > 0) {\n          // 폐곡면이라면\n          var closedLoop = this._pathfinder.findPath(partyId, adjacentLinedTiles[0], tile);\n          if (closedLoop.length > 0) {\n            changes = changes.concat(this._fillArea(partyId, closedLoop));\n          }\n        }\n      }\n\n      ///////// 다른 사람 영역 전체 먹었을때도 포함\n\n      // 다른 선을 밟는다면\n      if (tile.lineOwner > 0) {\n        var lineOwner = tile.lineOwner;\n\n        changes = changes.concat(this.removeLine(tile.lineOwner));\n        // Dispatch!\n        for (var i = 0; i < this._onHitLineHandler.length; i++) {\n          this._onHitLineHandler[i](partyId, lineOwner);\n        }\n        if (lineOwner == partyId) {\n          return changes;\n        }\n      }\n\n      // 만약 다른 사람 땅이거나, 점령되지 않은 지역이라면\n      if (tile.owner != partyId) {\n        tile.lineOwner = partyId;\n        tile.lineCode = this._getLineSubcode(direction, nextDirection);\n        changes.push(tile);\n      }\n\n      return changes;\n    }\n  }, {\n    key: \"_initialize\",\n    value: function _initialize() {\n      this._grid = [];\n      this._edgeGrid = [];\n      this._score = [0, 0, 0, 0, 0, 0, 0, 0];\n      for (var y = 0; y < this._height; y++) {\n        this._grid[y] = [];\n        this._edgeGrid[y] = [];\n        for (var x = 0; x < this._width; x++) {\n          this._grid[y][x] = new TerritoryTile(x, y);\n          this._edgeGrid[y][x] = 0;\n        }\n      }\n      this._pathfinder = new _Pathfinder2.default();\n      this._pathfinder.setGrid(this._grid, this._edgeGrid);\n    }\n  }, {\n    key: \"removeLine\",\n    value: function removeLine(partyId) {\n      var territoryChanges = [];\n      for (var y = 0; y < this._height; y++) {\n        for (var x = 0; x < this._width; x++) {\n          var tile = this._grid[y][x];\n          if (tile.lineOwner == partyId) {\n            tile.lineOwner = 0;\n            tile.lineCode = 0;\n            territoryChanges.push(y * this._width + x);\n          }\n        }\n      }\n      return territoryChanges;\n    }\n  }, {\n    key: \"_fillArea\",\n    value: function _fillArea(partyId, path) {\n      var territoryChanges = [];\n      var lineHitParties = [];\n      var fillArea = [];\n      var fillAreaWidth = 0;\n      var fillAreaHeight = 0;\n      var fillAreaOffsetX = path[0].x;\n      var fillAreaOffsetY = path[0].y;\n\n      // Determine offset, Update opponent's edge\n      for (var i = 0; i < path.length; i++) {\n        fillAreaWidth = Math.max(path[i].x + 1, fillAreaWidth);\n        fillAreaHeight = Math.max(path[i].y + 1, fillAreaHeight);\n        fillAreaOffsetX = Math.min(path[i].x, fillAreaOffsetX);\n        fillAreaOffsetY = Math.min(path[i].y, fillAreaOffsetY);\n      }\n      fillAreaWidth -= fillAreaOffsetX;\n      fillAreaHeight -= fillAreaOffsetY;\n\n      // Initialize fillarea\n      for (var y = 0; y < fillAreaHeight * 3; y++) {\n        fillArea[y] = [];\n        for (var x = 0; x < fillAreaWidth * 3; x++) {\n          fillArea[y][x] = 0;\n        }\n      }\n\n      // Create specified space, Update path edge\n      for (var _i = 0; _i < path.length; _i++) {\n        var ppath = _i == 0 ? path[path.length - 1] : path[_i - 1];\n        var cpath = path[_i];\n        var npath = _i == path.length - 1 ? path[0] : path[_i + 1];\n\n        var px = (cpath.x - fillAreaOffsetX) * 3;\n        var py = (cpath.y - fillAreaOffsetY) * 3;\n\n        var dpx = cpath.x - ppath.x;\n        var dpy = cpath.y - ppath.y;\n        var dnx = cpath.x - npath.x;\n        var dny = cpath.y - npath.y;\n\n        if (dpx != 0) {\n          fillArea[py + 1][px + (dpx > 0 ? 0 : 2)] = 1;\n        } else {\n          fillArea[py + (dpy > 0 ? 0 : 2)][px + 1] = 1;\n        }\n        if (dnx != 0) {\n          fillArea[py + 1][px + (dnx > 0 ? 0 : 2)] = 1;\n        } else {\n          fillArea[py + (dny > 0 ? 0 : 2)][px + 1] = 1;\n        }\n\n        fillArea[py + 1][px + 1] = 1;\n      }\n\n      // Pick flood point\n      var floodFillSeed = { x: 0, y: 0 };\n      for (var _x = 0; _x < fillAreaWidth; _x++) {\n        if (fillArea[1][_x * 3 + 1] > 0) {\n          floodFillSeed.x = _x * 3 + 2;\n          floodFillSeed.y = 2;\n          break;\n        }\n      }\n      // Flood fill\n      var queueX = [floodFillSeed.x];\n      var queueY = [floodFillSeed.y];\n      while (queueY.length) {\n        var currentX = queueX.pop();\n        var currentY = queueY.pop();\n        if (fillArea[currentY][currentX] > 0) {\n          continue;\n        }\n        var west = 0,\n            east = 0;\n        while (west <= currentX && fillArea[currentY][currentX - west] < 1) {\n          west++;\n        }\n        west--;\n        var traverseX = currentX + east - west;\n        while (east - west + currentX < fillAreaWidth * 3 && fillArea[currentY][traverseX] < 1) {\n          fillArea[currentY][traverseX] = 1;\n          if (currentY > 0 && fillArea[currentY - 1][traverseX] < 1) {\n            queueX.push(currentX + east - west);\n            queueY.push(currentY - 1);\n          }\n          if (currentY < fillAreaHeight * 3 - 1 && fillArea[currentY + 1][traverseX] < 1) {\n            queueX.push(currentX + east - west);\n            queueY.push(currentY + 1);\n          }\n          east++;\n          traverseX = currentX + east - west;\n        }\n      }\n\n      // 9-point merge\n      for (var _y = 0; _y < fillAreaHeight; _y++) {\n        for (var _x2 = 0; _x2 < fillAreaWidth; _x2++) {\n          if (fillArea[_y * 3 + 1][_x2 * 3 + 1] > 0) {\n            var gx = _x2 + fillAreaOffsetX;\n            var gy = _y + fillAreaOffsetY;\n            var grid = this._grid[gy][gx];\n            if (grid.lineOwner > 0 && grid.lineOwner != partyId && lineHitParties.indexOf(grid.lineOwner) < 0) {\n              lineHitParties.push(grid.lineOwner);\n            }\n            grid.lineOwner = 0;\n            if (grid.owner != partyId) {\n              if (grid.owner > 0) {\n                this._score[grid.owner]--;\n              }\n              this._score[partyId]++;\n\n              grid.owner = partyId;\n              territoryChanges.push(gy * this._width + gx);\n            }\n          }\n        }\n      }\n      this._updateEdges(fillAreaOffsetX - 1, fillAreaOffsetY - 1, fillAreaOffsetX + fillAreaWidth + 1, fillAreaOffsetY + fillAreaHeight + 1);\n\n      // Dispatch onOccupy\n      for (var _i2 = 0; _i2 < this._onOccupyHandler.length; _i2++) {\n        this._onOccupyHandler[_i2](partyId, territoryChanges);\n      }\n\n      for (var _i3 = 0; _i3 < lineHitParties.length; _i3++) {\n        for (var j = 0; j < this._onHitLineHandler.length; j++) {\n          territoryChanges = territoryChanges.concat(this.removeLine(lineHitParties[_i3]));\n          this._onHitLineHandler[j](partyId, lineHitParties[_i3]);\n        }\n      }\n\n      return territoryChanges;\n    }\n  }, {\n    key: \"_updateEdges\",\n    value: function _updateEdges(startX, startY, endX, endY) {\n      startX = Math.max(startX || 0, 0);\n      startY = Math.max(startY || 0, 0);\n      endX = Math.min(endX || this._width, this._width);\n      endY = Math.min(endY || this._height, this._height);\n      for (var y = startY; y < endY; y++) {\n        for (var x = startX; x < endX; x++) {\n          var grid = this._grid[y][x];\n          if (grid.owner < 1) {\n            continue;\n          }\n          this._edgeGrid[y][x] = 0;\n          var js = y < 1 ? 0 : -1,\n              je = y >= this._height - 1 ? 0 : 1;\n          var ks = x < 1 ? 0 : -1,\n              ke = x >= this._width - 1 ? 0 : 1;\n          for (var j = js; j <= je; j++) {\n            for (var k = ks; k <= ke; k++) {\n              if (this._grid[y + j][x + k].owner != grid.owner) {\n                this._edgeGrid[y][x] = grid.owner;\n                break;\n              }\n            }\n          }\n        }\n      }\n    }\n  }, {\n    key: \"_adjacentLinedTiles\",\n    value: function _adjacentLinedTiles(targetTile) {\n      var detectEdge = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      if (!this._tileChecker) {\n        this._tileChecker = [1, 0, -1, 0, 0, 1, 0, -1];\n      }\n      var adjacentTiles = [];\n      for (var i = 0; i < 4; i++) {\n        var x = targetTile.x + this._tileChecker[i * 2];\n        var y = targetTile.y + this._tileChecker[i * 2 + 1];\n        if (x >= 0 && x < this._width && y >= 0 && y < this._height) {\n          var tile = this._grid[y][x];\n          if (tile.lineOwner == targetTile.owner && tile.lineOwner > 0 || detectEdge && this._edgeGrid[y][x] == targetTile.owner && tile.owner == targetTile.owner) {\n            adjacentTiles.push(tile);\n          }\n        }\n      }\n      return adjacentTiles;\n    }\n  }, {\n    key: \"_getLineSubcode\",\n    value: function _getLineSubcode(direction, nextDirection) {\n      // Forward, march\n      if (direction == nextDirection) {\n        if (direction == 1 || direction == 3) {\n          return 1;\n        } else {\n          return 2;\n        }\n      }\n\n      // Righttime, march\n      else {\n          if (direction == 0 && nextDirection == 1 || direction == 3 && nextDirection == 2) {\n            return 3;\n          } else if (direction == 3 && nextDirection == 0 || direction == 2 && nextDirection == 1) {\n            return 4;\n          } else if (direction == 2 && nextDirection == 3 || direction == 1 && nextDirection == 0) {\n            return 5;\n          } else {\n            return 6;\n          }\n        }\n    }\n  }, {\n    key: \"width\",\n    get: function get() {\n      return this._width;\n    }\n  }, {\n    key: \"height\",\n    get: function get() {\n      return this._height;\n    }\n  }, {\n    key: \"ownership\",\n    get: function get() {\n      return this._grid;\n    }\n  }, {\n    key: \"line\",\n    get: function get() {\n      return this._line;\n    }\n  }]);\n\n  return StageTerritory;\n}();\n\nexports.default = StageTerritory;\n\nvar TerritoryTile = function TerritoryTile(x, y) {\n  _classCallCheck(this, TerritoryTile);\n\n  this.x = x;\n  this.y = y;\n  this.owner = 0;\n  this.lineOwner = 0;\n  this.lineCode = 0;\n};\n\n//# sourceURL=webpack:///./src/StageTerritory.js?");

/***/ }),

/***/ "./src/StageTerritoryDisplay.js":
/*!**************************************!*\
  !*** ./src/StageTerritoryDisplay.js ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _pixi = __webpack_require__(/*! pixi.js */ \"./node_modules/pixi.js/lib/index.js\");\n\nvar PIXI = _interopRequireWildcard(_pixi);\n\nvar _tween = __webpack_require__(/*! @tweenjs/tween.js */ \"./node_modules/@tweenjs/tween.js/src/Tween.js\");\n\nvar TWEEN = _interopRequireWildcard(_tween);\n\nvar _Configuration = __webpack_require__(/*! ./Configuration.js */ \"./src/Configuration.js\");\n\nvar _Configuration2 = _interopRequireDefault(_Configuration);\n\nvar _Asset = __webpack_require__(/*! ./Asset.js */ \"./src/Asset.js\");\n\nvar _Asset2 = _interopRequireDefault(_Asset);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar StageTerritoryDisplay = function (_PIXI$Container) {\n  _inherits(StageTerritoryDisplay, _PIXI$Container);\n\n  function StageTerritoryDisplay() {\n    _classCallCheck(this, StageTerritoryDisplay);\n\n    // Some macros to make code short\n    var _this = _possibleConstructorReturn(this, (StageTerritoryDisplay.__proto__ || Object.getPrototypeOf(StageTerritoryDisplay)).call(this));\n\n    _this._IW = _Configuration2.default.isometric.unitWidth;\n    _this._IH = _Configuration2.default.isometric.unitHeight;\n\n    // Territory that will be drawn\n    _this._territory = null;\n\n    _this._territoryColor = [0, 0xa567b2, 0xffe669, 0xff7c69, 0x00a0ad];\n\n    // Textures\n    _this._territoryTileTextures = null;\n\n    // Sprite pool\n    _this._availableSprites = null;\n    _this._allocatedGroundSprites = null;\n    _this._allocatedLineSprites = null;\n\n    _this._loadTerritoryTileTextures();\n    _this._initializeSpritePool();\n    return _this;\n  }\n\n  _createClass(StageTerritoryDisplay, [{\n    key: \"bind\",\n    value: function bind(territory) {\n      this._territory = territory;\n    }\n  }, {\n    key: \"setTerritoryColor\",\n    value: function setTerritoryColor(territoryColorList) {\n      this._territoryColor = territoryColorList;\n    }\n  }, {\n    key: \"update\",\n    value: function update(viewport, modifiedCoordinates) {\n      var _this2 = this;\n\n      if (this._territory == null) {\n        return;\n      }\n\n      var cx = viewport.x;\n      var cy = viewport.y;\n\n      var imx = Math.floor((cy + viewport.width / 2) / this._IH + (cx + viewport.height / 2) / this._IW);\n      var imy = Math.floor((cy + viewport.width / 2) / this._IH - (cx + viewport.height / 2) / this._IW);\n\n      if (imx == this._lastImx && imy == this._lastImy && (modifiedCoordinates == null || modifiedCoordinates.length < 1)) {\n        return;\n      }\n      this._lastImx = imx;\n      this._lastImy = imy;\n      var iix = cy / this._IH + cx / this._IW;\n      var iiy = cy / this._IH - (cx + viewport.width) / this._IW;\n      iix = Math.min(Math.max(Math.floor(iix - 3), 0), this._territory.width - 1);\n      iiy = Math.min(Math.max(Math.floor(iiy - 3), 0), this._territory.height - 1);\n\n      var previousEmptyYFlag = true;\n      this._newAllocatedGroundSprites = new Map();\n      this._newAllocatedLineSprites = new Map();\n\n      for (var y = iiy; y < this._territory.height; y++) {\n        var emptyXFlag = true;\n        var emptyYFlag = true;\n\n        for (var x = iix; x < this._territory.width; x++) {\n          var cix = x * this._IW / 2 - y * this._IW / 2;\n          var ciy = x * this._IH / 2 + y * this._IH / 2;\n\n          if (cix + this._IW * 2 > cx && cix < cx + viewport.width + this._IW && ciy + this._IH * 2 > cy && ciy < cy + viewport.height + this._IH) {\n            emptyXFlag = false;\n            emptyYFlag = false;\n\n            var territory = this._territory.get(x, y);\n            var isModified = false;\n\n            if (territory.owner > 0 || territory.lineOwner > 0) {\n              isModified = modifiedCoordinates != null && modifiedCoordinates.indexOf(this._coordToKey(x, y)) >= 0;\n            }\n\n            if (territory.owner > 0) {\n              this._drawTile(x, y, cix, ciy, territory, false, isModified);\n              isModified = false;\n            }\n\n            if (territory.lineOwner > 0) {\n              this._drawTile(x, y, cix, ciy, territory, true, isModified);\n            }\n          } else if (!emptyXFlag) {\n            break;\n          } else {\n            emptyXFlag = true;\n          }\n        }\n        if (!previousEmptyYFlag && emptyYFlag) {\n          break;\n        }\n        previousEmptyYFlag = emptyYFlag;\n      }\n\n      // delete\n      this._allocatedGroundSprites.forEach(function (sprite) {\n        _this2._returnSprite(sprite);\n      });\n\n      this._allocatedLineSprites.forEach(function (sprite) {\n        _this2._returnSprite(sprite);\n      });\n      this._allocatedGroundSprites = this._newAllocatedGroundSprites;\n      this._allocatedLineSprites = this._newAllocatedLineSprites;\n    }\n  }, {\n    key: \"_drawTile\",\n    value: function _drawTile(x, y, cix, ciy, territory, isLine, isModified) {\n      var sprite = void 0;\n      var key = this._coordToKey(x, y);\n      var allocationMap = isLine ? this._allocatedLineSprites : this._allocatedGroundSprites;\n      var newAllocationMap = isLine ? this._newAllocatedLineSprites : this._newAllocatedGroundSprites;\n\n      // Already drawn\n      if (allocationMap.has(key)) {\n        sprite = allocationMap.get(key);\n        allocationMap.delete(key);\n      } else {\n        sprite = this._retrieveSprite();\n\n        sprite.x = cix + this._IW / 2;\n        sprite.y = ciy;\n      }\n      newAllocationMap.set(key, sprite);\n      this._updateSprite(sprite, isLine ? territory.lineCode : 0);\n      sprite.tint = this._territoryColor[isLine ? territory.lineOwner : territory.owner];\n\n      if (isModified) {\n        sprite.alpha = 0;\n        var tween = new TWEEN.Tween(sprite).to({\n          alpha: 0.4\n        }, 200 + 300 * Math.random()).easing(TWEEN.Easing.Exponential.In).start();\n      }\n    }\n  }, {\n    key: \"_loadTerritoryTileTextures\",\n    value: function _loadTerritoryTileTextures() {\n      this._territoryTileTextures = [];\n\n      this._territoryTileTextures[0] = _Asset2.default.graphics[\"tile-arrow0\"];\n      this._territoryTileTextures[1] = _Asset2.default.graphics[\"tile-arrow3\"];\n      this._territoryTileTextures[2] = _Asset2.default.graphics[\"tile-arrow1\"];\n      this._territoryTileTextures[3] = _Asset2.default.graphics[\"tile-arrow2\"];\n      this._territoryTileTextures[4] = _Asset2.default.graphics[\"tile-ground\"];\n    }\n  }, {\n    key: \"_initializeSpritePool\",\n    value: function _initializeSpritePool() {\n      this._availableSprites = [];\n      this._allocatedGroundSprites = new Map();\n      this._allocatedLineSprites = new Map();\n    }\n  }, {\n    key: \"_addNewSprite\",\n    value: function _addNewSprite() {\n      var sprite = new PIXI.Sprite(this._territoryTileTextures[4]);\n      sprite.tint = 0xff00ff;\n      sprite.alpha = 0.4;\n      sprite.anchor.set(0.5, 0.42);\n      this._availableSprites.push(sprite);\n      this.addChild(sprite);\n    }\n  }, {\n    key: \"_retrieveSprite\",\n    value: function _retrieveSprite() {\n      // Ensure capacity\n      if (this._availableSprites.length < 1) {\n        this._addNewSprite();\n      }\n      var sprite = this._availableSprites.pop();\n      sprite.visible = true;\n      return sprite;\n    }\n  }, {\n    key: \"_returnSprite\",\n    value: function _returnSprite(sprite) {\n      this._availableSprites.push(sprite);\n      sprite.visible = false;\n    }\n  }, {\n    key: \"_updateSprite\",\n    value: function _updateSprite(sprite, territoryCode) {\n      var _this3 = this;\n\n      var u = function u(n, sx, sy) {\n        sprite.texture = _this3._territoryTileTextures[n];\n        sprite.scale.set(sx, sy);\n      };\n      switch (territoryCode) {\n        case 0:\n          u(4, 1, 1);\n          break;\n        case 1:\n          u(0, 1, 1);\n          break;\n        case 2:\n          u(0, -1, 1);\n          break;\n        case 3:\n          u(1, 1, 1);\n          break;\n        case 4:\n          u(3, -1, 1);\n          break;\n        case 5:\n          u(2, 1, 1);\n          break;\n        case 6:\n          u(3, 1, 1);\n          break;\n      }\n    }\n  }, {\n    key: \"_coordToKey\",\n    value: function _coordToKey(x, y) {\n      return y * this._territory.width + x;\n    }\n  }]);\n\n  return StageTerritoryDisplay;\n}(PIXI.Container);\n\nexports.default = StageTerritoryDisplay;\n\n//# sourceURL=webpack:///./src/StageTerritoryDisplay.js?");

/***/ }),

/***/ "./src/StageTimer.js":
/*!***************************!*\
  !*** ./src/StageTimer.js ***!
  \***************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _pixi = __webpack_require__(/*! pixi.js */ \"./node_modules/pixi.js/lib/index.js\");\n\nvar PIXI = _interopRequireWildcard(_pixi);\n\nvar _Asset = __webpack_require__(/*! ./Asset.js */ \"./src/Asset.js\");\n\nvar _Asset2 = _interopRequireDefault(_Asset);\n\nvar _Configuration = __webpack_require__(/*! ./Configuration.js */ \"./src/Configuration.js\");\n\nvar _Configuration2 = _interopRequireDefault(_Configuration);\n\nvar _tween = __webpack_require__(/*! @tweenjs/tween.js */ \"./node_modules/@tweenjs/tween.js/src/Tween.js\");\n\nvar TWEEN = _interopRequireWildcard(_tween);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar StageTimer = function (_PIXI$Container) {\n  _inherits(StageTimer, _PIXI$Container);\n\n  function StageTimer(seconds) {\n    _classCallCheck(this, StageTimer);\n\n    var _this = _possibleConstructorReturn(this, (StageTimer.__proto__ || Object.getPrototypeOf(StageTimer)).call(this));\n\n    _this._timeTotal = seconds;\n    _this._timeElapsed = 0;\n    _this._prevTimeElapsed = 0;\n    _this._expired = false;\n\n    // Sprites\n    _this._background = null;\n    _this._barContainer = null;\n    _this._bar = null;\n    _this._barLeftEdge = null;\n    _this._barRightEdge = null;\n\n    _this._timeLeftText = 0;\n\n    // Textures\n    _this._backgroundTexture = null;\n    _this._barTexture = null;\n    _this._barEdgeTexture = null;\n\n    _this._blinkTweenUp = null;\n    _this._blinkTweenDown = null;\n    _this._blinkTweenStarted = null;\n\n    _this._onTimeDoneHandlers = [];\n\n    _this._initializeGraphics();\n    _this._initializeBlinkTween();\n\n    _this._tick = 0;\n    return _this;\n  }\n\n  _createClass(StageTimer, [{\n    key: \"onTimeDone\",\n    value: function onTimeDone(handler) {\n      this._onTimeDoneHandlers.push(handler);\n    }\n  }, {\n    key: \"update\",\n    value: function update(deltaTime) {\n      if (this._expired) {\n        return;\n      }\n      this._timeElapsed += deltaTime / 60;\n      if (this._timeElapsed >= this._timeTotal) {\n        this._expired = true;\n        for (var i = 0; i < this._onTimeDoneHandlers.length; i++) {\n          this._onTimeDoneHandlers[i]();\n        }\n        return;\n      }\n\n      var barWidth = 392 * (this._timeTotal - this._timeElapsed) / this._timeTotal - 21;\n      if (barWidth < 0) {\n        this._bar.visible = false;\n        barWidth = 0;\n      }\n\n      if (barWidth < 100) {\n        this._startBlink();\n      }\n\n      if (Math.floor(this._timeElapsed) != this._prevTimeElapsed) {\n        this._prevTimeElapsed = Math.floor(this._timeElapsed);\n        var timeLeft = Math.floor(this._timeTotal - this._timeElapsed);\n        this._timeLeftText.text = Math.floor(timeLeft / 60) + \":\" + (timeLeft % 60 < 10 ? \"0\" : \"\") + timeLeft % 60;\n      }\n\n      this._bar.width = barWidth;\n      this._barRightEdge.x = barWidth + 139;\n    }\n  }, {\n    key: \"_startBlink\",\n    value: function _startBlink() {\n      if (!this._blinkTweenStarted) {\n        this._blinkTweenStarted = true;\n        this._blinkTweenUp.start();\n      }\n    }\n  }, {\n    key: \"_stopBlink\",\n    value: function _stopBlink() {\n      if (this._blinkTweenStarted) {\n        this._blinkTweenUp.stop();\n        this._barContainer.alpha = 1;\n        this._blinkTweenStarted = false;\n      }\n    }\n  }, {\n    key: \"_initializeTimer\",\n    value: function _initializeTimer() {\n      this._timeElapsed = 0;\n      this._prevTimeElapsed = -0;\n      this._expired = false;\n    }\n  }, {\n    key: \"_initializeGraphics\",\n    value: function _initializeGraphics() {\n      // Load assets\n      this._backgroundTexture = _Asset2.default.graphics[\"timer-background\"];\n      this._barTexture = _Asset2.default.graphics[\"timer-bar\"];\n      this._barEdgeTexture = _Asset2.default.graphics[\"timer-edge\"];\n\n      // Create sprites\n      this._background = new PIXI.Sprite(this._backgroundTexture);\n      this._barContainer = new PIXI.Container();\n      this._bar = new PIXI.Sprite(this._barTexture);\n      this._barLeftEdge = new PIXI.Sprite(this._barEdgeTexture);\n      this._barRightEdge = new PIXI.Sprite(this._barEdgeTexture);\n\n      var mt = this._timeTotal - 1;\n      this._timeLeftText = new PIXI.Text(Math.floor(mt / 60) + \":\" + Math.floor(mt % 60), {\n        fontFamily: \"Arial\",\n        fontSize: 47,\n        fontWeight: \"bold\",\n        fill: 0x666666,\n        align: \"left\"\n      });\n      this._timeLeftText.anchor.set(0, 0.5);\n      this._timeLeftText.x = 17;\n      this._timeLeftText.y = 67;\n\n      this._barContainer.y = 14;\n\n      this._bar.x = 126 + 14;\n      this._barLeftEdge.scale.set(-1, 1);\n      this._barLeftEdge.x = 126 + 14;\n\n      this._barContainer.addChild(this._bar);\n      this._barContainer.addChild(this._barLeftEdge);\n      this._barContainer.addChild(this._barRightEdge);\n      this.addChild(this._background);\n      this.addChild(this._barContainer);\n      this.addChild(this._timeLeftText);\n    }\n  }, {\n    key: \"_initializeBlinkTween\",\n    value: function _initializeBlinkTween() {\n      this._blinkTweenUp = new TWEEN.Tween(this._barContainer);\n      this._blinkTweenDown = new TWEEN.Tween(this._barContainer);\n\n      this._blinkTweenStarted = false;\n\n      // These two tweens are chaning each other\n      this._blinkTweenUp.to({ alpha: 0.3 }, 150).easing(TWEEN.Easing.Quadratic.Out).chain(this._blinkTweenDown);\n\n      this._blinkTweenDown.to({ alpha: 1 }, 150).easing(TWEEN.Easing.Quadratic.Out).chain(this._blinkTweenUp);\n    }\n  }]);\n\n  return StageTimer;\n}(PIXI.Container);\n\nexports.default = StageTimer;\n\n//# sourceURL=webpack:///./src/StageTimer.js?");

/***/ }),

/***/ "./src/TestGameplayScreen.js":
/*!***********************************!*\
  !*** ./src/TestGameplayScreen.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _pixi = __webpack_require__(/*! pixi.js */ \"./node_modules/pixi.js/lib/index.js\");\n\nvar PIXI = _interopRequireWildcard(_pixi);\n\nvar _Screen2 = __webpack_require__(/*! ./Screen.js */ \"./src/Screen.js\");\n\nvar _Screen3 = _interopRequireDefault(_Screen2);\n\nvar _Party = __webpack_require__(/*! ./Party.js */ \"./src/Party.js\");\n\nvar _Party2 = _interopRequireDefault(_Party);\n\nvar _Stage = __webpack_require__(/*! ./Stage.js */ \"./src/Stage.js\");\n\nvar _Stage2 = _interopRequireDefault(_Stage);\n\nvar _Asset = __webpack_require__(/*! ./Asset.js */ \"./src/Asset.js\");\n\nvar _Asset2 = _interopRequireDefault(_Asset);\n\nvar _StageData = __webpack_require__(/*! ./StageData.js */ \"./src/StageData.js\");\n\nvar _StageData2 = _interopRequireDefault(_StageData);\n\nvar _Character = __webpack_require__(/*! ./Character.js */ \"./src/Character.js\");\n\nvar _Character2 = _interopRequireDefault(_Character);\n\nvar _CharacterData = __webpack_require__(/*! ./CharacterData.js */ \"./src/CharacterData.js\");\n\nvar _CharacterData2 = _interopRequireDefault(_CharacterData);\n\nvar _Configuration = __webpack_require__(/*! ./Configuration.js */ \"./src/Configuration.js\");\n\nvar _Configuration2 = _interopRequireDefault(_Configuration);\n\nvar _tween2 = __webpack_require__(/*! @tweenjs/tween.js */ \"./node_modules/@tweenjs/tween.js/src/Tween.js\");\n\nvar _tween3 = _interopRequireDefault(_tween2);\n\nvar _PartySimulator = __webpack_require__(/*! ./PartySimulator.js */ \"./src/PartySimulator.js\");\n\nvar _PartySimulator2 = _interopRequireDefault(_PartySimulator);\n\nvar _CharacterDatabase = __webpack_require__(/*! ./CharacterDatabase.js */ \"./src/CharacterDatabase.js\");\n\nvar _CharacterDatabase2 = _interopRequireDefault(_CharacterDatabase);\n\nvar _StagePlotter = __webpack_require__(/*! ./StagePlotter.js */ \"./src/StagePlotter.js\");\n\nvar _StagePlotter2 = _interopRequireDefault(_StagePlotter);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * Main screen\n *\n * @date 13 June 2018\n * @author HyunJun Kim\n */\nvar TestGameplayScreen = function (_Screen) {\n  _inherits(TestGameplayScreen, _Screen);\n\n  function TestGameplayScreen() {\n    _classCallCheck(this, TestGameplayScreen);\n\n    return _possibleConstructorReturn(this, (TestGameplayScreen.__proto__ || Object.getPrototypeOf(TestGameplayScreen)).apply(this, arguments));\n  }\n\n  _createClass(TestGameplayScreen, [{\n    key: \"onInit\",\n    value: function onInit() {\n      var _this2 = this;\n\n      this._backgroundDisplay = new PIXI.Sprite(_Asset2.default.graphics[\"background\"]);\n      this._backgroundDisplay.width = _Configuration2.default.baseResolution.width;\n      this._backgroundDisplay.height = _Configuration2.default.baseResolution.height;\n\n      this.root.addChild(this._backgroundDisplay);\n\n      // Initialize game stage\n      this.stage = new _Stage2.default(new _StageData2.default());\n\n      // Create a party\n      this.party = new _Party2.default(1, \"3153\", 0xff00ff);\n\n      var crts = [7, 8, 9];\n      for (var i = 0; i < 3; i++) {\n        var character = new _Character2.default(_CharacterDatabase2.default[crts[i]]);\n        this.party.addMember(character);\n      }\n      this.stage.addParty(this.party);\n      this.stage.me = this.party;\n      this.party.setStartCoordinate(this.stage.meta.dimension.width - 1, 0, 3);\n\n      this.party.displaceToStartCoordinate();\n\n      this.root.addChild(this.stage);\n\n      // Minimap\n      this.stage.minimap.x = 1350;\n      this.stage.minimap.y = 50;\n      this.root.addChild(this.stage.minimap);\n\n      // Timer\n      this.stage.timer.x = _Configuration2.default.baseResolution.width / 2 - 264;\n      this.stage.timer.y = 13;\n      this.stage.timer.alpha = 0.9;\n      this.root.addChild(this.stage.timer);\n\n      // Event board\n      this.stage.eventBoard.y = 430;\n      this.stage.eventBoard.x = _Configuration2.default.baseResolution.width - 250;\n      this.root.addChild(this.stage.eventBoard);\n\n      // Player board;\n      this.stage.playerBoard.y = 100;\n      this.stage.playerBoard.x = 30;\n      //this.stage.playerBoard.alpha = 0.7;\n      this.root.addChild(this.stage.playerBoard);\n\n      // Plotter box\n      this.stage.plotterBox.y = 880;\n      this.stage.plotterBox.x = 30;\n      this.root.addChild(this.stage.plotterBox);\n\n      this.stage.onGameEnd(function (result) {\n        _this2.context.result = result;\n        _this2.context.test = true;\n        _this2.context.rewards = [{ type: \"coin\", amount: 100 }];\n        _this2.context.switchScreen(\"reward\");\n\n        _this2.stage._parties = [];\n        //this.stage = null;\n      });\n\n      // Input flasher\n      this.flashBoard = {\n        left: new PIXI.Graphics(),\n        right: new PIXI.Graphics()\n      };\n\n      this.flashBoard.left.beginFill(0xffffff);\n      this.flashBoard.left.drawRect(0, 0, this.getWidth() / 2, this.getHeight());\n      this.flashBoard.left.endFill();\n      this.flashBoard.left.visible = false;\n\n      this.flashBoard.right.beginFill(0xffffff);\n      this.flashBoard.right.drawRect(0, 0, this.getWidth() / 2, this.getHeight());\n      this.flashBoard.right.endFill();\n      this.flashBoard.right.visible = false;\n\n      this.flashBoard.right.x = this.getWidth() / 2;\n\n      this.root.addChild(this.flashBoard.left);\n      this.root.addChild(this.flashBoard.right);\n\n      this.context.renderer.getInteractiveManager().on(\"pointerdown\", function (e) {\n        _this2.onScreenTouched(e);\n      });\n\n      /// Create ai party\n      this.aiSims = [];\n      this.createAIParty(2, { x: 0, y: 0 }, 0);\n      this.createAIParty(3, { x: 0, y: this.stage.meta.dimension.height - 1 }, 0);\n      this.createAIParty(4, {\n        x: this.stage.meta.dimension.width - 1,\n        y: this.stage.meta.dimension.height - 1\n      }, 2);\n    }\n  }, {\n    key: \"onActive\",\n    value: function onActive() {\n      this.fadeOut();\n    }\n  }, {\n    key: \"onUpdate\",\n    value: function onUpdate(deltaTime) {\n      for (var i = 0; i < this.aiSims.length; i++) {\n        this.aiSims[i].update(deltaTime);\n      }\n\n      this.stage.update(deltaTime);\n    }\n  }, {\n    key: \"createAIParty\",\n    value: function createAIParty(idx, coord, sdir) {\n      // Create a party\n      var aiParty = new _Party2.default(idx, \"135135\", 0xffffff * Math.random());\n      var ai = new _PartySimulator2.default(aiParty);\n      ai.setEnvironment(this.stage.territory, this.stage.meta.obstacles);\n      for (var i = 0; i < 3; i++) {\n        var character = new _Character2.default(_CharacterDatabase2.default[Math.floor(Math.random() * _CharacterDatabase2.default.length)]);\n        aiParty.addMember(character);\n      }\n\n      aiParty.setStartCoordinate(coord.x, coord.y, sdir);\n      aiParty.displaceToStartCoordinate();\n      this.stage.addParty(aiParty);\n\n      this.aiSims.push(ai);\n    }\n  }, {\n    key: \"onScreenTouched\",\n    value: function onScreenTouched(event) {\n      var _this3 = this;\n\n      // Right turn\n      if (event.data.global.x > _Configuration2.default.resolution.width / 2) {\n        this.stage.plotter.plot();\n        this.stage.plotter.setPreviewPrototype(this.stage.plotter.popNextPrototype());\n        this.stage.plotterBox.setPrototype(this.stage.plotter.nextPrototype);\n\n        //this.party.scheduleDirection(\n        //  this.party.head.direction == 0 || this.party.head.direction == 2 ? 1 : 0\n        //);\n\n        this.flashBoard.right.visible = true;\n        this.flashBoard.right.alpha = 0.2;\n        var tween = new _tween3.default.Tween(this.flashBoard.right).to({\n          alpha: 0\n        }, 200).easing(_tween3.default.Easing.Back.In).onComplete(function () {\n          _this3.flashBoard.right.visible = false;\n        }).start();\n      }\n\n      // Left turn\n      else {\n          //this.party.scheduleDirection(\n          //  this.party.head.direction == 2 || this.party.head.direction == 0 ? 3 : 2\n          //);\n          this.stage.plotter.rotatePreview();\n\n          this.flashBoard.left.visible = true;\n          this.flashBoard.left.alpha = 0.2;\n          var _tween = new _tween3.default.Tween(this.flashBoard.left).to({\n            alpha: 0\n          }, 200).easing(_tween3.default.Easing.Back.In).onComplete(function () {\n            _this3.flashBoard.left.visible = false;\n          }).start();\n        }\n    }\n  }]);\n\n  return TestGameplayScreen;\n}(_Screen3.default);\n\nexports.default = TestGameplayScreen;\n\n//# sourceURL=webpack:///./src/TestGameplayScreen.js?");

/***/ }),

/***/ "./src/ToggleButton.js":
/*!*****************************!*\
  !*** ./src/ToggleButton.js ***!
  \*****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _pixi = __webpack_require__(/*! pixi.js */ \"./node_modules/pixi.js/lib/index.js\");\n\nvar PIXI = _interopRequireWildcard(_pixi);\n\nvar _tween = __webpack_require__(/*! @tweenjs/tween.js */ \"./node_modules/@tweenjs/tween.js/src/Tween.js\");\n\nvar TWEEN = _interopRequireWildcard(_tween);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar toggleButton = function (_PIXI$Sprite) {\n  _inherits(toggleButton, _PIXI$Sprite);\n\n  function toggleButton(texture1, texture2) {\n    _classCallCheck(this, toggleButton);\n\n    var _this = _possibleConstructorReturn(this, (toggleButton.__proto__ || Object.getPrototypeOf(toggleButton)).call(this, texture1));\n\n    _this.textureOff = texture1;\n    _this.textureOn = texture2;\n    _this.toggle = false;\n\n    _this._initialize();\n    _this._callback = null;\n    _this.anchor.set(0.5, 0.5);\n    return _this;\n  }\n\n  _createClass(toggleButton, [{\n    key: \"_initialize\",\n    value: function _initialize() {\n      var _this2 = this;\n\n      this.interactive = true;\n\n      this.on(\"pointertap\", function (e) {\n        _this2.onButtonClick(e);\n      });\n\n      this.on(\"pointerdown\", function (e) {\n        _this2.onButtonDown(e);\n      });\n      this.on(\"pointerup\", function (e) {\n        _this2.onButtonUp(e);\n      });\n      this.on(\"pointerupoutside\", function (e) {\n        _this2.onButtonUp(e);\n      });\n      this.on(\"pointerover\", function (e) {\n        _this2.onButtonOver(e);\n      });\n      this.on(\"pointerout\", function (e) {\n        _this2.onButtonOut(e);\n      });\n    }\n  }, {\n    key: \"onButtonClick\",\n    value: function onButtonClick() {\n      if (this._callback != null) {\n        this._callback(this.toggle);\n      }\n      if (this.toggle) {\n        this.texture = this.textureOff;\n      } else {\n        this.texture = this.textureOn;\n      }\n      this.toggle = !this.toggle;\n    }\n  }, {\n    key: \"onButtonDown\",\n    value: function onButtonDown() {\n      var tween = new TWEEN.Tween(this.scale).to({\n        x: 0.8,\n        y: 0.8\n      }, 200).easing(TWEEN.Easing.Quadratic.Out).start();\n    }\n  }, {\n    key: \"onButtonUp\",\n    value: function onButtonUp() {\n      var tween = new TWEEN.Tween(this.scale).to({\n        x: 1,\n        y: 1\n      }, 200).easing(TWEEN.Easing.Quadratic.Out).start();\n    }\n  }, {\n    key: \"onButtonOver\",\n    value: function onButtonOver() {\n      var tween = new TWEEN.Tween(this.scale).to({\n        x: 1.1,\n        y: 1.1\n      }, 200).easing(TWEEN.Easing.Quadratic.Out).start();\n    }\n  }, {\n    key: \"onButtonOut\",\n    value: function onButtonOut() {\n      var tween = new TWEEN.Tween(this.scale).to({\n        x: 1,\n        y: 1\n      }, 200).easing(TWEEN.Easing.Quadratic.Out).start();\n    }\n  }, {\n    key: \"clicked\",\n    value: function clicked(callback) {\n      this._callback = callback;\n    }\n  }]);\n\n  return toggleButton;\n}(PIXI.Sprite);\n\nexports.default = toggleButton;\n\n//# sourceURL=webpack:///./src/ToggleButton.js?");

/***/ }),

/***/ "./src/app.js":
/*!********************!*\
  !*** ./src/app.js ***!
  \********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar _SpringParty = __webpack_require__(/*! ./SpringParty.js */ \"./src/SpringParty.js\");\n\nvar _SpringParty2 = _interopRequireDefault(_SpringParty);\n\nvar _StageTerritory = __webpack_require__(/*! ./StageTerritory.js */ \"./src/StageTerritory.js\");\n\nvar _StageTerritory2 = _interopRequireDefault(_StageTerritory);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar game = new _SpringParty2.default();\n\ndocument.body.appendChild(game.context.renderer.getDomElement());\n\n//# sourceURL=webpack:///./src/app.js?");

/***/ }),

/***/ 0:
/*!********************!*\
  !*** ws (ignored) ***!
  \********************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("/* (ignored) */\n\n//# sourceURL=webpack:///ws_(ignored)?");

/***/ })

/******/ });